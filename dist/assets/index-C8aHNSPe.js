function e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){var n=!1;try{n=this instanceof e}catch{}return n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r,s,a,i,o={exports:{}},l={},c={exports:{}},u={};function d(){if(r)return u;r=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var x=y.prototype=new v;x.constructor=y,p(x,b.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,j={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function N(t,n,r){var s,a={},i=null,o=null;if(null!=n)for(s in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(i=""+n.key),n)_.call(n,s)&&!k.hasOwnProperty(s)&&(a[s]=n[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:e,type:t,key:i,ref:o,props:a,_owner:j.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var E=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(n,r,s,a,i){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l=!1;if(null===n)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return i=i(l=n),n=""===a?"."+C(l,0):a,w(i)?(s="",null!=n&&(s=n.replace(E,"$&/")+"/"),T(i,r,s,"",function(e){return e})):null!=i&&(S(i)&&(i=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+n)),r.push(i)),1;if(l=0,a=""===a?".":a+":",w(n))for(var c=0;c<n.length;c++){var u=a+C(o=n[c],c);l+=T(o,r,s,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(o=n.next()).done;)l+=T(o=o.value,r,s,u=a+C(o,c++),i);else if("object"===o)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},A={transition:null},I={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:A,ReactCurrentOwner:j};function D(){throw Error("act(...) is not supported in production builds of React.")}return u.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=b,u.Fragment=n,u.Profiler=a,u.PureComponent=y,u.StrictMode=s,u.Suspense=c,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,u.act=D,u.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=p({},t.props),a=t.key,i=t.ref,o=t._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,o=j.current),void 0!==n.key&&(a=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)_.call(n,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:e,type:t.type,key:a,ref:i,props:s,_owner:o}},u.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},u.createElement=N,u.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:l,render:e}},u.isValidElement=S,u.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},u.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},u.unstable_act=D,u.useCallback=function(e,t){return R.current.useCallback(e,t)},u.useContext=function(e){return R.current.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e){return R.current.useDeferredValue(e)},u.useEffect=function(e,t){return R.current.useEffect(e,t)},u.useId=function(){return R.current.useId()},u.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},u.useMemo=function(e,t){return R.current.useMemo(e,t)},u.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},u.useRef=function(e){return R.current.useRef(e)},u.useState=function(e){return R.current.useState(e)},u.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},u.useTransition=function(){return R.current.useTransition()},u.version="18.3.1",u}function h(){return s||(s=1,c.exports=d()),c.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=(i||(i=1,o.exports=function(){if(a)return l;a=1;var e=h(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,a){var o,l={},c=null,u=null;for(o in void 0!==a&&(c=""+a),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,o)&&!i.hasOwnProperty(o)&&(l[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===l[o]&&(l[o]=n[o]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:s.current}}return l.Fragment=n,l.jsx=o,l.jsxs=o,l}()),o.exports),m=h();const p=t(m),g=e({__proto__:null,default:p},[m]);var b,v,y,x,w,_={},j={exports:{}},k={},N={exports:{}},S={};function E(){return v||(v=1,N.exports=(b||(b=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,p=!1,g="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function x(e){if(p=!1,y(e),!m)if(null!==n(l))m=!0,R(w);else{var t=n(c);null!==t&&A(x,t.startTime-e)}}function w(t,s){m=!1,p&&(p=!1,b(N),N=-1),f=!0;var a=h;try{for(y(s),d=n(l);null!==d&&(!(d.expirationTime>s)||t&&!C());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),y(s)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&A(x,g.startTime-s),u=!1}return u}finally{d=null,h=a,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,j=!1,k=null,N=-1,S=5,E=-1;function C(){return!(e.unstable_now()-E<S)}function T(){if(null!==k){var t=e.unstable_now();E=t;var n=!0;try{n=k(!0,t)}finally{n?_():(j=!1,k=null)}}else j=!1}if("function"==typeof v)_=function(){v(T)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=T,_=function(){O.postMessage(null)}}else _=function(){g(T,0)};function R(e){k=e,j||(j=!0,_())}function A(t,n){N=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,R(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(p?(b(N),N=-1):p=!0,A(x,a-i))):(r.sortIndex=o,t(l,r),m||f||(m=!0,R(w))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(S)),S)),N.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function C(){if(y)return k;y=1;var e=h(),t=E();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(s[e]=t,e=0;e<t.length;e++)r.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function f(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(p,g);m[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(p,g);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(p,g);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),D=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,$=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case w:return"Portal";case N:return"Profiler";case j:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(ne(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,ke=null,Ne=null;function Se(e){if(e=xs(e)){if("function"!=typeof je)throw Error(n(280));var t=e.stateNode;t&&(t=_s(t),je(e.stateNode,e.type,t))}}function Ee(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Oe=!1;function Re(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Te(e,t,n)}finally{Oe=!1,(null!==ke||null!==Ne)&&(Pe(),Ce())}}function Ae(e,t){var r=e.stateNode;if(null===r)return null;var s=_s(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var Ie=!1;if(o)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Ie=!1}function Me(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,$e=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,$e=e}};function Be(e,t,n,r,s,a,i,o,l){Le=!1,$e=null,Me.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(n(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(s=a.return)){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return qe(a),e;if(i===s)return qe(a),t;i=i.sibling}throw Error(n(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(n(189))}}if(r.alternate!==s)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Qe=t.unstable_requestPaint,Xe=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,nt=t.unstable_NormalPriority,rt=t.unstable_LowPriority,st=t.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var ut=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=ht(o):0!==(a&=i)&&(r=ht(a))}else 0!==(i=n&~s)?r=ht(i):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return!(4194240&(ut<<=1))&&(ut=64),e}function bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _t,jt,kt,Nt,St,Et=!1,Ct=[],Tt=null,Pt=null,Ot=null,Rt=new Map,At=new Map,It=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function $t(e){var t=ys(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Ot&&Ft(Ot)&&(Ot=null),Rt.forEach(zt),At.forEach(zt)}function Bt(e,n){e.blockedOn===n&&(e.blockedOn=null,Et||(Et=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Pt&&Bt(Pt,e),null!==Ot&&Bt(Ot,e),Rt.forEach(t),At.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)$t(n),null===n.blockedOn&&It.shift()}var Ht=v.ReactCurrentBatchConfig,qt=!0;function Vt(e,t,n,r){var s=xt,a=Ht.transition;Ht.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=s,Ht.transition=a}}function Kt(e,t,n,r){var s=xt,a=Ht.transition;Ht.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=s,Ht.transition=a}}function Gt(e,t,n,r){if(qt){var s=Jt(e,t,n,r);if(null===s)qr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,r,s),!0;case"mouseover":return Ot=Lt(Ot,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,At.set(a,Lt(At.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==s;){var a=xs(s);if(null!==a&&_t(a),null===(a=Jt(e,t,n,r))&&qr(e,t,r,Yt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Yt=null;function Jt(e,t,n,r){if(Yt=null,null!==(e=ys(e=_e(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return en=s.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=$({},un,{view:0,detail:0}),fn=an(hn),mn=$({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=an(mn),gn=an($({},mn,{dataTransfer:0})),bn=an($({},hn,{relatedTarget:0})),vn=an($({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=$({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),wn=an($({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return Nn}var En=$({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(En),Tn=an($({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an($({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),On=an($({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=$({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Rn),In=[9,13,27,32],Dn=o&&"CompositionEvent"in window,Mn=null;o&&"documentMode"in document&&(Mn=document.documentMode);var Ln=o&&"TextEvent"in window&&!Mn,$n=o&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ee(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){Fr(e,0)}function Jn(e){if(G(ws(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(o){var Zn;if(o){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"==typeof tr.oninput}Zn=er}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Gn=Kn=null)}function rr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];Vn(t,Gn,e,_e(e)),Re(Yn,t)}}function sr(e,t,n){"focusin"===e?(nr(),Gn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!l.call(t,s)||!lr(e[s],t[s]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=dr(n,a);var i=dr(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=o&&"documentMode"in document&&11>=document.documentMode,br=null,vr=null,yr=null,xr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==br||br!==Y(r)||("selectionStart"in(r=br)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Nr={};function Sr(e){if(kr[e])return kr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return kr[e]=n[t];return e}o&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Er=Sr("animationend"),Cr=Sr("animationiteration"),Tr=Sr("animationstart"),Pr=Sr("transitionend"),Or=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Or.set(e,t),a(t,[e])}for(var Ir=0;Ir<Rr.length;Ir++){var Dr=Rr[Ir];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Er,"onAnimationEnd"),Ar(Cr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Pr,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function $r(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,a,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(n(198));var u=$e;Le=!1,$e=null,Fe||(Fe=!0,ze=u)}}(s,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;$r(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;$r(s,o,c),a=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,r.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var s=Vt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=ys(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Re(function(){var r=a,s=_e(n),i=[];e:{var o=Or.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Er:case Cr:case Tr:l=vn;break;case Pr:l=On;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Ae(m,h))&&u.push(Vr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:ws(l),f=null==c?o:ws(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,ys(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Gr(f))m++;for(f=0,p=h;p;p=Gr(p))f++;for(;0<m-f;)u=Gr(u),m--;for(;0<f-m;)h=Gr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Yr(i,o,l,u,!1),null!==c&&null!==d&&Yr(i,d,c,u,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(qn(o))if(Xn)g=or;else{g=ar;var b=sr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Vn(i,g,n,s):(b&&b(e,o,r),"focusout"===e&&(b=o._wrapperState)&&b.controlled&&"number"===o.type&&te(o,"number",o.value)),b=r?ws(r):window,e){case"focusin":(qn(b)||"true"===b.contentEditable)&&(br=b,vr=r,yr=null);break;case"focusout":yr=vr=br=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,wr(i,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(i,n,s)}var v;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&($n&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(v=tn()):(Zt="value"in(Xt=s)?Xt.value:Xt.textContent,Wn=!0)),0<(b=Kr(r,y)).length&&(y=new wn(y,e,null,n,s),i.push({event:y,listeners:b}),v?y.data=v:null!==(v=Bn(n))&&(y.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Un(e,t)?(e=tn(),en=Zt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=v))}Fr(i,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Ae(e,n))&&r.unshift(Vr(e,a,s)),null!=(a=Ae(e,t))&&r.push(Vr(e,a,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,a))&&i.unshift(Vr(n,l,o)):s||null!=(l=Ae(n,a))&&i.push(Vr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Jr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Qr,"")}function Zr(e,t,r){if(t=Xr(t),Xr(e)!==t&&r)throw Error(n(425))}function es(){}var ts=null,ns=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ss="function"==typeof setTimeout?setTimeout:void 0,as="function"==typeof clearTimeout?clearTimeout:void 0,is="function"==typeof Promise?Promise:void 0,os="function"==typeof queueMicrotask?queueMicrotask:void 0!==is?function(e){return is.resolve(null).then(e).catch(ls)}:ss;function ls(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Wt(t)}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),fs="__reactFiber$"+hs,ms="__reactProps$"+hs,ps="__reactContainer$"+hs,gs="__reactEvents$"+hs,bs="__reactListeners$"+hs,vs="__reactHandles$"+hs;function ys(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[fs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[fs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[fs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function _s(e){return e[ms]||null}var js=[],ks=-1;function Ns(e){return{current:e}}function Ss(e){0>ks||(e.current=js[ks],js[ks]=null,ks--)}function Es(e,t){ks++,js[ks]=e.current,e.current=t}var Cs={},Ts=Ns(Cs),Ps=Ns(!1),Os=Cs;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function As(e){return null!=(e=e.childContextTypes)}function Is(){Ss(Ps),Ss(Ts)}function Ds(e,t,r){if(Ts.current!==Cs)throw Error(n(168));Es(Ts,t),Es(Ps,r)}function Ms(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!=typeof s.getChildContext)return r;for(var a in s=s.getChildContext())if(!(a in t))throw Error(n(108,H(e)||"Unknown",a));return $({},r,s)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Os=Ts.current,Es(Ts,e),Es(Ps,Ps.current),!0}function $s(e,t,r){var s=e.stateNode;if(!s)throw Error(n(169));r?(e=Ms(e,t,Os),s.__reactInternalMemoizedMergedChildContext=e,Ss(Ps),Ss(Ts),Es(Ts,e)):Ss(Ps),Es(Ps,r)}var Fs=null,zs=!1,Us=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function Ws(){if(!Us&&null!==Fs){Us=!0;var e=0,t=xt;try{var n=Fs;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,zs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(et,Ws),s}finally{xt=t,Us=!1}}return null}var Hs=[],qs=0,Vs=null,Ks=0,Gs=[],Ys=0,Js=null,Qs=1,Xs="";function Zs(e,t){Hs[qs++]=Ks,Hs[qs++]=Vs,Vs=e,Ks=t}function ea(e,t,n){Gs[Ys++]=Qs,Gs[Ys++]=Xs,Gs[Ys++]=Js,Js=e;var r=Qs;e=Xs;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var a=32-ot(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Qs=1<<32-ot(t)+s|n<<s|r,Xs=a+e}else Qs=1<<a|n<<s|r,Xs=e}function ta(e){null!==e.return&&(Zs(e,1),ea(e,1,0))}function na(e){for(;e===Vs;)Vs=Hs[--qs],Hs[qs]=null,Ks=Hs[--qs],Hs[qs]=null;for(;e===Js;)Js=Gs[--Ys],Gs[Ys]=null,Xs=Gs[--Ys],Gs[Ys]=null,Qs=Gs[--Ys],Gs[Ys]=null}var ra=null,sa=null,aa=!1,ia=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=us(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Qs,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,sa=null,!0);default:return!1}}function ca(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(aa){var t=sa;if(t){var r=t;if(!la(e,t)){if(ca(e))throw Error(n(418));t=us(r.nextSibling);var s=ra;t&&la(e,t)?oa(s,r):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(n(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=sa)){if(ca(e))throw fa(),Error(n(418));for(;t;)oa(e,t),t=us(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=us(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?us(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=sa;e;)e=us(e.nextSibling)}function ma(){sa=ra=null,aa=!1}function pa(e){null===ia?ia=[e]:ia.push(e)}var ga=v.ReactCurrentBatchConfig;function ba(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var s=r.stateNode}if(!s)throw Error(n(147,e));var a=s,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$c(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===A&&ya(s)===t.type)?((r=a(t,n.props)).ref=ba(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ba(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$c(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ba(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case w:return n.key===s?u(e,t,n,r):null;case A:return f(e,t,(s=n._init)(n._payload),r)}if(ne(n)||M(n))return null!==s?null:d(e,t,n,r,null);va(e,n)}return null}function m(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return m(e,t,n,(0,r._init)(r._payload),s)}if(ne(r)||M(r))return d(t,e=e.get(n)||null,r,s,null);va(t,r)}return null}return function l(c,u,d,p){if("object"==typeof d&&null!==d&&d.type===_&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case x:e:{for(var g=d.key,b=u;null!==b;){if(b.key===g){if((g=d.type)===_){if(7===b.tag){r(c,b.sibling),(u=a(b,d.props.children)).return=c,c=u;break e}}else if(b.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===A&&ya(g)===b.type){r(c,b.sibling),(u=a(b,d.props)).ref=ba(c,b,d),u.return=c,c=u;break e}r(c,b);break}t(c,b),b=b.sibling}d.type===_?((u=Mc(d.props.children,c.mode,p,d.key)).return=c,c=u):((p=Dc(d.type,d.key,d.props,null,c.mode,p)).ref=ba(c,u,d),p.return=c,c=p)}return o(c);case w:e:{for(b=d.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){r(c,u.sibling),(u=a(u,d.children||[])).return=c,c=u;break e}r(c,u);break}t(c,u),u=u.sibling}(u=Fc(d,c.mode,p)).return=c,c=u}return o(c);case A:return l(c,u,(b=d._init)(d._payload),p)}if(ne(d))return function(n,a,o,l){for(var c=null,u=null,d=a,p=a=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var b=f(n,d,o[p],l);if(null===b){null===d&&(d=g);break}e&&d&&null===b.alternate&&t(n,d),a=i(b,a,p),null===u?c=b:u.sibling=b,u=b,d=g}if(p===o.length)return r(n,d),aa&&Zs(n,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(n,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return aa&&Zs(n,p),c}for(d=s(n,d);p<o.length;p++)null!==(g=m(d,n,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(n,e)}),aa&&Zs(n,p),c}(c,u,d,p);if(M(d))return function(a,o,l,c){var u=M(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,p=o,g=o=0,b=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(b=p,p=null):b=p.sibling;var y=f(a,p,v.value,c);if(null===y){null===p&&(p=b);break}e&&p&&null===y.alternate&&t(a,p),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y,p=b}if(v.done)return r(a,p),aa&&Zs(a,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return aa&&Zs(a,g),u}for(p=s(a,p);!v.done;g++,v=l.next())null!==(v=m(p,a,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(a,e)}),aa&&Zs(a,g),u}(c,u,d,p);va(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==u&&6===u.tag?(r(c,u.sibling),(u=a(u,d)).return=c,c=u):(r(c,u),(u=$c(d,c.mode,p)).return=c,c=u),o(c)):r(c,u)}}var wa=xa(!0),_a=xa(!1),ja=Ns(null),ka=null,Na=null,Sa=null;function Ea(){Sa=Na=ka=null}function Ca(e){var t=ja.current;Ss(ja),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){ka=e,Sa=Na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===Na){if(null===ka)throw Error(n(308));Na=e,ka.dependencies={lanes:0,firstContext:e}}else Na=Na.next=e;return t}var Ra=null;function Aa(e){null===Ra?Ra=[e]:Ra.push(e)}function Ia(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Aa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $a(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Tl){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Da(e,n)}return null===(s=r.interleaved)?(t.next=t,Aa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Da(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var s=e.updateQueue;Ma=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"==typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=p.payload)?m.call(f,d,h):m))break e;d=$({},d,h);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(null!==a){if(s.callback=null,s=r,"function"!=typeof a)throw Error(n(191,a));a.call(s)}}}var qa={},Va=Ns(qa),Ka=Ns(qa),Ga=Ns(qa);function Ya(e){if(e===qa)throw Error(n(174));return e}function Ja(e,t){switch(Es(Ga,t),Es(Ka,e),Es(Va,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Va),Es(Va,t)}function Qa(){Ss(Va),Ss(Ka),Ss(Ga)}function Xa(e){Ya(Ga.current);var t=Ya(Va.current),n=ce(t,e.type);t!==n&&(Es(Ka,e),Es(Va,n))}function Za(e){Ka.current===e&&(Ss(Va),Ss(Ka))}var ei=Ns(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var si=v.ReactCurrentDispatcher,ai=v.ReactCurrentBatchConfig,ii=0,oi=null,li=null,ci=null,ui=!1,di=!1,hi=0,fi=0;function mi(){throw Error(n(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function gi(e,t,r,s,a,i){if(ii=i,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Zi:eo,e=r(s,a),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(n(301));i+=1,ci=li=null,t.updateQueue=null,si.current=to,e=r(s,a)}while(di)}if(si.current=Xi,t=null!==li&&null!==li.next,ii=0,ci=li=oi=null,ui=!1,t)throw Error(n(300));return e}function bi(){var e=0!==hi;return hi=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?oi.memoizedState=ci=e:ci=ci.next=e,ci}function yi(){if(null===li){var e=oi.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?oi.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(n(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?oi.memoizedState=ci=e:ci=ci.next=e}return ci}function xi(e,t){return"function"==typeof t?t(e):t}function wi(e){var t=yi(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var s=li,a=s.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,oi.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=s:c.next=l,lr(s,t.memoizedState)||(xo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,oi.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _i(e){var t=yi(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);lr(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function ji(){}function ki(e,t){var r=oi,s=yi(),a=t(),i=!lr(s.memoizedState,a);if(i&&(s.memoizedState=a,xo=!0),s=s.queue,Mi(Ei.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(r.flags|=2048,Oi(9,Si.bind(null,r,s,a,t),void 0,null),null===Pl)throw Error(n(349));30&ii||Ni(r,t,a)}return a}function Ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&Ti(e)}function Ei(e,t,n){return n(function(){Ci(t)&&Ti(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ti(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=vi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,oi,e),[t.memoizedState,e]}function Oi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return yi().memoizedState}function Ai(e,t,n,r){var s=vi();oi.flags|=e,s.memoizedState=Oi(1|t,n,void 0,void 0===r?null:r)}function Ii(e,t,n,r){var s=yi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&pi(r,i.deps))return void(s.memoizedState=Oi(t,n,a,r))}oi.flags|=e,s.memoizedState=Oi(1|t,n,a,r)}function Di(e,t){return Ai(8390656,8,e,t)}function Mi(e,t){return Ii(2048,8,e,t)}function Li(e,t){return Ii(4,2,e,t)}function $i(e,t){return Ii(4,4,e,t)}function Fi(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!=n?n.concat([e]):null,Ii(4,4,Fi.bind(null,t,e),n)}function Ui(){}function Bi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 21&ii?(lr(n,t)||(n=gt(),oi.lanes|=n,Ll|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n)}function qi(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{xt=n,ai.transition=r}}function Vi(){return yi().memoizedState}function Ki(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),Qi(n,t,r)}}function Gi(e,t,n){var r=nc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,lr(o,i)){var l=t.interleaved;return null===l?(s.next=s,Aa(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ia(e,t,s,r))&&(rc(n,e,r,s=tc()),Qi(n,t,r))}}function Yi(e){var t=e.alternate;return e===oi||null!==t&&t===oi}function Ji(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xi={readContext:Oa,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Zi={readContext:Oa,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ai(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=qi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=oi,a=vi();if(aa){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Pl)throw Error(n(349));30&ii||Ni(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Di(Ei.bind(null,s,i,e),[e]),s.flags|=2048,Oi(9,Si.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=vi(),t=Pl.identifierPrefix;if(aa){var n=Xs;t=":"+t+"R"+(n=(Qs&~(1<<32-ot(Qs)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Oa,useCallback:Bi,useContext:Oa,useEffect:Mi,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:$i,useMemo:Wi,useReducer:wi,useRef:Ri,useState:function(){return wi(xi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(yi(),li.memoizedState,e)},useTransition:function(){return[wi(xi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Vi,unstable_isNewReconciler:!1},to={readContext:Oa,useCallback:Bi,useContext:Oa,useEffect:Mi,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:$i,useMemo:Wi,useReducer:_i,useRef:Ri,useState:function(){return _i(xi)},useDebugValue:Ui,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[_i(xi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Vi,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),a=Fa(r,s);a.payload=t,null!=n&&(a.callback=n),null!==(t=za(e,a,s))&&(rc(t,e,s,r),Ua(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),a=Fa(r,s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=za(e,a,s))&&(rc(t,e,s,r),Ua(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),s=Fa(n,r);s.tag=2,null!=t&&(s.callback=t),null!==(t=za(e,s,r))&&(rc(t,e,r,n),Ua(t,e,r))}};function ao(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(s,a))}function io(e,t,n){var r=!1,s=Cs,a=t.contextType;return"object"==typeof a&&null!==a?a=Oa(a):(s=As(t)?Os:Ts.current,a=(r=null!=(r=t.contextTypes))?Rs(e,s):Cs),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},La(e);var a=t.contextType;"object"==typeof a&&null!==a?s.context=Oa(a):(a=As(t)?Os:Ts.current,s.context=Rs(e,a)),s.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),Wa(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"==typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Vl=r),ho(0,t)},n}function po(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ho(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!=typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function bo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e)}var yo=v.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?_a(t,null,n,r):wa(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var a=t.ref;return Pa(t,s),r=gi(e,t,n,r,a,s),n=bi(),null===e||xo?(aa&&n&&ta(t),t.flags|=1,wo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function jo(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)return qo(e,t,s)}return t.flags|=1,(e=Ic(a,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,qo(e,t,s);131072&e.flags&&(xo=!0)}}return Eo(e,t,n,r,s)}function No(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Il,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Es(Il,Al),Al|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Il,Al),Al|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Es(Il,Al),Al|=r;return wo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,s){var a=As(n)?Os:Ts.current;return a=Rs(t,a),Pa(t,s),n=gi(e,t,n,r,a,s),r=bi(),null===e||xo?(aa&&r&&ta(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function Co(e,t,n,r,s){if(As(n)){var a=!0;Ls(t)}else a=!1;if(Pa(t,s),null===t.stateNode)Ho(e,t),io(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=Oa(c):c=Rs(t,c=As(n)?Os:Ts.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,i,r,c),Ma=!1;var h=t.memoizedState;i.state=h,Wa(t,r,i,s),l=t.memoizedState,o!==r||h!==l||Ps.current||Ma?("function"==typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ma||ao(t,n,o,r,h,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,$a(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=Oa(l):l=Rs(t,l=As(n)?Os:Ts.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,i,r,l),Ma=!1,h=t.memoizedState,i.state=h,Wa(t,r,i,s);var m=t.memoizedState;o!==d||h!==m||Ps.current||Ma?("function"==typeof f&&(ro(t,n,f,r),m=t.memoizedState),(c=Ma||ao(t,n,c,r,h,m,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,a,s)}function To(e,t,n,r,s,a){So(e,t);var i=!!(128&t.flags);if(!r&&!i)return s&&$s(t,n,!1),qo(e,t,a);r=t.stateNode,yo.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,o,a)):wo(e,t,o,a),t.memoizedState=r.state,s&&$s(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Ja(e,t.containerInfo)}function Oo(e,t,n,r,s){return ma(),pa(s),t.flags|=256,wo(e,t,n,r),t.child}var Ro,Ao,Io,Do,Mo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function $o(e,t,r){var s,a=t.pendingProps,i=ei.current,o=!1,l=!!(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&!!(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Es(ei,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},1&a||null===o?o=Lc(l,a,0,null):(o.childLanes=0,o.pendingProps=l),e=Mc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(r),t.memoizedState=Mo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,r,s,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,s=uo(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Lc({mode:"visible",children:s.children},a,0,null),(i=Mc(i,a,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,1&t.mode&&wa(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Mo,i);if(!(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(s=a.nextSibling&&a.nextSibling.dataset)var l=s.dgst;return s=l,zo(e,t,o,s=uo(i=Error(n(419)),s,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(s=Pl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(s.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Da(e,a),rc(s,e,a,-1))}return gc(),zo(e,t,o,s=uo(Error(n(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sa=us(a.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Gs[Ys++]=Qs,Gs[Ys++]=Xs,Gs[Ys++]=Js,Qs=e.id,Xs=e.overflow,Js=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,a,s,i,r);if(o){o=a.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 1&l||t.child===i?(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null),null!==s?o=Ic(s,o):(o=Mc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Mo,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&pa(r),wa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Bo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Wo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(wo(e,t,r.children,n),2&(r=ei.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es(ei,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ti(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ho(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Ic(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ic(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vo(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,r){var a=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return As(t.type)&&Is(),Ko(t),null;case 3:return a=t.stateNode,Qa(),Ss(Ps),Ss(Ts),ri(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ia&&(oc(ia),ia=null))),Ao(e,t),Ko(t),null;case 5:Za(t);var i=Ya(Ga.current);if(r=t.type,null!==e&&null!=t.stateNode)Io(e,t,r,a,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(n(166));return Ko(t),null}if(e=Ya(Va.current),ha(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[fs]=t,a[ms]=o,e=!!(1&t.mode),r){case"dialog":zr("cancel",a),zr("close",a);break;case"iframe":case"object":case"embed":zr("load",a);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],a);break;case"source":zr("error",a);break;case"img":case"image":case"link":zr("error",a),zr("load",a);break;case"details":zr("toggle",a);break;case"input":Q(a,o),zr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},zr("invalid",a);break;case"textarea":ae(a,o),zr("invalid",a)}for(var l in ye(r,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(a.textContent,c,e),i=["children",c]):"number"==typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(a.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",a)}switch(r){case"input":K(a),ee(a,o,!0);break;case"textarea":K(a),oe(a);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(a.onclick=es)}a=i,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),"select"===r&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[fs]=t,e[ms]=a,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(r,a),r){case"dialog":zr("cancel",e),zr("close",e),i=a;break;case"iframe":case"object":case"embed":zr("load",e),i=a;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=a;break;case"source":zr("error",e),i=a;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=a;break;case"details":zr("toggle",e),i=a;break;case"input":Q(e,a),i=J(e,a),zr("invalid",e);break;case"option":default:i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=$({},a,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,a),i=se(e,a),zr("invalid",e)}for(o in ye(r,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?be(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&b(e,o,u,l))}switch(r){case"input":K(e),ee(e,a,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+q(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?re(e,!!a.multiple,o,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=es)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,a);else{if("string"!=typeof a&&null===t.stateNode)throw Error(n(166));if(r=Ya(Ga.current),Ya(Va.current),ha(t)){if(a=t.stateNode,r=t.memoizedProps,a[fs]=t,(o=a.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Zr(a.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(a.nodeValue,r,!!(1&e.mode))}o&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[fs]=t,t.stateNode=a}return Ko(t),null;case 13:if(Ss(ei),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==sa&&1&t.mode&&!(128&t.flags))fa(),ma(),t.flags|=98560,o=!1;else if(o=ha(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(n(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(n(317));o[fs]=t}else ma(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),o=!1}else null!==ia&&(oc(ia),ia=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Qa(),Ao(e,t),null===e&&Wr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ca(t.type._context),Ko(t),null;case 19:if(Ss(ei),null===(o=t.memoizedState))return Ko(t),null;if(a=!!(128&t.flags),null===(l=o.rendering))if(a)Vo(o,!1);else{if(0!==Dl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Vo(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Es(ei,1&ei.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Wl&&(t.flags|=128,a=!0,Vo(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ti(l))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vo(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!aa)return Ko(t),null}else 2*Xe()-o.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,a=!0,Vo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=ei.current,Es(ei,a?1&r|2:1&r),t):(Ko(t),null);case 22:case 23:return hc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&1&t.mode?!!(1073741824&Al)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Yo(e,t){switch(na(t),t.tag){case 1:return As(t.type)&&Is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),Ss(Ps),Ss(Ts),ri(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Ss(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(ei),null;case 4:return Qa(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Io=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ya(Va.current);var i,o=null;switch(n){case"input":a=J(e,a),r=J(e,r),o=[];break;case"select":a=$({},a,{value:void 0}),r=$({},r,{value:void 0}),o=[];break;case"textarea":a=se(e,a),r=se(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=es)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Qo=!1,Xo="function"==typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&tl(t,n,a)}s=s.next}while(s!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fs],delete t[ms],delete t[gs],delete t[bs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=es));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||el(n,t);case 6:var r=dl,s=hl;dl=null,fl(e,t,n),hl=s,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),Wt(e)):cs(dl,n.stateNode));break;case 4:r=dl,s=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&tl(n,t,i),s=s.next}while(s!==r)}fl(e,t,n);break;case 1:if(!Qo&&(el(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,fl(e,t,n),Qo=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(n(160));ml(i,o,a),dl=null,hl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Nc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&s){try{rl(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&s&&null!==r&&el(r,r.return);break;case 5:if(gl(t,e),vl(e),512&s&&null!==r&&el(r,r.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Nc(e,e.return,g)}}if(4&s&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),xe(l,o);var u=xe(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?be(a,h):"dangerouslySetInnerHTML"===d?he(a,h):"children"===d?fe(a,h):b(a,d,h,u)}switch(l){case"input":Z(a,i);break;case"textarea":ie(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?re(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ms]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(n(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Xe())),4&s&&pl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(u=Qo)||d,gl(t,e),Qo=u):gl(t,e),vl(e),8192&s){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(m=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var p=f.stateNode;if("function"==typeof p.componentWillUnmount){s=f,r=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Nc(s,r,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==m?(m.return=f,Zo=m):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"==typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&s&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var s=r;break e}r=r.return}throw Error(n(160))}switch(s.tag){case 5:var a=s.stateNode;32&s.flags&&(fe(a,""),s.flags&=-33),ul(e,ll(e),a);break;case 3:case 4:var i=s.stateNode.containerInfo;cl(e,ll(e),i);break;default:throw Error(n(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,xl(e)}function xl(e,t,n){for(var r=!!(1&e.mode);null!==Zo;){var s=Zo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Jo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Jo;var c=Qo;if(Jo=i,(Qo=l)&&!c)for(Zo=s;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?jl(s):null!==l?(l.return=i,Zo=l):jl(s);for(;null!==a;)Zo=a,xl(a),a=a.sibling;Zo=s,Jo=o,Qo=c}wl(e)}else 8772&s.subtreeFlags&&null!==a?(a.return=s,Zo=a):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Qo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===r)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:no(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ha(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ha(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(n(163))}Qo||512&t.flags&&al(t)}catch(f){Nc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Zo=r;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function jl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Nc(t,s,l)}}var a=t.return;try{al(t)}catch(l){Nc(t,a,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var kl,Nl=Math.ceil,Sl=v.ReactCurrentDispatcher,El=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,Tl=0,Pl=null,Ol=null,Rl=0,Al=0,Il=Ns(0),Dl=0,Ml=null,Ll=0,$l=0,Fl=0,zl=null,Ul=null,Bl=0,Wl=1/0,Hl=null,ql=!1,Vl=null,Kl=null,Gl=!1,Yl=null,Jl=0,Ql=0,Xl=null,Zl=-1,ec=0;function tc(){return 6&Tl?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 1&e.mode?2&Tl&&0!==Rl?Rl&-Rl:null!==ga.transition?(0===ec&&(ec=gt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type):1}function rc(e,t,r,s){if(50<Ql)throw Ql=0,Xl=null,Error(n(185));vt(e,r,s),2&Tl&&e===Pl||(e===Pl&&(!(2&Tl)&&($l|=r),4===Dl&&lc(e,Rl)),sc(e,s),1===r&&0===Tl&&!(1&t.mode)&&(Wl=Xe()+500,zs&&Ws()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ot(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ft(e,e===Pl?Rl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){zs=!0,Bs(e)}(cc.bind(null,e)):Bs(cc.bind(null,e)),os(function(){!(6&Tl)&&Ws()}),n=null;else{switch(wt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=st}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,ec=0,6&Tl)throw Error(n(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var s=ft(e,e===Pl?Rl:0);if(0===s)return null;if(30&s||0!==(s&e.expiredLanes)||t)t=bc(e,s);else{t=s;var a=Tl;Tl|=2;var i=pc();for(Pl===e&&Rl===t||(Hl=null,Wl=Xe()+500,fc(e,t));;)try{yc();break}catch(l){mc(e,l)}Ea(),Sl.current=i,Tl=a,null!==Ol?t=0:(Pl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(s=a,t=ic(e,a))),1===t)throw r=Ml,fc(e,0),lc(e,s),sc(e,Xe()),r;if(6===t)lc(e,s);else{if(a=e.current.alternate,!(30&s||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!lr(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=bc(e,s),2===t&&(i=pt(e),0!==i&&(s=i,t=ic(e,i))),1!==t)))throw r=Ml,fc(e,0),lc(e,s),sc(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(n(345));case 2:case 5:_c(e,Ul,Hl);break;case 3:if(lc(e,s),(130023424&s)===s&&10<(t=Bl+500-Xe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&s)!==s){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ss(_c.bind(null,e,Ul,Hl),t);break}_c(e,Ul,Hl);break;case 4:if(lc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-ot(s);i=1<<o,(o=t[o])>a&&(a=o),s&=~i}if(s=a,10<(s=(120>(s=Xe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=ss(_c.bind(null,e,Ul,Hl),s);break}_c(e,Ul,Hl);break;default:throw Error(n(329))}}}return sc(e,Xe()),e.callbackNode===r?ac.bind(null,e):null}function ic(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Fl,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(6&Tl)throw Error(n(327));jc();var t=ft(e,0);if(!(1&t))return sc(e,Xe()),null;var r=bc(e,t);if(0!==e.tag&&2===r){var s=pt(e);0!==s&&(t=s,r=ic(e,s))}if(1===r)throw r=Ml,fc(e,0),lc(e,t),sc(e,Xe()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Hl),sc(e,Xe()),null}function uc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Wl=Xe()+500,zs&&Ws())}}function dc(e){null!==Yl&&0===Yl.tag&&!(6&Tl)&&jc();var t=Tl;Tl|=1;var n=Cl.transition,r=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=r,Cl.transition=n,!(6&(Tl=t))&&Ws()}}function hc(){Al=Il.current,Ss(Il)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,as(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Is();break;case 3:Qa(),Ss(Ps),Ss(Ts),ri();break;case 5:Za(r);break;case 4:Qa();break;case 13:case 19:Ss(ei);break;case 10:Ca(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Ol=e=Ic(e.current,null),Rl=Al=t,Dl=0,Ml=null,Fl=$l=Ll=0,Ul=zl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Ra=null}return e}function mc(e,t){for(;;){var r=Ol;try{if(Ea(),si.current=Xi,ui){for(var s=oi.memoizedState;null!==s;){var a=s.queue;null!==a&&(a.pending=null),s=s.next}ui=!1}if(ii=0,ci=li=oi=null,di=!1,hi=0,El.current=null,null===r||null===r.return){Dl=1,Ml=t,Ol=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=bo(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&go(i,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(!(1&t)){go(i,u,t),gc();break e}c=Error(n(426))}else if(aa&&1&l.mode){var b=bo(o);if(null!==b){!(65536&b.flags)&&(b.flags|=256),vo(b,o,l,0,t),pa(co(c,l));break e}}i=c=co(c,l),4!==Dl&&(Dl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,y=i.stateNode;if(!(128&i.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Kl&&Kl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(i,l,t));break e}}i=i.return}while(null!==i)}wc(r)}catch(x){t=x,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Xi,null===e?Xi:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||!(268435455&Ll)&&!(268435455&$l)||lc(Pl,Rl)}function bc(e,t){var r=Tl;Tl|=2;var s=pc();for(Pl===e&&Rl===t||(Hl=null,fc(e,t));;)try{vc();break}catch(a){mc(e,a)}if(Ea(),Tl=r,Sl.current=s,null!==Ol)throw Error(n(261));return Pl=null,Rl=0,Dl}function vc(){for(;null!==Ol;)xc(Ol)}function yc(){for(;null!==Ol&&!Je();)xc(Ol)}function xc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?wc(e):Ol=t,El.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Dl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Go(n,t,Al)))return void(Ol=n);if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,r){var s=xt,a=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,r,s){do{jc()}while(null!==Yl);if(6&Tl)throw Error(n(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===Pl&&(Ol=Pl=null,Rl=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Gl||(Gl=!0,Pc(nt,function(){return jc(),null})),i=!!(15990&r.flags),!!(15990&r.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=xt;xt=1;var l=Tl;Tl|=4,El.current=null,function(e,t){if(ts=qt,mr(e=fr())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===s&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ns={focusedElem:e,selectionRange:r},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,1028&t.subtreeFlags&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,b=p.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(n(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}p=nl,nl=!1}(e,r),bl(r,e),pr(ns),qt=!!ts,ns=ts=null,e.current=r,yl(r),Qe(),Tl=l,xt=o,Cl.transition=i}else e.current=r;if(Gl&&(Gl=!1,Yl=e,Jl=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),sc(e,Xe()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ql)throw ql=!1,e=Vl,Vl=null,e;!!(1&Jl)&&0!==e.tag&&jc(),i=e.pendingLanes,1&i?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Ws()}(e,t,r,s)}finally{Cl.transition=a,xt=s}return null}function jc(){if(null!==Yl){var e=wt(Jl),t=Cl.transition,r=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===Yl)var s=!1;else{if(e=Yl,Yl=null,Jl=0,6&Tl)throw Error(n(331));var a=Tl;for(Tl|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(16&Zo.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,m=d.return;if(il(d),d===u){Zo=null;break}if(null!==f){f.return=m,Zo=f;break}Zo=m}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(null!==g)}}Zo=i}}if(2064&i.subtreeFlags&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(2048&(i=Zo).flags)switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Zo=v;break e}Zo=i.return}}var y=e.current;for(Zo=y;null!==Zo;){var x=(o=Zo).child;if(2064&o.subtreeFlags&&null!==x)x.return=o,Zo=x;else e:for(o=y;null!==Zo;){if(2048&(l=Zo).flags)try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(_){Nc(l,l.return,_)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Tl=a,Ws(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(_){}s=!0}return s}finally{xt=r,Cl.transition=t}}return!1}function kc(e,t,n){e=za(e,t=mo(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=za(t,e=po(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Xe()-Bl?fc(e,0):Fl|=n),sc(e,t)}function Ec(e,t){0===t&&(1&e.mode?(t=dt,!(130023424&(dt<<=1))&&(dt=4194304)):t=1);var n=tc();null!==(e=Da(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Tc(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(n(314))}null!==s&&s.delete(t),Ec(e,r)}function Pc(e,t){return Ge(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Oc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,r,s,a,i){var o=2;if(s=e,"function"==typeof e)Ac(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case _:return Mc(r.children,a,i,t);case j:o=8,a|=8;break;case N:return(e=Rc(12,r,t,2|a)).elementType=N,e.lanes=i,e;case P:return(e=Rc(13,r,t,a)).elementType=P,e.lanes=i,e;case O:return(e=Rc(19,r,t,a)).elementType=O,e.lanes=i,e;case I:return Lc(r,a,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case T:o=11;break e;case R:o=14;break e;case A:o=16,s=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Rc(o,r,t,a)).elementType=e,t.type=s,t.lanes=i,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function $c(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bt(0),this.expirationTimes=bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,a,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Cs;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(As(r))return Ms(e,r,t)}return t}function Wc(e,t,n,r,s,a,i,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Fa(r=tc(),s=nc(n))).callback=null!=t?t:null,za(n,a,s),e.current.lanes=s,vt(e,s,r),sc(e,r),e}function Hc(e,t,n,r){var s=t.current,a=tc(),i=nc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(s,t,i))&&(rc(e,s,i,a),Ua(e,s,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ps.current)xo=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ma();break;case 5:Xa(t);break;case 1:As(t.type)&&Ls(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(ja,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(Es(ei,1&ei.current),null!==(e=qo(e,t,n))?e.sibling:null);Es(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return qo(e,t,n)}(e,t,r);xo=!!(131072&e.flags)}else xo=!1,aa&&1048576&t.flags&&ea(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ho(e,t),e=t.pendingProps;var a=Rs(t,Ts.current);Pa(t,r),a=gi(null,t,s,e,a,r);var i=bi();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(s)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,La(t),a.updater=so,t.stateNode=a,a._reactInternals=t,lo(t,s,e,r),t=To(null,t,s,!0,i,r)):(t.tag=0,aa&&i&&ta(t),wo(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,s=(a=s._init)(s._payload),t.type=s,a=t.tag=function(e){if("function"==typeof e)return Ac(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(s),e=no(s,e),a){case 0:t=Eo(null,t,s,e,r);break e;case 1:t=Co(null,t,s,e,r);break e;case 11:t=_o(null,t,s,e,r);break e;case 14:t=jo(null,t,s,no(s.type,e),r);break e}throw Error(n(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,Eo(e,t,s,a=t.elementType===s?a:no(s,a),r);case 1:return s=t.type,a=t.pendingProps,Co(e,t,s,a=t.elementType===s?a:no(s,a),r);case 3:e:{if(Po(t),null===e)throw Error(n(387));s=t.pendingProps,a=(i=t.memoizedState).element,$a(e,t),Wa(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Oo(e,t,s,r,a=co(Error(n(423)),t));break e}if(s!==a){t=Oo(e,t,s,r,a=co(Error(n(424)),t));break e}for(sa=us(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,r=_a(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),s===a){t=qo(e,t,r);break e}wo(e,t,s,r)}t=t.child}return t;case 5:return Xa(t),null===e&&ua(t),s=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,rs(s,a)?o=null:null!==i&&rs(s,i)&&(t.flags|=32),So(e,t),wo(e,t,o,r),t.child;case 6:return null===e&&ua(t),null;case 13:return $o(e,t,r);case 4:return Ja(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=wa(t,null,s,r):wo(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,_o(e,t,s,a=t.elementType===s?a:no(s,a),r);case 7:return wo(e,t,t.pendingProps,r),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Es(ja,s._currentValue),s._currentValue=o,null!==i)if(lr(i.value,o)){if(i.children===a.children&&!Ps.current){t=qo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Fa(-1,r&-r)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ta(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(n(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ta(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Pa(t,r),s=s(a=Oa(a)),t.flags|=1,wo(e,t,s,r),t.child;case 14:return a=no(s=t.type,t.pendingProps),jo(e,t,s,a=no(s.type,a),r);case 15:return ko(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:no(s,a),Ho(e,t),t.tag=1,As(s)?(e=!0,Ls(t)):e=!1,Pa(t,r),io(t,s,a),lo(t,s,a,r),To(null,t,s,!0,e,r);case 19:return Wo(e,t,r);case 22:return No(e,t,r)}throw Error(n(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof s){var o=s;s=function(){var e=qc(i);o.call(e)}}Hc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"==typeof r){var a=r;r=function(){var e=qc(i);a.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[ps]=i.current,Wr(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ps]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,n,r)}),l}(n,t,e,s,r);return qc(i)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Hc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[ps]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&$t(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Xe()),!(6&Tl)&&(Wl=Xe()+500,Ws()))}break;case 13:dc(function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},jt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Nt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},je=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=_s(s);if(!a)throw Error(n(90));G(s),Z(s,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=uc,Pe=dc;var tu={usingClientEntryPoint:!1,Events:[xs,ws,_s,Ee,Ce,uc]},nu={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{at=su.inject(ru),it=su}catch(de){}}return k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,k.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},k.createRoot=function(e,t){if(!Qc(e))throw Error(n(299));var r=!1,s="",a=Gc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,s,a),e[ps]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},k.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},k.flushSync=function(e){return dc(e)},k.hydrate=function(e,t,r){if(!Xc(t))throw Error(n(200));return eu(null,e,t,!0,r)},k.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(n(405));var s=null!=r&&r.hydratedSources||null,a=!1,i="",o=Gc;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,a,0,i,o),e[ps]=t.current,Wr(e),s)for(e=0;e<s.length;e++)a=(a=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},k.render=function(e,t,r){if(!Xc(t))throw Error(n(200));return eu(null,e,t,!1,r)},k.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},k.unstable_batchedUpdates=uc,k.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Xc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return eu(e,t,r,!1,s)},k.version="18.3.1-next-f1338f8080-20240426",k}function T(){if(x)return j.exports;return x=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),j.exports=C(),j.exports}const P=t(function(){if(w)return _;w=1;var e=T();return _.createRoot=e.createRoot,_.hydrateRoot=e.hydrateRoot,_}()),O={},R=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in O)return;O[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};
/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var A="popstate";function I(e={}){return function(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=u();null==c&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function h(e,t){o="PUSH";let n=$(p.location,e,t);c=u()+1;let r=L(n,c),d=p.createHref(n);try{i.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}a&&l&&l({action:o,location:p.location,delta:1})}function f(e,t){o="REPLACE";let n=$(p.location,e,t);c=u();let r=L(n,c),s=p.createHref(n);i.replaceState(r,"",s),a&&l&&l({action:o,location:p.location,delta:0})}function m(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);D(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:F(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let p={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(A,d),l=e,()=>{s.removeEventListener(A,d),l=null}},createHref:e=>t(s,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>i.go(e)};return p}(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return $("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:F(t)},0,e)}function D(e,t){if(!1===e||null==e)throw new Error(t)}function M(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function L(e,t){return{usr:e.state,key:e.key,idx:t}}function $(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?z(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function F({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function z(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function U(e,t,n="/"){return function(e,t,n,r){let s="string"==typeof t?z(t):t,a=te(s.pathname||"/",n);if(null==a)return null;let i=B(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=ee(a);o=X(i[l],e,r)}return o}(e,t,n,!1)}function B(e,t=[],n=[],r="",s=!1){let a=(e,a,i=s,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;D(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=ae([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(D(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),B(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:Q(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of W(e.path))a(e,t,!0,n);else a(e,t)}),t}function W(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=W(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var H=/^:[\w-]+$/,q=3,V=2,K=1,G=10,Y=-2,J=e=>"*"===e;function Q(e,t){let n=e.split("/"),r=n.length;return n.some(J)&&(r+=Y),t&&(r+=V),n.filter(e=>!J(e)).reduce((e,t)=>e+(H.test(t)?q:""===t?K:G),r)}function X(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=Z({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=Z({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:ae([a,u.pathname]),pathnameBase:ie(ae([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=ae([a,u.pathnameBase]))}return i}function Z(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){M("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[r];return e[t]=n&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function ee(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return M(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function te(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ne(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function re(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function se(e,t,n,r=!1){let s;"string"==typeof e?s=z(e):(s={...e},D(!s.pathname||!s.pathname.includes("?"),ne("?","pathname","search",s)),D(!s.pathname||!s.pathname.includes("#"),ne("#","pathname","hash",s)),D(!s.search||!s.search.includes("#"),ne("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:s=""}="string"==typeof e?z(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:oe(r),hash:le(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ae=e=>e.join("/").replace(/\/\/+/g,"/"),ie=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oe=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",le=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ce=["POST","PUT","PATCH","DELETE"];new Set(ce);var ue=["GET",...ce];new Set(ue);var de=m.createContext(null);de.displayName="DataRouter";var he=m.createContext(null);he.displayName="DataRouterState",m.createContext(!1);var fe=m.createContext({isTransitioning:!1});fe.displayName="ViewTransition",m.createContext(new Map).displayName="Fetchers",m.createContext(null).displayName="Await";var me=m.createContext(null);me.displayName="Navigation";var pe=m.createContext(null);pe.displayName="Location";var ge=m.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var be=m.createContext(null);function ve(){return null!=m.useContext(pe)}function ye(){return D(ve(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(pe).location}be.displayName="RouteError";var xe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function we(e){m.useContext(me).static||m.useLayoutEffect(e)}function _e(){let{isDataRoute:e}=m.useContext(ge);return e?function(){let{router:e}=function(e){let t=m.useContext(de);return D(t,Te(e)),t}("useNavigate"),t=Pe("useNavigate"),n=m.useRef(!1);we(()=>{n.current=!0});let r=m.useCallback(async(r,s={})=>{M(n.current,xe),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...s}))},[e,t]);return r}():function(){D(ve(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(de),{basename:t,navigator:n}=m.useContext(me),{matches:r}=m.useContext(ge),{pathname:s}=ye(),a=JSON.stringify(re(r)),i=m.useRef(!1);we(()=>{i.current=!0});let o=m.useCallback((r,o={})=>{if(M(i.current,xe),!i.current)return;if("number"==typeof r)return void n.go(r);let l=se(r,JSON.parse(a),s,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ae([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,a,s,e]);return o}()}function je(e,{relative:t}={}){let{matches:n}=m.useContext(ge),{pathname:r}=ye(),s=JSON.stringify(re(n));return m.useMemo(()=>se(e,JSON.parse(s),r,"path"===t),[e,s,r,t])}function ke(e,t,n,r,s){D(ve(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=m.useContext(me),{matches:i}=m.useContext(ge),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let e=d&&d.path||"";Re(c,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,f=ye();if(t){let e="string"==typeof t?z(t):t;D("/"===u||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=f;let p=h.pathname||"/",g=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=U(e,{pathname:g});M(d||null!=b,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),M(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,a=n?.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);D(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,o=-1;if(n)for(let l=0;l<s.length;l++){let e=s[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=l),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){i=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((e,l,c)=>{let u,d=!1,h=null,f=null;n&&(u=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||Se,i&&(o<0&&0===c?(Re("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(s.slice(0,c+1)),g=()=>{let t;return t=u?h:d?f:l.route.Component?m.createElement(l.route.Component,null):l.route.element?l.route.element:e,m.createElement(Ce,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?m.createElement(Ee,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:r}):g()},null)}(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ae([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:ae([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,n,r,s);return t&&v?m.createElement(pe.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},v):v}function Ne(){let e=function(){let e=m.useContext(be),t=function(e){let t=m.useContext(he);return D(t,Te(e)),t}("useRouteError"),n=Pe("useRouteError");if(void 0!==e)return e;return t.errors?.[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:a},"ErrorBoundary")," or"," ",m.createElement("code",{style:a},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:s},n):null,i)}m.createContext(null);var Se=m.createElement(Ne,null),Ee=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?m.createElement(ge.Provider,{value:this.props.routeContext},m.createElement(be.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ce({routeContext:e,match:t,children:n}){let r=m.useContext(de);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(ge.Provider,{value:e},n)}function Te(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pe(e){let t=function(e){let t=m.useContext(ge);return D(t,Te(e)),t}(e),n=t.matches[t.matches.length-1];return D(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Oe={};function Re(e,t,n){t||Oe[e]||(Oe[e]=!0,M(!1,n))}function Ae({to:e,replace:t,state:n,relative:r}){D(ve(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=m.useContext(me);M(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=m.useContext(ge),{pathname:i}=ye(),o=_e(),l=se(e,re(a),i,"path"===r),c=JSON.stringify(l);return m.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function Ie(e){D(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function De({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){D(!ve(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=m.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);"string"==typeof n&&(n=z(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=m.useMemo(()=>{let e=te(l,i);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:h},navigationType:r}},[i,l,c,u,d,h,r]);return M(null!=f,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:m.createElement(me.Provider,{value:o},m.createElement(pe.Provider,{children:t,value:f}))}function Me({children:e,location:t}){return ke(Le(e),t)}function Le(e,t=[]){let n=[];return m.Children.forEach(e,(e,r)=>{if(!m.isValidElement(e))return;let s=[...t,r];if(e.type===m.Fragment)return void n.push.apply(n,Le(e.props.children,s));D(e.type===Ie,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),D(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Le(e.props.children,s)),n.push(a)}),n}m.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return ke(e,void 0,n,r,t)});var $e="get",Fe="application/x-www-form-urlencoded";function ze(e){return null!=e&&"string"==typeof e.tagName}var Ue=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||Be.has(e)?e:(M(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fe}"`),null)}function He(e,t){let n,r,s,a,i;if(ze(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?te(i,t):null,n=e.getAttribute("method")||$e,s=We(e.getAttribute("enctype"))||Fe,a=new FormData(e)}else if(function(e){return ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?te(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||$e,s=We(e.getAttribute("formenctype"))||We(i.getAttribute("enctype"))||Fe,a=new FormData(i,e),!function(){if(null===Ue)try{new FormData(document.createElement("form"),0),Ue=!1}catch(e){Ue=!0}return Ue}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$e,r=null,s=Fe,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}function qe(e,t){if(!1===e||null==e)throw new Error(t)}function Ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Ke(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ve).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Ge(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function Ye(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function Je(){let e=m.useContext(de);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qe=m.createContext(void 0);function Xe(){let e=m.useContext(Qe);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function Ze(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function et({page:e,...t}){let{router:n}=Je(),r=m.useMemo(()=>U(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?m.createElement(tt,{page:e,matches:r,...t}):null}function tt({page:e,matches:t,...n}){let r=ye(),{manifest:s,routeModules:a}=Xe(),{basename:i}=Je(),{loaderData:o,matches:l}=function(){let e=m.useContext(he);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=m.useMemo(()=>Ge(e,t,l,s,r,"data"),[e,t,l,s,r]),u=m.useMemo(()=>Ge(e,t,l,s,r,"assets"),[e,t,l,s,r]),d=m.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{let t=s.routes[e.route.id];t&&t.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===te(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,i,"data");return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[i,o,r,s,c,t,e,a]),h=m.useMemo(()=>Ye(u,s),[u,s]),f=function(e){let{manifest:t,routeModules:n}=Xe(),[r,s]=m.useState([]);return m.useEffect(()=>{let r=!1;return Ke(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),r}(u);return m.createElement(m.Fragment,null,d.map(e=>m.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>m.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>m.createElement("link",{key:e,nonce:n.nonce,...t})))}function nt(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Qe.displayName="FrameworkContext";var rt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{rt&&(window.__reactRouterVersion="7.9.4")}catch(ob){}function st({basename:e,children:t,window:n}){let r=m.useRef();null==r.current&&(r.current=I({window:n,v5Compat:!0}));let s=r.current,[a,i]=m.useState({action:s.action,location:s.location}),o=m.useCallback(e=>{m.startTransition(()=>i(e))},[i]);return m.useLayoutEffect(()=>s.listen(o),[s,o]),m.createElement(De,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var at=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=m.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:i,target:o,to:l,preventScrollReset:c,viewTransition:u,...d},h){let f,{basename:p}=m.useContext(me),g="string"==typeof l&&at.test(l),b=!1;if("string"==typeof l&&g&&(f=l,rt))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=te(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:b=!0}catch(ob){M(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e,{relative:t}={}){D(ve(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=m.useContext(me),{hash:s,pathname:a,search:i}=je(e,{relative:t}),o=a;return"/"!==n&&(o="/"===a?n:ae([n,a])),r.createHref({pathname:o,search:i,hash:s})}(l,{relative:r}),[y,x,w]=function(e,t){let n=m.useContext(Qe),[r,s]=m.useState(!1),[a,i]=m.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=m.useRef(null);m.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),m.useEffect(()=>{if(r){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{s(!0)},p=()=>{s(!1),i(!1)};return n?"intent"!==e?[a,h,{}]:[a,h,{onFocus:Ze(o,f),onBlur:Ze(l,p),onMouseEnter:Ze(c,f),onMouseLeave:Ze(u,p),onTouchStart:Ze(d,f)}]:[!1,h,{}]}(n,d),_=function(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=_e(),l=ye(),c=je(e,{relative:a});return m.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:F(l)===F(c);o(e,{replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,c,n,r,t,e,s,a,i])}(l,{replace:a,state:i,target:o,preventScrollReset:c,relative:r,viewTransition:u});let j=m.createElement("a",{...d,...w,href:f||v,onClick:b||s?e:function(t){e&&e(t),t.defaultPrevented||_(t)},ref:nt(h,x),target:o,"data-discover":g||"render"!==t?void 0:"true"});return y&&!g?m.createElement(m.Fragment,null,j,m.createElement(et,{page:v})):j});it.displayName="Link",m.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:i,children:o,...l},c){let u=je(a,{relative:l.relative}),d=ye(),h=m.useContext(he),{navigator:f,basename:p}=m.useContext(me),g=null!=h&&function(e,{relative:t}={}){let n=m.useContext(fe);D(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lt("useViewTransitionState"),s=je(e,{relative:t});if(!n.isTransitioning)return!1;let a=te(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=te(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=Z(s.pathname,i)||null!=Z(s.pathname,a)}(u)&&!0===i,b=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,v=d.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(v=v.toLowerCase(),y=y?y.toLowerCase():null,b=b.toLowerCase()),y&&p&&(y=te(y,p)||y);const x="/"!==b&&b.endsWith("/")?b.length-1:b.length;let w,_=v===b||!r&&v.startsWith(b)&&"/"===v.charAt(x),j=null!=y&&(y===b||!r&&y.startsWith(b)&&"/"===y.charAt(b.length)),k={isActive:_,isPending:j,isTransitioning:g},N=_?e:void 0;w="function"==typeof n?n(k):[n,_?"active":null,j?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let S="function"==typeof s?s(k):s;return m.createElement(it,{...l,"aria-current":N,className:w,ref:c,style:S,to:a,viewTransition:i},"function"==typeof o?o(k):o)}).displayName="NavLink";var ot=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:i=$e,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=function(){let{router:e}=lt("useSubmit"),{basename:t}=m.useContext(me),n=Pe("useRouteId");return m.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:c}=He(r,t);if(!1===s.navigate){let t=s.fetcherKey||ut();await e.fetch(t,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}(),g=function(e,{relative:t}={}){let{basename:n}=m.useContext(me),r=m.useContext(ge);D(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...je(e||".",{relative:t})},i=ye();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:ae([n,a.pathname]));return F(a)}(o,{relative:c}),b="get"===i.toLowerCase()?"get":"post",v="string"==typeof o&&at.test(o);return m.createElement("form",{ref:f,method:b,action:g,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=r?.getAttribute("formmethod")||i;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:s,state:a,relative:c,preventScrollReset:u,viewTransition:d})},...h,"data-discover":v||"render"!==e?void 0:"true"})});function lt(e){let t=m.useContext(de);return D(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}ot.displayName="Form";var ct=0,ut=()=>`__${String(++ct)}__`;var dt=T();const ht=t(dt),ft=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,s,a);return a},mt=e=>e;function pt(e,t){let n;try{n=e()}catch(ob){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=n.getItem(e))?t:null;return s instanceof Promise?s.then(r):r(s)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const gt=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>gt(e)(n),catch(e){return this}}}catch(ob){return{then(e){return this},catch:t=>gt(t)(ob)}}},bt=(e,t)=>(n,r,s)=>{let a={storage:pt(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c=a.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},r,s);const u=()=>{const e=a.partialize({...r()});return c.setItem(a.name,{state:e,version:a.version})},d=s.setState;s.setState=(e,t)=>(d(e,t),u());const h=e((...e)=>(n(...e),u()),r,s);let f;s.getInitialState=()=>h;const m=()=>{var e,t;if(!c)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:h)});const s=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:h))||void 0;return gt(c.getItem.bind(c))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate){const t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[s,i]=e;if(f=a.merge(i,null!=(t=r())?t:h),n(f,!0),s)return u()}).then(()=>{null==s||s(f,void 0),f=r(),i=!0,l.forEach(e=>e(f))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||m(),f||h},vt=(e=>{const t=(e=>e?ft(e):ft)(e),n=e=>function(e,t=mt){const n=p.useSyncExternalStore(e.subscribe,p.useCallback(()=>t(e.getState()),[e,t]),p.useCallback(()=>t(e.getInitialState()),[e,t]));return p.useDebugValue(n),n}(t,e);return Object.assign(n,t),n})(bt(e=>({user:null,setUser:t=>e({user:t}),currentBusiness:null,setCurrentBusiness:t=>e({currentBusiness:t}),userBusinesses:[],setUserBusinesses:t=>e({userBusinesses:t}),businessMembers:[],setBusinessMembers:t=>e({businessMembers:t}),currentUserRole:null,setCurrentUserRole:t=>e({currentUserRole:t}),businessHours:{monday:{open:"06:00",close:"18:00",enabled:!0},tuesday:{open:"06:00",close:"18:00",enabled:!0},wednesday:{open:"06:00",close:"18:00",enabled:!0},thursday:{open:"06:00",close:"18:00",enabled:!0},friday:{open:"06:00",close:"18:00",enabled:!0},saturday:{open:"08:00",close:"18:00",enabled:!0},sunday:{open:"00:00",close:"00:00",enabled:!1},appointment_interval_minutes:30},setBusinessHours:t=>e({businessHours:t}),businessSettings:null,setBusinessSettings:t=>e({businessSettings:t}),businessServices:[],setBusinessServices:t=>e({businessServices:t}),addBusinessService:t=>e(e=>({businessServices:[...e.businessServices,t]})),updateBusinessService:(t,n)=>e(e=>({businessServices:e.businessServices.map(e=>e.id===t?{...e,...n}:e)})),removeBusinessService:t=>e(e=>({businessServices:e.businessServices.filter(e=>e.id!==t)})),blockedSlots:[],setBlockedSlots:t=>e({blockedSlots:t}),addBlockedSlot:t=>e(e=>({blockedSlots:[...e.blockedSlots,t]})),removeBlockedSlot:t=>e(e=>({blockedSlots:e.blockedSlots.filter(e=>e.id!==t)})),businessHoursNew:[],setBusinessHoursNew:t=>e({businessHoursNew:t}),addBusinessHour:t=>e(e=>({businessHoursNew:[...e.businessHoursNew,t]})),updateBusinessHour:(t,n)=>e(e=>({businessHoursNew:e.businessHoursNew.map(e=>e.id===t?{...e,...n}:e)})),removeBusinessHour:t=>e(e=>({businessHoursNew:e.businessHoursNew.filter(e=>e.id!==t)})),notificationSettings:null,setNotificationSettings:t=>e({notificationSettings:t}),subscriptionPlans:[],setSubscriptionPlans:t=>e({subscriptionPlans:t}),currentUsage:null,setCurrentUsage:t=>e({currentUsage:t}),appointments:[],setAppointments:t=>e({appointments:t}),addAppointment:t=>e(e=>({appointments:[t,...e.appointments]})),updateAppointment:(t,n)=>e(e=>({appointments:e.appointments.map(e=>e.id===t?{...e,...n}:e)})),removeAppointment:t=>e(e=>({appointments:e.appointments.filter(e=>e.id!==t)})),isOnline:navigator.onLine,setIsOnline:t=>e({isOnline:t}),offlineQueue:[],addToOfflineQueue:t=>e(e=>({offlineQueue:[...e.offlineQueue,t]})),clearOfflineQueue:()=>e({offlineQueue:[]})}),{name:"ssa-app-store",partialize:e=>({user:e.user,currentBusiness:e.currentBusiness,userBusinesses:e.userBusinesses,businessMembers:e.businessMembers,currentUserRole:e.currentUserRole,businessHours:e.businessHours,businessSettings:e.businessSettings,businessServices:e.businessServices,blockedSlots:e.blockedSlots,businessHoursNew:e.businessHoursNew,notificationSettings:e.notificationSettings,subscriptionPlans:e.subscriptionPlans,currentUsage:e.currentUsage,appointments:e.appointments,offlineQueue:e.offlineQueue})}));var yt=function(e,t){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}yt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var wt=function(){return wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},wt.apply(this,arguments)};function _t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function jt(e,t,n,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function kt(e,t){return function(n,r){t(n,r,e)}}function Nt(e,t,n,r,s,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,f=n.length-1;f>=0;f--){var m={};for(var p in r)m[p]="access"===p?{}:r[p];for(var p in r.access)m.access[p]=r.access[p];m.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var g=(0,n[f])("accessor"===l?{get:d.get,set:d.set}:d[c],m);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=i(g.get))&&(d.get=o),(o=i(g.set))&&(d.set=o),(o=i(g.init))&&s.unshift(o)}else(o=i(g))&&("field"===l?s.unshift(o):d[c]=o)}u&&Object.defineProperty(u,r.name,d),h=!0}function St(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function Et(e){return"symbol"==typeof e?e:"".concat(e)}function Ct(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Tt(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Pt(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(ob){a(ob)}}function o(e){try{l(r.throw(e))}catch(ob){a(ob)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}function Ot(e,t){var n,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(ob){o=[6,ob],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Rt=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function At(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Rt(t,e,n)}function It(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return i}function Mt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Dt(arguments[t]));return e}function Lt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)r[s]=a[i];return r}function $t(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function Ft(e){return this instanceof Ft?(this.v=e,this):new Ft(e)}function zt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){s[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{(n=s[e](t)).value instanceof Ft?Promise.resolve(n.value.v).then(l,c):u(a[0][2],n)}catch(ob){u(a[0][3],ob)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function Ut(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:Ft(e[r](t)),done:!1}:s?s(t):t}:s}}function Bt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=It(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,s){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,s,(t=e[n](t)).done,t.value)})}}}function Wt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Ht=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},qt=function(e){return(qt=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)};function Vt(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=qt(e),r=0;r<n.length;r++)"default"!==n[r]&&Rt(t,e,n[r]);return Ht(t,e),t}function Kt(e){return e&&e.__esModule?e:{default:e}}function Gt(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Yt(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function Jt(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function Qt(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(ob){return Promise.reject(ob)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Xt="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Zt(e){function t(t){e.error=e.hasError?new Xt(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(e){return t(e),s()})}else r|=1}catch(ob){t(ob)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function en(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,s,a){return n?t?".jsx":".js":!r||s&&a?r+s+"."+a.toLowerCase()+"js":e}):e}const tn={__extends:xt,__assign:wt,__rest:_t,__decorate:jt,__param:kt,__esDecorate:Nt,__runInitializers:St,__propKey:Et,__setFunctionName:Ct,__metadata:Tt,__awaiter:Pt,__generator:Ot,__createBinding:Rt,__exportStar:At,__values:It,__read:Dt,__spread:Mt,__spreadArrays:Lt,__spreadArray:$t,__await:Ft,__asyncGenerator:zt,__asyncDelegator:Ut,__asyncValues:Bt,__makeTemplateObject:Wt,__importStar:Vt,__importDefault:Kt,__classPrivateFieldGet:Gt,__classPrivateFieldSet:Yt,__classPrivateFieldIn:Jt,__addDisposableResource:Qt,__disposeResources:Zt,__rewriteRelativeImportExtension:en},nn=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Qt,get __assign(){return wt},__asyncDelegator:Ut,__asyncGenerator:zt,__asyncValues:Bt,__await:Ft,__awaiter:Pt,__classPrivateFieldGet:Gt,__classPrivateFieldIn:Jt,__classPrivateFieldSet:Yt,__createBinding:Rt,__decorate:jt,__disposeResources:Zt,__esDecorate:Nt,__exportStar:At,__extends:xt,__generator:Ot,__importDefault:Kt,__importStar:Vt,__makeTemplateObject:Wt,__metadata:Tt,__param:kt,__propKey:Et,__read:Dt,__rest:_t,__rewriteRelativeImportExtension:en,__runInitializers:St,__setFunctionName:Ct,__spread:Mt,__spreadArray:$t,__spreadArrays:Lt,__values:It,default:tn},Symbol.toStringTag,{value:"Module"}));class rn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class sn extends rn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class an extends rn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class on extends rn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ln,cn;(cn=ln||(ln={})).Any="any",cn.ApNortheast1="ap-northeast-1",cn.ApNortheast2="ap-northeast-2",cn.ApSouth1="ap-south-1",cn.ApSoutheast1="ap-southeast-1",cn.ApSoutheast2="ap-southeast-2",cn.CaCentral1="ca-central-1",cn.EuCentral1="eu-central-1",cn.EuWest1="eu-west-1",cn.EuWest2="eu-west-2",cn.EuWest3="eu-west-3",cn.SaEast1="sa-east-1",cn.UsEast1="us-east-1",cn.UsWest1="us-west-1",cn.UsWest2="us-west-2";class un{constructor(e,{headers:t={},customFetch:n,region:r=ln.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>R(async()=>{const{default:e}=await Promise.resolve().then(()=>kn);return{default:e}},[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Pt(this,arguments,void 0,function*(e,t={}){var n;try{const{headers:r,method:s,body:a,signal:i}=t;let o={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let u;l&&"any"!==l&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)?"undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):"string"==typeof a?(o["Content-Type"]="text/plain",u=a):"undefined"!=typeof FormData&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)):u=a;const d=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u,signal:i}).catch(e=>{if("AbortError"===e.name)throw e;throw new sn(e)}),h=d.headers.get("x-relay-error");if(h&&"true"===h)throw new an(d);if(!d.ok)throw new on(d);let f,m=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return f="application/json"===m?yield d.json():"application/octet-stream"===m||"application/pdf"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:f,error:null,response:d}}catch(r){return r instanceof Error&&"AbortError"===r.name?{data:null,error:new sn(r)}:{data:null,error:r,response:r instanceof on||r instanceof an?r.context:void 0}}})}}var dn={};const hn=n(nn);var fn={},mn={},pn={},gn={},bn={},vn=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const yn=vn.fetch,xn=vn.fetch.bind(vn),wn=vn.Headers,_n=vn.Request,jn=vn.Response,kn=Object.freeze(Object.defineProperty({__proto__:null,Headers:wn,Request:_n,Response:jn,default:xn,fetch:yn},Symbol.toStringTag,{value:"Module"})),Nn=n(kn);var Sn,En,Cn,Tn,Pn,On,Rn,An={};function In(){if(Sn)return An;Sn=1,Object.defineProperty(An,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return An.default=e,An}function Dn(){if(En)return bn;En=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=hn,t=e.__importDefault(Nn),n=e.__importDefault(In());return bn.default=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(n=e.shouldThrowOnError)&&void 0!==n&&n,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new n.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},bn}function Mn(){if(Cn)return gn;Cn=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=hn.__importDefault(Dn());class t extends e.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return gn.default=t,gn}function Ln(){if(Tn)return pn;Tn=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=hn.__importDefault(Mn());class t extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const a=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}return pn.default=t,pn}function $n(){if(Pn)return mn;Pn=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=hn.__importDefault(Ln());return mn.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(t,n){const{head:r=!1,count:s}=null!=n?n:{},a=r?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==n&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:n}={}){var r;return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}},mn}var Fn=function(){if(Rn)return dn;Rn=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const e=hn,t=e.__importDefault(function(){if(On)return fn;On=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=hn,t=e.__importDefault($n()),n=e.__importDefault(Ln());class r{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new t.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new n.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return fn.default=r,fn}());dn.PostgrestClient=t.default;const n=e.__importDefault($n());dn.PostgrestQueryBuilder=n.default;const r=e.__importDefault(Ln());dn.PostgrestFilterBuilder=r.default;const s=e.__importDefault(Mn());dn.PostgrestTransformBuilder=s.default;const a=e.__importDefault(Dn());dn.PostgrestBuilder=a.default;const i=e.__importDefault(In());return dn.PostgrestError=i.default,dn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:i.default},dn}();const zn=t(Fn),{PostgrestClient:Un,PostgrestQueryBuilder:Bn,PostgrestFilterBuilder:Wn,PostgrestTransformBuilder:Hn,PostgrestBuilder:qn,PostgrestError:Vn}=zn;class Kn{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Gn=1e4;var Yn,Jn,Qn,Xn,Zn,er,tr,nr,rr,sr,ar;(Jn=Yn||(Yn={}))[Jn.connecting=0]="connecting",Jn[Jn.open=1]="open",Jn[Jn.closing=2]="closing",Jn[Jn.closed=3]="closed",(Xn=Qn||(Qn={})).closed="closed",Xn.errored="errored",Xn.joined="joined",Xn.joining="joining",Xn.leaving="leaving",(er=Zn||(Zn={})).close="phx_close",er.error="phx_error",er.join="phx_join",er.reply="phx_reply",er.leave="phx_leave",er.access_token="access_token",(tr||(tr={})).websocket="websocket",(rr=nr||(nr={})).Connecting="connecting",rr.Open="open",rr.Closing="closing",rr.Closed="closed";class ir{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+r));a+=r;const o=n.decode(e.slice(a,a+s));a+=s;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class or{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(ar=sr||(sr={})).abstime="abstime",ar.bool="bool",ar.date="date",ar.daterange="daterange",ar.float4="float4",ar.float8="float8",ar.int2="int2",ar.int4="int4",ar.int4range="int4range",ar.int8="int8",ar.int8range="int8range",ar.json="json",ar.jsonb="jsonb",ar.money="money",ar.numeric="numeric",ar.oid="oid",ar.reltime="reltime",ar.text="text",ar.time="time",ar.timestamp="timestamp",ar.timestamptz="timestamptz",ar.timetz="timetz",ar.tsrange="tsrange",ar.tstzrange="tstzrange";const lr=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=cr(r,e,t,s),n),{}):{}},cr=(e,t,n,r)=>{const s=t.find(t=>t.name===e),a=null==s?void 0:s.type,i=n[e];return a&&!r.includes(a)?ur(a,i):dr(i)},ur=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return pr(t,n)}switch(e){case sr.bool:return hr(t);case sr.float4:case sr.float8:case sr.int2:case sr.int4:case sr.int8:case sr.numeric:case sr.oid:return fr(t);case sr.json:case sr.jsonb:return mr(t);case sr.timestamp:return gr(t);case sr.abstime:case sr.date:case sr.daterange:case sr.int4range:case sr.int8range:case sr.money:case sr.reltime:case sr.text:case sr.time:case sr.timestamptz:case sr.timetz:case sr.tsrange:case sr.tstzrange:default:return dr(t)}},dr=e=>e,hr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pr=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(s){r=a?a.split(","):[]}return r.map(e=>ur(t,e))}return e},gr=e=>"string"==typeof e?e.replace(" ","T"):e,br=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class vr{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yr,xr,wr,_r,jr,kr,Nr,Sr;(xr=yr||(yr={})).SYNC="sync",xr.JOIN="join",xr.LEAVE="leave";class Er{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Er.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Er.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=s[e];if(n){const r=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(t,r)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let s=e[t];if(!s)return;const a=n.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,r(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(_r=wr||(wr={})).ALL="*",_r.INSERT="INSERT",_r.UPDATE="UPDATE",_r.DELETE="DELETE",(kr=jr||(jr={})).BROADCAST="broadcast",kr.PRESENCE="presence",kr.POSTGRES_CHANGES="postgres_changes",kr.SYSTEM="system",(Sr=Nr||(Nr={})).SUBSCRIBED="SUBSCRIBED",Sr.TIMED_OUT="TIMED_OUT",Sr.CLOSED="CLOSED",Sr.CHANNEL_ERROR="CHANNEL_ERROR";class Cr{constructor(e,t={config:{}},n){var r,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Qn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new vr(this,Zn.join,this.params,this.timeout),this.rejoinTimer=new or(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qn.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zn.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Er(this),this.broadcastEndpointURL=br(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(s=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===s?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Qn.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[jr.PRESENCE]&&this.bindings[jr.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),u={},d={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Nr.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Nr.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,a=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:i,schema:o,table:l,filter:c}}=s,u=t&&t[n];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Qn.errored,void(null==e||e(Nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=a,void(e&&e(Nr.SUBSCRIBED))}null==e||e(Nr.SUBSCRIBED)}).receive("error",t=>{this.state=Qn.errored,null==e||e(Nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Qn.joined&&e===jr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new vr(this,Zn.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qn.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new vr(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Zn;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(u,n)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var n,r,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:a}=e,i={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:a};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Qn.closed}_isJoined(){return this.state===Qn.joined}_isJoining(){return this.state===Qn.joining}_isLeaving(){return this.state===Qn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Cr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zn.close,{},e)}_onError(e){this._on(Zn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=lr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=lr(e.columns,e.old_record)),t}}const Tr=()=>{},Pr=25e3,Or=10,Rr=100,Ar=[1e3,2e3,5e3,1e4];class Ir{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gn,this.transport=null,this.heartbeatIntervalMs=Pr,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tr,this.ref=0,this.reconnectTimer=null,this.logger=Tr,this.conn=null,this.sendBuffer=[],this.serializer=new ir,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>R(async()=>{const{default:e}=await Promise.resolve().then(()=>kn);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${tr.websocket}`,this.httpEndpoint=br(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kn.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Yn.connecting:return nr.Connecting;case Yn.open:return nr.Open;case Yn.closing:return nr.Closing;default:return nr.Closed}}isConnected(){return this.connectionState()===nr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Cr(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(ob){this.log("error","error in heartbeat callback",ob)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Rr)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(ob){this.log("error","error in heartbeat callback",ob)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(ob){this.log("error","error in heartbeat callback",ob)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(ob){this.log("error","error in heartbeat callback",ob)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:s}=e,a=s?`(${s})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.76.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(Zn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(ob){this.log("error",`error in ${e} callback`,ob)}})}catch(ob){this.log("error",`error triggering ${e} callbacks`,ob)}}_setupReconnectionTimer(){this.reconnectTimer=new or(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Or)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,s,a,i,o,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:Gn,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Pr,this.worker=null!==(s=null==e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:Tr,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Ar[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Dr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Lr extends Dr{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $r extends Dr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Fr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>R(async()=>{const{default:e}=await Promise.resolve().then(()=>kn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},zr=e=>{if(Array.isArray(e))return e.map(e=>zr(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=zr(n)}),t},Ur=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Br=(e,t,n)=>Pt(void 0,void 0,void 0,function*(){const r=yield Pt(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield R(()=>Promise.resolve().then(()=>kn),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,s=(null==n?void 0:n.statusCode)||r+"";t(new Lr(Ur(n),r,s))}).catch(e=>{t(new $r(Ur(e),e))}):t(new $r(Ur(e),e))}),Wr=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,(null==t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n)):s};function Hr(e,t,n,r,s,a){return Pt(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,Wr(t,r,s,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Br(e,o,r))})})}function qr(e,t,n,r){return Pt(this,void 0,void 0,function*(){return Hr(e,"GET",t,n,r)})}function Vr(e,t,n,r,s){return Pt(this,void 0,void 0,function*(){return Hr(e,"POST",t,r,s,n)})}function Kr(e,t,n,r,s){return Pt(this,void 0,void 0,function*(){return Hr(e,"PUT",t,r,s,n)})}function Gr(e,t,n,r,s){return Pt(this,void 0,void 0,function*(){return Hr(e,"DELETE",t,r,s,n)})}class Yr{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Pt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mr(e))return{data:null,error:e};throw e}})}}var Jr;class Qr{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Jr]="BlobDownloadBuilder",this.promise=null}asStream(){return new Yr(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Pt(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mr(e))return{data:null,error:e};throw e}})}}Jr=Symbol.toStringTag;const Xr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class es{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Fr(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return Pt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Zr),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Kr:Vr)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mr(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Pt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Zr.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield Kr(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mr(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield Vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new Dr("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}update(e,t,n){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Pt(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield Vr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Pt(this,void 0,void 0,function*(){try{const r=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e);return new Qr(()=>qr(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Pt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield qr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:zr(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}exists(e){return Pt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Pt(this,void 0,void 0,function*(){return Hr(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n)&&n instanceof $r){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}remove(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}list(e,t,n){return Pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Xr),t),{prefix:e||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}listV2(e,t){return Pt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ts="2.76.1",ns={"X-Client-Info":`storage-js/${ts}`};class rs{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ns),t),this.fetch=Fr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Pt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mr(e))return{data:null,error:e};throw e}})}getBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}createBucket(e){return Pt(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}}class ss{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ns),t),this.fetch=Fr(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}listBuckets(e){return Pt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,s=yield qr(this.fetch,r,{headers:this.headers});return{data:Array.isArray(s)?s.filter(e=>"ANALYTICS"===e.type):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mr(t))return{data:null,error:t};throw t}})}}const as={"X-Client-Info":`storage-js/${ts}`,"Content-Type":"application/json"};class is extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function os(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class ls extends is{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cs extends is{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var us,ds;(ds=us||(us={})).InternalError="InternalError",ds.S3VectorConflictException="S3VectorConflictException",ds.S3VectorNotFoundException="S3VectorNotFoundException",ds.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",ds.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",ds.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const hs=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>R(async()=>{const{default:e}=await Promise.resolve().then(()=>kn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},fs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ms=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function ps(e,t,n,r,s,a){return Pt(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,ms(t,r,s,a)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,n)=>Pt(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new ls(fs(e),n,r))}).catch(()=>{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new ls(s,n,e))});else{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new ls(s,n,e))}}else t(new cs(fs(e),e))}))(e,o,r))})})}function gs(e,t,n,r,s){return Pt(this,void 0,void 0,function*(){return ps(e,"POST",t,r,s,n)})}class bs{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},as),t),this.fetch=hs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield gs(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}listIndexes(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:(yield gs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}}class vs{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},as),t),this.fetch=hs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Pt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield gs(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}getVectors(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}listVectors(e){return Pt(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield gs(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}queryVectors(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Pt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield gs(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}}class ys{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},as),t),this.fetch=hs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield gs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}getBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}listBuckets(){return Pt(this,arguments,void 0,function*(e={}){try{return{data:yield gs(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield gs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(os(t))return{data:null,error:t};throw t}})}}class xs extends ys{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ws(this.url,this.headers,e,this.fetch)}}class ws extends bs{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Pt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Pt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Pt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Pt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new _s(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class _s extends vs{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Pt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Pt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Pt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Pt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Pt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class js extends rs{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new es(this.url,this.headers,e,this.fetch)}get vectors(){return new xs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ss(this.url+"/iceberg",this.headers,this.fetch)}}let ks="";ks="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ns={headers:{"X-Client-Info":`supabase-js-${ks}/2.76.1`}},Ss={schema:"public"},Es={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cs={},Ts=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?xn:fetch),(...e)=>t(...e)})(n),s="undefined"==typeof Headers?wn:Headers;return async(n,a)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new s(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},a),{headers:l}))}};const Ps="2.76.1",Os=3e4,Rs=9e4,As={"X-Client-Info":`gotrue-js/${Ps}`},Is="X-Supabase-Api-Version",Ds={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ms=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ls extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function $s(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Fs extends Ls{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class zs extends Ls{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Us extends Ls{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Bs extends Us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ws extends Us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hs extends Us{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qs extends Us{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends Us{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ks extends Us{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gs(e){return $s(e)&&"AuthRetryableFetchError"===e.name}class Ys extends Us{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Js extends Us{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xs=" \t\n\r=".split(""),Zs=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xs.length;t+=1)e[Xs[t].charCodeAt(0)]=-2;for(let t=0;t<Qs.length;t+=1)e[Qs[t].charCodeAt(0)]=t;return e})();function ea(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qs[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qs[e]),t.queuedBits-=6}}function ta(e,t,n){const r=Zs[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function na(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)ta(e.charCodeAt(i),s,a);return t.join("")}function ra(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function sa(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)ta(e.charCodeAt(s),n,r);return new Uint8Array(t)}function aa(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}ra(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function ia(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>ea(e,n,r)),ea(null,n,r),t.join("")}const oa=()=>"undefined"!=typeof window&&"undefined"!=typeof document,la={tested:!1,writable:!1},ca=()=>{if(!oa())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(ob){return!1}if(la.tested)return la.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),la.tested=!0,la.writable=!0}catch(ob){la.tested=!0,la.writable=!1}return la.writable};const ua=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>R(async()=>{const{default:e}=await Promise.resolve().then(()=>kn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},da=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ha=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},fa=async(e,t)=>{await e.removeItem(t)};class ma{constructor(){this.promise=new ma.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function pa(e){const t=e.split(".");if(3!==t.length)throw new Js("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ms.test(t[n]))throw new Js("JWT not in base64url format");return{header:JSON.parse(na(t[0])),payload:JSON.parse(na(t[1])),signature:sa(t[2]),raw:{header:t[0],payload:t[1]}}}function ga(e){return("0"+e.toString(16)).substr(-2)}async function ba(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ga).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await da(e,`${t}-code-verifier`,s);const a=await ba(r);return[a,r===a?"plain":"s256"]}ma.promiseConstructor=Promise;const ya=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const xa=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wa(e){if(!xa.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _a(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ja(e){return JSON.parse(JSON.stringify(e))}const ka=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Na=[502,503,504];async function Sa(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Ks(ka(e),0);if(Na.includes(e.status))throw new Ks(ka(e),e.status);let r,s;try{r=await e.json()}catch(ob){throw new zs(ka(ob),ob)}const a=function(e){const t=e.headers.get(Is);if(!t)return null;if(!t.match(ya))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(ob){return null}}(e);if(a&&a.getTime()>=Ds.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new Ys(ka(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new Bs}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Ys(ka(r),e.status,r.weak_password.reasons);throw new Fs(ka(r),e.status||500,s)}async function Ea(e,t,n,r){var s;const a=Object.assign({},null==r?void 0:r.headers);a[Is]||(a[Is]=Ds.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,s,a){const i=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,a);let o;try{o=await e(n,Object.assign({},i))}catch(ob){throw console.error(ob),new Ks(ka(ob),0)}o.ok||await Sa(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(ob){await Sa(ob)}}(e,t,n+o,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ca(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ta(e){const t=Ca(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Pa(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Oa(e){return{data:e,error:null}}function Ra(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=_t(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function Aa(e){return e}const Ia=["global","local","others"];class Da{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ua(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ia[0]){if(Ia.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ia.join(", ")}`);try{return await Ea(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($s(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ea(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Pa})}catch(n){if($s(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=_t(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Ea(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ra,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if($s(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ea(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pa})}catch(t){if($s(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ea(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Aa});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if($s(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wa(e);try{return await Ea(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pa})}catch(t){if($s(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wa(e);try{return await Ea(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Pa})}catch(n){if($s(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){wa(e);try{return await Ea(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Pa})}catch(n){if($s(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wa(e.userId);try{const{data:t,error:n}=await Ea(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if($s(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wa(e.userId),wa(e.id);try{return{data:await Ea(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($s(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ea(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Aa});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if($s(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Ea(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ea(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Ea(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ea(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if($s(t))return{data:null,error:t};throw t}}}function Ma(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const La=!!(globalThis&&ca()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class $a extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fa extends $a{}async function za(e,t,n){La&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),La&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw La&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Fa(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(La)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(ob){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",ob)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}La&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{La&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}function Ua(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Ba(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Wa extends Error{constructor({message:e,code:t,cause:n,name:r}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=t}}class Ha extends Wa{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function qa({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Wa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=a.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new Wa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=a.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Wa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(s=a.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new Wa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Wa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Wa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Wa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Wa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Xa(t))return new Wa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new Wa({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Wa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Wa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Wa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Va({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Wa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Wa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Xa(t))return new Wa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new Wa({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Wa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Wa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Ka=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Ga(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=_t(e,["challenge","user","excludeCredentials"]),a=sa(t).buffer,i=Object.assign(Object.assign({},n),{id:sa(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:sa(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Ya(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=_t(e,["challenge","allowCredentials"]),s=sa(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:sa(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function Ja(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ia(new Uint8Array(e.response.attestationObject)),clientDataJSON:ia(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Qa(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ia(new Uint8Array(s.authenticatorData)),clientDataJSON:ia(new Uint8Array(s.clientDataJSON)),signature:ia(new Uint8Array(s.signature)),userHandle:s.userHandle?ia(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Xa(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Za(){var e,t;return!!(oa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const ei={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ti={userVerification:"preferred",hints:["security-key"]};function ni(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const s of e)if(s)for(const e in s){const a=s[e];if(void 0!==a)if(Array.isArray(a))r[e]=a;else if(n(a))r[e]=a;else if(t(a)){const n=r[e];t(n)?r[e]=ni(n,a):r[e]=ni(a)}else r[e]=a}return r}class ri{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},s){try{const{data:a,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:i};const o=null!=r?r:Ka.createNewAbortSignal();if("create"===a.webauthn.type){const{user:e}=a.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(a.webauthn.type){case"create":{const t=function(e,t){return ni(ei,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ha("Browser returned unexpected credential type",t)}:{data:null,error:new Ha("Empty credential response",t)}}catch(t){return{data:null,error:qa({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return ni(ti,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ha("Browser returned unexpected credential type",t)}:{data:null,error:new Ha("Empty credential response",t)}}catch(t){return{data:null,error:Va({error:t,options:e})}}}(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(a){return $s(a)?{data:null,error:a}:{data:null,error:new zs("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}},s){if(!t)return{data:null,error:new Ls("rpId is required for WebAuthn authentication")};try{if(!Za())return{data:null,error:new zs("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:s});if(!a)return{data:null,error:i};const{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(a){return $s(a)?{data:null,error:a}:{data:null,error:new zs("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r},s){if(!t)return{data:null,error:new Ls("rpId is required for WebAuthn registration")};try{if(!Za())return{data:null,error:new zs("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:s});return o?this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(a){return $s(a)?{data:null,error:a}:{data:null,error:new zs("Unexpected error in register",a)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(ob){"undefined"!=typeof self&&(self.globalThis=self)}}();const si={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:As,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ai(e,t,n){return await n()}const ii={};class oi{get jwks(){var e,t;return null!==(t=null===(e=ii[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=ii[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=oi.nextInstanceID,oi.nextInstanceID+=1,this.instanceID>0&&oa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},si),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Da({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ua(r.fetch),this.lock=r.lock||ai,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:oa()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=za:this.lock=ai,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ri(this)},this.persistSession?(r.storage?this.storage=r.storage:ca()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ma(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ma(this.memoryStorage)),oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(ob){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",ob)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ps}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(ob){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),oa()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return $s(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return $s(t)?{error:t}:{error:new zs("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await Ea(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ca}),{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if($s(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await va(this.storage,this.storageKey)),s=await Ea(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:Ca})}else{if(!("phone"in e))throw new Hs("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await Ea(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Ca})}}const{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if($s(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Ta})}else{if(!("phone"in e))throw new Hs("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Ta})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Ws}}catch(t){if($s(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,s,a,i,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:m,options:p}=e;let g;if(oa())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==p?void 0:p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const b=new URL(null!==(t=null==p?void 0:p.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const y=Ua(v[0]);let x=null===(n=null==p?void 0:p.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!x){const e=await g.request({method:"eth_chainId"});x=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${Ua(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let m=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${a.toISOString()}`;if(s&&(m+=`\nExpiration Time: ${s.toISOString()}`),o&&(m+=`\nNot Before: ${o.toISOString()}`),l&&(m+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}m+=e}return`${f}\n${m}`}({domain:b.host,address:y,statement:m,uri:b.href,version:"1",chainId:x,nonce:null===(r=null==p?void 0:p.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(a=null===(s=null==p?void 0:p.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==a?a:new Date,expirationTime:null===(i=null==p?void 0:p.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==p?void 0:p.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==p?void 0:p.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==p?void 0:p.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[Ba(h),y]})}try{const{data:t,error:n}=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Ca});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Ws}}catch(m){if($s(m))return{data:{user:null,session:null},error:m};throw m}}async signInWithSolana(e){var t,n,r,s,a,i,o,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:p,options:g}=e;let b;if(oa())if("object"==typeof h)b=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");b=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in b&&b.signIn){const e=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in b&&"function"==typeof b.signMessage&&"publicKey"in b&&"object"==typeof b&&b.publicKey&&"toBase58"in b.publicKey&&"function"==typeof b.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await b.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:ia(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ca});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Ws}}catch(p){if($s(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await ha(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ca});if(await fa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new Ws}}catch(s){if($s(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:a}=e,i=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ca}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ws}}catch(t){if($s(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,a;try{if("email"in e){const{email:r,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await va(this.storage,this.storageKey));const{error:o}=await Ea(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Ea(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(a=null==n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Hs("You must provide either an email or phone number.")}catch(i){if($s(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Ea(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ca});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if($s(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,a=null;return"pkce"===this.flowType&&([s,a]=await va(this.storage,this.storageKey)),await Ea(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Oa})}catch(s){if($s(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Bs;const{error:r}=await Ea(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if($s(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:a}=await Ea(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:a,error:i}=await Ea(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new Hs("You must provide either an email or phone number and a type")}catch(t){if($s(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(ob){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(ob){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ha(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Rs;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ha(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=_a()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Ea(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pa}):await this._useSession(async e=>{var t,n,r;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ea(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Pa}):{data:{user:null},error:new Bs}})}catch(t){if($s(t))return function(e){return $s(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new Bs;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await va(this.storage,this.storageKey));const{data:l,error:c}=await Ea(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Pa});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if($s(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bs;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:a}=pa(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if($s(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Bs;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($s(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!oa())throw new qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Vs("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new qs("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vs("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(s&&i&&a&&l))throw new qs("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:m,error:p}=await this._getUser(s);if(p)throw p;const g={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if($s(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ha(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return $s(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await va(this.storage,this.storageKey,!0));try{return await Ea(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if($s(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if($s(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Ea(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return oa()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if($s(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:a,provider:i,token:o,access_token:l,nonce:c}=e,u=await Ea(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==s?void 0:s.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ca}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:h}):{data:{user:null,session:null},error:new Ws}}catch(r){if($s(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)throw a;return await Ea(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Ea(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ca})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Gs(t)&&Date.now()+n-s<Os},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(ob){if(!r(s,ob))return void t(ob)}})()}))}catch(s){if(this._debug(t,"error",s),$s(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),oa()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ha(this.storage,this.storageKey);if(s&&this.userStorage){let t=await ha(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await da(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:_a()}else if(s&&!s.user&&!s.user){const e=await ha(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await fa(this.storage,this.storageKey+"-user"),await da(this.storage,this.storageKey,s)):s.user=_a()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<Rs;if(this._debug(n,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Gs(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ma;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Bs;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),$s(s)){const e={data:null,error:s};return Gs(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(ob){r.push(ob)}});if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await da(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=ja(e);await da(this.storage,this.storageKey,r)}else{const e=ja(t);await da(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await fa(this.storage,this.storageKey),await fa(this.storage,this.storageKey+"-code-verifier"),await fa(this.storage,this.storageKey+"-user"),this.userStorage&&await fa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&oa()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(ob){console.error("removing visibilitychange callback failed",ob)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Os);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(ob){console.error("Auto refresh tick failed with error. This is likely a transient error.",ob)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(ob){if(!(ob.isAcquireTimeout||ob instanceof $a))throw ob;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oa()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await va(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Ea(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Ea(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if($s(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ja(e.webauthn.credential_response):Qa(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Ea(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if($s(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const a=await Ea(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(a.error)return a;const{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ga(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ya(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if($s(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(s),"verified"===s.status&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pa(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:s,error:a}=await Ea(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,n=s.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:a,raw:{header:i,payload:o}}=pa(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,a,aa(`${i}.${o}`))))throw new Js("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(n){if($s(n))return{data:null,error:n};throw n}}}oi.nextInstanceID=0;const li=oi;class ci extends li{constructor(e){super(e)}}class ui{constructor(e,t,n){var r,s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var n,r;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:Ss,realtime:Cs,auth:Object.assign(Object.assign({},Es),{storageKey:o}),global:Ns});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Ts(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Un(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new js(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new un(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:o,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ci({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Ir(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const di=((e,t,n)=>new ui(e,t,n))("https://cuzwnsrtdnybwtuwaosr.supabase.co","sb_publishable_13DiUKWfsaO4myMSvOK4tQ_d1hZ0msC"),hi=async(e,t,n,r,s,a,i)=>{const o={appointment_external_id:e,action:t,source:n,previous_data:r,new_data:s,changed_by:a,notes:i},{error:l}=await di.from("appointment_history").insert([o]);if(l)throw console.error("Failed to create history entry:",l),console.error("Error details:",l.message,l.details,l.hint),l};function fi(){const{user:e,setUser:t}=vt(),[n,r]=m.useState(!0),[s,a]=m.useState(null),[i,o]=m.useState(!1);m.useEffect(()=>{let e=!0,n=!1;const s=vt.getState().user;if(s)return console.log("User found in persisted store:",s),t(s),void r(!1);di.auth.getSession().then(({data:{session:s}})=>{e&&(console.log("Auth session check:",s?"Session exists":"No session"),console.log("Session details:",s),s?.user&&!n?(n=!0,l(s.user.id)):(console.log("No valid session or profile already fetched, setting user to null"),t(null),r(!1)))});const{data:{subscription:a}}=di.auth.onAuthStateChange(async(s,a)=>{e&&(console.log("Auth state change:",s,a?"Session exists":"No session"),a?.user&&!n?(console.log("User ID from session:",a.user.id),n=!0,await l(a.user.id)):a?console.log("Profile already fetched, skipping"):(console.log("No session, setting user to null"),n=!1,t(null),r(!1)))});return()=>{e=!1,a?.unsubscribe()}},[]);const l=async e=>{if(i)console.log("Profile fetch already in progress, skipping");else{o(!0);try{console.log("Fetching profile for userId:",e);const{data:n,error:r}=await di.from("profiles").select("*").eq("id",e).single();if(console.log("Query result - data:",n,"error:",r),r)throw console.error("Profile fetch error:",r),r;if(!n)throw console.error("No profile data returned for userId:",e),new Error("Profile not found");console.log("Profile data:",n);const s={id:n.id,email:n.email||"",full_name:n.full_name||"",avatar_url:n.avatar_url,business_name:n.business_name,phone:n.phone};console.log("Setting user data:",s),t(s),a(null),console.log("User set successfully, loading should be false now")}catch(n){const e=n instanceof Error?n.message:"Failed to fetch profile";console.error("Profile fetch failed:",e),a(e),t(null)}finally{console.log("Setting loading to false"),r(!1),o(!1)}}};return{user:e,loading:n,error:s,signUp:async(e,t,n)=>{try{r(!0);const{data:s,error:a}=await di.auth.signUp({email:e,password:t,options:{data:{full_name:n}}});if(a)throw a;return s.user&&await di.from("profiles").insert([{id:s.user.id,full_name:n,email:e}]),{success:!0}}catch(s){const e=s instanceof Error?s.message:"Sign up failed";return a(e),{success:!1,error:e}}finally{r(!1)}},signIn:async(e,t)=>{try{r(!0),console.log("Attempting sign in for:",e);const{data:n,error:s}=await di.auth.signInWithPassword({email:e,password:t});if(s)throw console.error("Sign in error:",s),s;return console.log("Sign in successful:",n),{success:!0}}catch(n){const e=n instanceof Error?n.message:"Sign in failed";return console.error("Sign in failed:",e),a(e),{success:!1,error:e}}finally{r(!1)}},signOut:async()=>{try{await di.auth.signOut(),t(null)}catch(e){a(e instanceof Error?e.message:"Sign out failed")}},resendVerificationEmail:async e=>{try{r(!0);const{error:t}=await di.auth.resend({type:"signup",email:e});if(t)throw t;return{success:!0}}catch(t){const e=t instanceof Error?t.message:"Failed to resend verification email";return a(e),{success:!1,error:e}}finally{r(!1)}}}}function mi(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=mi(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function pi(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=mi(e))&&(r&&(r+=" "),r+=t);return r}const gi=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,bi=pi,vi=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return bi(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=gi(t)||gi(r);return s[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n})?[...e,n,r]:e},[]);return bi(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},yi=e=>{const t=ji(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),xi(n,t)||_i(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},xi=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?xi(e.slice(1),r):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join("-");return t.validators.find(({validator:e})=>e(a))?.classGroupId},wi=/^\[(.+)\]$/,_i=e=>{if(wi.test(e)){const t=wi.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ji=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Ei(Object.entries(e.classGroups),n).forEach(([e,n])=>{ki(n,r,e,t)}),r},ki=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Ni(t,e)).classGroupId=n)}if("function"==typeof e)return Si(e)?void ki(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{ki(s,Ni(t,e),n,r)})})},Ni=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Si=e=>e.isThemeGetter,Ei=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Ci=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},Ti=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,s=t[0],a=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===s&&(r||e.slice(d,d+a)===t)){n.push(e.slice(l,d)),l=d+a;continue}if("/"===c){i=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},Pi=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Oi=/\s+/;function Ri(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Ai(e))&&(r&&(r+=" "),r+=t);return r}const Ai=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ai(e[r]))&&(n&&(n+=" "),n+=t);return n};function Ii(e,...t){let n,r,s,a=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Ci(e.cacheSize),parseClassName:Ti(e),...yi(e)}))(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(Oi);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),f=r(h?u.substring(0,d):u);if(!f){if(!h){o=e+(o.length>0?" "+o:o);continue}if(f=r(u),!f){o=e+(o.length>0?" "+o:o);continue}h=!1}const m=Pi(t).join(":"),p=c?m+"!":m,g=p+f;if(a.includes(g))continue;a.push(g);const b=s(f,h);for(let n=0;n<b.length;++n){const e=b[n];a.push(p+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return s(e,a),a}return function(){return a(Ri.apply(null,arguments))}}const Di=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Mi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Li=/^\d+\/\d+$/,$i=new Set(["px","full","screen"]),Fi=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zi=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ui=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hi=e=>Vi(e)||$i.has(e)||Li.test(e),qi=e=>ao(e,"length",io),Vi=e=>Boolean(e)&&!Number.isNaN(Number(e)),Ki=e=>ao(e,"number",Vi),Gi=e=>Boolean(e)&&Number.isInteger(Number(e)),Yi=e=>e.endsWith("%")&&Vi(e.slice(0,-1)),Ji=e=>Mi.test(e),Qi=e=>Fi.test(e),Xi=new Set(["length","size","percentage"]),Zi=e=>ao(e,Xi,oo),eo=e=>ao(e,"position",oo),to=new Set(["image","url"]),no=e=>ao(e,to,co),ro=e=>ao(e,"",lo),so=()=>!0,ao=(e,t,n)=>{const r=Mi.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},io=e=>zi.test(e)&&!Ui.test(e),oo=()=>!1,lo=e=>Bi.test(e),co=e=>Wi.test(e),uo=Ii(()=>{const e=Di("colors"),t=Di("spacing"),n=Di("blur"),r=Di("brightness"),s=Di("borderColor"),a=Di("borderRadius"),i=Di("borderSpacing"),o=Di("borderWidth"),l=Di("contrast"),c=Di("grayscale"),u=Di("hueRotate"),d=Di("invert"),h=Di("gap"),f=Di("gradientColorStops"),m=Di("gradientColorStopPositions"),p=Di("inset"),g=Di("margin"),b=Di("opacity"),v=Di("padding"),y=Di("saturate"),x=Di("scale"),w=Di("sepia"),_=Di("skew"),j=Di("space"),k=Di("translate"),N=()=>["auto",Ji,t],S=()=>[Ji,t],E=()=>["",Hi,qi],C=()=>["auto",Vi,Ji],T=()=>["","0",Ji],P=()=>[Vi,Ji];return{cacheSize:500,separator:":",theme:{colors:[so],spacing:[Hi,qi],blur:["none","",Qi,Ji],brightness:P(),borderColor:[e],borderRadius:["none","","full",Qi,Ji],borderSpacing:S(),borderWidth:E(),contrast:P(),grayscale:T(),hueRotate:P(),invert:T(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[Yi,qi],inset:N(),margin:N(),opacity:P(),padding:S(),saturate:P(),scale:P(),sepia:T(),skew:P(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",Ji]}],container:["container"],columns:[{columns:[Qi]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ji]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gi,Ji]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ji]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Gi,Ji]}],"grid-cols":[{"grid-cols":[so]}],"col-start-end":[{col:["auto",{span:["full",Gi,Ji]},Ji]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[so]}],"row-start-end":[{row:["auto",{span:[Gi,Ji]},Ji]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ji]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ji]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ji,t]}],"min-w":[{"min-w":[Ji,t,"min","max","fit"]}],"max-w":[{"max-w":[Ji,t,"none","full","min","max","fit","prose",{screen:[Qi]},Qi]}],h:[{h:[Ji,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ji,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ji,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ji,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Qi,qi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ki]}],"font-family":[{font:[so]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ji]}],"line-clamp":[{"line-clamp":["none",Vi,Ki]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hi,Ji]}],"list-image":[{"list-image":["none",Ji]}],"list-style-type":[{list:["none","disc","decimal",Ji]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hi,qi]}],"underline-offset":[{"underline-offset":["auto",Hi,Ji]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ji]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ji]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",eo]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zi]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},no]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Hi,Ji]}],"outline-w":[{outline:[Hi,qi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Hi,qi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Qi,ro]}],"shadow-color":[{shadow:[so]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qi,Ji]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ji]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Ji]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ji]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Gi,Ji]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ji]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ji]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ji]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hi,qi,Ki]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ho(...e){return uo(pi(e))}const fo=vi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),mo=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>f.jsx("button",{"data-slot":"button",className:ho(fo({variant:t,size:n,className:e})),ref:a,...s}));mo.displayName="Button";const po=m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card",className:ho("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t}));po.displayName="Card";const go=m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-header",className:ho("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t}));go.displayName="CardHeader";const bo=m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-title",className:ho("leading-none font-semibold",e),...t}));bo.displayName="CardTitle";m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-description",className:ho("text-muted-foreground text-sm",e),...t})).displayName="CardDescription";m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-action",className:ho("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...t})).displayName="CardAction";const vo=m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-content",className:ho("px-6",e),...t}));vo.displayName="CardContent";m.forwardRef(({className:e,...t},n)=>f.jsx("div",{ref:n,"data-slot":"card-footer",className:ho("flex items-center px-6 [.border-t]:pt-6",e),...t})).displayName="CardFooter";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const yo=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},xo=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),wo=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var _o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>m.createElement("svg",{ref:l,..._o,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:xo("lucide",s),...!a&&!wo(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>m.createElement(e,t)),...Array.isArray(a)?a:[a]])),ko=(e,t)=>{const n=m.forwardRef(({className:n,...r},s)=>{return m.createElement(jo,{ref:s,iconNode:t,className:xo(`lucide-${a=yo(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var a});return n.displayName=yo(e),n},No=ko("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),So=ko("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Eo=ko("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Co=ko("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),To=ko("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Po=ko("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Oo=ko("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),Ro=ko("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ao=ko("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Io=ko("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Do=ko("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Mo=ko("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Lo=ko("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),$o=ko("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Fo=ko("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),zo=ko("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Uo=ko("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Bo=ko("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Wo=ko("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ho=ko("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),qo=ko("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Vo=ko("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),Ko=ko("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Go=ko("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),Yo=ko("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Jo=ko("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Qo=ko("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Xo=ko("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),Zo=ko("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),el=ko("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tl=ko("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),nl=ko("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),rl=ko("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),sl=ko("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),al=ko("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),il=ko("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ol=ko("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ll=ko("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),cl=ko("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ul=ko("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),dl=ko("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),hl=ko("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fl=ko("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),ml=ko("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),pl=ko("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),gl=ko("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),bl=ko("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function vl(){const{user:e}=fi(),t=_e();return e?f.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-900 to-slate-800",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsxs("h1",{className:"text-5xl font-bold text-white mb-4",children:["Welcome back, ",e.full_name,"!"]}),f.jsx("p",{className:"text-xl text-slate-300",children:"Manage your auto service appointments with ease"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[f.jsxs(po,{className:"p-6 text-center hover:shadow-lg transition-shadow bg-slate-800 border-slate-700",children:[f.jsx(Po,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),f.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Appointments"}),f.jsx("p",{className:"text-sm text-slate-300",children:"View and manage all your scheduled appointments"})]}),f.jsxs(po,{className:"p-6 text-center hover:shadow-lg transition-shadow bg-slate-800 border-slate-700",children:[f.jsx(Ro,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),f.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Analytics"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Track your business metrics and performance"})]}),f.jsxs(po,{className:"p-6 text-center hover:shadow-lg transition-shadow bg-slate-800 border-slate-700",children:[f.jsx(Co,{className:"w-12 h-12 text-orange-600 mx-auto mb-4"}),f.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Notifications"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Get real-time updates on appointment changes"})]}),f.jsxs(po,{className:"p-6 text-center hover:shadow-lg transition-shadow bg-slate-800 border-slate-700",children:[f.jsx(ll,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),f.jsx("h3",{className:"font-semibold mb-2 text-white",children:"Mobile App"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Install as a standalone app on your device"})]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx(mo,{variant:"default",size:"lg",onClick:()=>t("/appointments"),className:"mr-4",children:"Go to Appointments"}),f.jsx(mo,{size:"lg",variant:"outline",onClick:()=>t("/profile"),children:"Edit Profile"})]})]})}):f.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-900 to-slate-800",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"SSA Manager"}),f.jsx("p",{className:"text-xl text-slate-300 mb-8",children:"Unified appointment management platform for auto service scheduling"}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsx(mo,{variant:"default",className:"",size:"lg",onClick:()=>t("/login"),children:"Sign In"}),f.jsx(mo,{size:"lg",className:"",variant:"outline",onClick:()=>t("/signup"),children:"Create Account"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-16",children:[f.jsxs(po,{className:"p-8 bg-slate-800 border-slate-700",children:[f.jsx(Po,{className:"w-12 h-12 text-blue-600 mb-4"}),f.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Real-time Sync"}),f.jsx("p",{className:"text-slate-300",children:"Automatic synchronization with SSA platform webhooks"})]}),f.jsxs(po,{className:"p-8 bg-slate-800 border-slate-700",children:[f.jsx(ll,{className:"w-12 h-12 text-purple-600 mb-4"}),f.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Mobile Ready"}),f.jsx("p",{className:"text-slate-300",children:"Install as a PWA for offline access and push notifications"})]}),f.jsxs(po,{className:"p-8 bg-slate-800 border-slate-700",children:[f.jsx(Co,{className:"w-12 h-12 text-orange-600 mb-4"}),f.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Smart Notifications"}),f.jsx("p",{className:"text-slate-300",children:"Get instant alerts for appointment changes and updates"})]})]})]})})}function yl(){const{user:e,currentBusiness:t,setCurrentBusiness:n,userBusinesses:r,setUserBusinesses:s,businessMembers:a,setBusinessMembers:i,currentUserRole:o,setCurrentUserRole:l}=vt(),[c,u]=m.useState(!1),[d,h]=m.useState(null);m.useEffect(()=>{e?.id&&f()},[e?.id]),m.useEffect(()=>{if(r.length>0){const s=t?r.find(e=>e.id===t.id):null;if(s){const t=a.find(t=>t.business_id===s.id&&t.user_id===e?.id);t&&l(t)}else{const t=r[0];n(t);const s=a.find(n=>n.business_id===t.id&&n.user_id===e?.id);s&&l(s)}}else t&&(n(null),l(null))},[r,a,t,e?.id]);const f=async()=>{if(e?.id){u(!0),h(null);try{const{data:t,error:n}=await di.from("business_members").select("\n          *,\n          businesses (*)\n        ").eq("user_id",e.id).eq("status","active");if(n){if(console.error("Business members query error:",n),"PGRST116"===n.code||"42P17"===n.code||n.message?.includes('relation "business_members" does not exist')||n.message?.includes('relation "public.business_members" does not exist'))return console.warn("Multi-tenant migration not yet applied. Please run the migration script in Supabase SQL Editor."),void h("migration");if("PGRST301"===n.code||n.message?.includes("permission denied")||n.message?.includes("infinite recursion")){console.warn("RLS permission issue, trying fallback approach");const{data:t,error:n}=await di.from("businesses").select("*").eq("owner_id",e.id);if(n)return console.error("Owner businesses query error:",n),"PGRST116"===n.code||n.message?.includes('relation "businesses" does not exist')?void h("migration"):void h("infinite recursion");if(t&&t.length>0){const n=t.map(t=>({id:`mock-${t.id}`,business_id:t.id,user_id:e.id,role:"owner",status:"active",invited_by:void 0,invited_at:(new Date).toISOString(),joined_at:(new Date).toISOString(),permissions:{},created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));return s(t),i(n),void u(!1)}}throw n}if(t){const e=t.map(e=>e.businesses).filter(Boolean),n=t.map(e=>({...e,user:void 0}));s(e),i(n)}}catch(t){console.error("Error loading businesses:",t),h(t instanceof Error?t.message:"Failed to load businesses")}finally{u(!1)}}};return{currentBusiness:t,userBusinesses:r,businessMembers:a,currentUserRole:o,loading:c,error:d,loadUserBusinesses:f,createBusiness:async t=>{if(e?.id){u(!0),h(null);try{const{data:n,error:r}=await di.from("businesses").insert({...t,owner_id:e.id}).select().single();if(r)throw r;return await f(),n}catch(n){throw h(n instanceof Error?n.message:"Failed to create business"),n}finally{u(!1)}}},switchBusiness:t=>{const s=r.find(e=>e.id===t);if(s){n(s);const r=a.find(n=>n.business_id===t&&n.user_id===e?.id);l(r||null)}},inviteTeamMember:async(n,r)=>{if(t?.id&&e?.id)try{const s=crypto.randomUUID(),{data:a,error:i}=await di.from("business_invitations").insert({business_id:t.id,email:n,role:r,invited_by:e.id,token:s}).select().single();if(i)throw i;return a}catch(s){throw s}},acceptInvitation:async t=>{if(e?.id)try{const{data:n,error:r}=await di.from("business_invitations").select("*").eq("token",t).eq("status","pending").gt("expires_at",(new Date).toISOString()).single();if(r||!n)throw new Error("Invalid or expired invitation");const{data:s}=await di.from("business_members").select("*").eq("business_id",n.business_id).eq("user_id",e.id).single();if(s)throw new Error("You are already a member of this business");const{data:a,error:i}=await di.from("business_members").insert({business_id:n.business_id,user_id:e.id,role:n.role,status:"active",joined_at:(new Date).toISOString()}).select().single();if(i)throw i;return await di.from("business_invitations").update({status:"accepted"}).eq("id",n.id),await f(),a}catch(n){throw n}},updateBusiness:async e=>{if(t?.id)try{const{data:a,error:i}=await di.from("businesses").update(e).eq("id",t.id).select().single();if(i)throw i;return n(a),s(r.map(e=>e.id===a.id?a:e)),a}catch(a){throw a}},canUser:e=>{if(!o)return!1;const t={owner:["*"],manager:["view_business","edit_business","manage_team","manage_settings","manage_services","manage_hours","manage_appointments","view_appointments"],receptionist:["view_business","manage_appointments","view_appointments"],mechanic:["view_business","view_appointments","edit_appointments"]}[o.role]||[];return t.includes("*")||t.includes(e)}}}function xl(){const{currentBusiness:e,subscriptionPlans:t,setSubscriptionPlans:n,currentUsage:r,setCurrentUsage:s,businessMembers:a,businessServices:i,appointments:o}=vt(),[l,c]=m.useState(!1),[u,d]=m.useState(null);m.useEffect(()=>{e?.id&&h()},[e?.id]),m.useEffect(()=>{if(e?.id&&t.length>0){const n=-1===e.max_appointments_per_month||null===e.max_appointments_per_month,r=t.find(t=>t.name===e.subscription_tier);if(n||-1===r?.max_appointments_per_month)return void s(null);f()}},[e?.id,t,e?.subscription_tier,e?.max_appointments_per_month]);const h=async()=>{try{const{data:e,error:t}=await di.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(t)throw t;n(e||[])}catch(e){console.error("Failed to load subscription plans:",e)}},f=async()=>{if(!e?.id)return;const n=t.find(t=>t.name===e.subscription_tier);if(-1!==n?.max_appointments_per_month)try{const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,{data:a,error:i}=await di.from("subscription_usage").select("*").eq("business_id",e.id).gte("period_start",`${r}-01`).lte("period_start",`${r}-31`);if(i&&"PGRST116"!==i.code)throw i;if(a&&a.length>0)s(a[0]);else{if(-1===n?.max_appointments_per_month)return void s(null);await p()}}catch(r){console.error("Failed to load current usage:",r),-1===n?.max_appointments_per_month&&s(null)}else s(null)},p=async()=>{if(!e?.id)return;try{const{data:t,error:n}=await di.from("businesses").select("id").eq("id",e.id).single();if(n||!t)return void console.warn("Business not found in database, skipping usage record creation")}catch(a){return void console.warn("Error checking business existence:",a)}const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0);try{const{data:t,error:a}=await di.from("subscription_usage").insert({business_id:e.id,period_start:n.toISOString().split("T")[0],period_end:r.toISOString().split("T")[0]}).select().single();if(a)throw a;s(t)}catch(a){console.error("Failed to create usage record:",a)}},g=()=>e&&t.length&&t.find(t=>t.name===e.subscription_tier)||null,b=()=>{const e=g();return e?{maxTeamMembers:e.max_team_members,maxAppointmentsPerMonth:e.max_appointments_per_month,maxServices:e.max_services,maxCustomers:e.max_customers,features:e.features}:{maxTeamMembers:1,maxAppointmentsPerMonth:50,maxServices:5,maxCustomers:100,features:{basic_scheduling:!0,customer_management:!0,email_notifications:!0,mobile_app:!0,basic_reporting:!0}}},v=()=>{const e=b(),t=-1===e.maxAppointmentsPerMonth?o.length:o.filter(e=>e.created_at.startsWith((new Date).toISOString().split("T")[0].slice(0,7))).length,n=a.filter(e=>"active"===e.status).length,r=i.length,s=new Set(o.map(e=>e.customer_email).filter(e=>e)).size;return{appointments:{used:t,limit:e.maxAppointmentsPerMonth,percentage:e.maxAppointmentsPerMonth>0?Math.min(t/e.maxAppointmentsPerMonth*100,100):0},teamMembers:{used:n,limit:e.maxTeamMembers,percentage:e.maxTeamMembers>0?Math.min(n/e.maxTeamMembers*100,100):0},services:{used:r,limit:e.maxServices,percentage:e.maxServices>0?Math.min(r/e.maxServices*100,100):0},customers:{used:s,limit:e.maxCustomers,percentage:e.maxCustomers>0?Math.min(s/e.maxCustomers*100,100):0}}};return{subscriptionPlans:t,currentUsage:r,currentPlan:g(),limits:b(),usageStats:v(),loading:l,error:u,canPerformAction:e=>{const t=b();switch(e){case"add_team_member":return-1===t.maxTeamMembers||a.filter(e=>"active"===e.status).length<t.maxTeamMembers;case"create_appointment":return-1===t.maxAppointmentsPerMonth||o.length<t.maxAppointmentsPerMonth;case"add_service":return-1===t.maxServices||i.length<t.maxServices;default:return!0}},hasFeature:e=>!0===b().features[e],isNearLimit:e=>{const t=v();switch(e){case"appointments":return t.appointments.percentage>=80;case"team_members":return t.teamMembers.percentage>=80;case"services":return t.services.percentage>=80;case"customers":return t.customers.percentage>=80;default:return!1}},getUpgradeRecommendation:()=>{const e=g(),n=v(),r=t.filter(t=>t.sort_order>(e?.sort_order||0)).sort((e,t)=>e.sort_order-t.sort_order);for(const t of r)if(n.appointments.percentage>=80&&t.max_appointments_per_month>n.appointments.limit||n.teamMembers.percentage>=80&&t.max_team_members>n.teamMembers.limit||n.services.percentage>=80&&t.max_services>n.services.limit||n.customers.percentage>=80&&t.max_customers>n.customers.limit)return t;return r[0]||null},loadSubscriptionPlans:h,loadCurrentUsage:f,updateUsage:async e=>{if(r?.id)try{const{data:t,error:n}=await di.from("subscription_usage").update({...e,updated_at:(new Date).toISOString()}).eq("id",r.id).select().single();if(n)throw n;s(t)}catch(t){console.error("Failed to update usage:",t)}}}}function wl(e){const{currentBusiness:t}=yl();xl();const{appointments:n,setAppointments:r,updateAppointment:s,user:a}=vt(),i=m.useCallback(async()=>{if(e&&a?.id&&t?.id){console.log("Fetching business appointments (RLS enabled):",e);try{const{data:e,error:n}=await di.from("appointments").select("*").eq("business_id",t.id).order("start_time",{ascending:!1}).limit(1e3);if(n){if(console.error("Supabase error:",n),"PGRST301"===n.code||n.message?.includes("permission denied")){console.warn("RLS blocking appointment fetch, trying alternative approach");const{data:e,error:n}=await di.from("appointments").select("*").order("start_time",{ascending:!1}).limit(1e3);if(n)throw console.error("Alternative fetch also failed:",n),n;const s=e?.filter(e=>e.business_id===t.id)||[];console.log("Fetched appointments (client-filtered):",s);const a=s.map(e=>e.was_edited&&"BOOKED"===e.status?(console.log(`Found edited appointment: ${e.customer_name}`),{...e,status:"BOOKED",display_status:"EDITED"}):e),i=a.map(e=>{if(e.previous_external_id&&"BOOKED"===e.status){const t=a.find(t=>t.external_id===e.previous_external_id);return{...e,status:"BOOKED",display_status:"RESCHEDULED",previous_appointment:t?{external_id:t.external_id,start_time:t.start_time,end_time:t.end_time,location:t.location,service_name:t.service_name,cancellation_type:t.cancellation_type}:void 0}}return e}).filter(e=>!0);return console.log("Processed appointments:",a),console.log("Visible appointments:",i),void r(i)}throw n}console.log("Fetched appointments:",e);const{data:s,error:a}=await di.from("appointment_history").select("id, appointment_external_id, action, source, previous_data, new_data, changed_by, created_at").in("appointment_external_id",e?.map(e=>e.external_id)||[]);if(a)throw console.error("History fetch error:",a),a;const i=(e||[]).map(e=>{let t=e.web_meeting_url,n=e.customer_notes;if(e.raw_payload)try{const r=JSON.parse(e.raw_payload);if(r.appointment){if(!t&&r.appointment.web_meeting_url&&(t=r.appointment.web_meeting_url),!n&&r.appointment.notes&&(n=r.appointment.notes),!n&&r.appointment.customer_notes&&(n=r.appointment.customer_notes),!n&&r.appointment.additional_info&&(n=r.appointment.additional_info),r.appointment.customer_information&&r.appointment.customer_information.Note){n=`Customer Note: ${r.appointment.customer_information.Note}`}if(!n&&r.appointment["Help Us Be Prepared To Serve You Better, Fast!"]&&(n=r.appointment["Help Us Be Prepared To Serve You Better, Fast!"]),!n)for(const[e,t]of Object.entries(r.appointment))if("string"==typeof t&&t.includes("Help Us Be Prepared To Serve You Better, Fast!")){n=t;break}}}catch(r){console.warn(`Failed to parse raw_payload for appointment ${e.external_id}:`,r)}return(s||[]).filter(t=>t.appointment_external_id===e.external_id).sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()).some(e=>{if(e.previous_data&&e.new_data){return["customer_name","customer_email","customer_phone","service_name","location","customer_notes","vehicle_make_model","web_meeting_url"].some(t=>{const n=e.previous_data[t],r=e.new_data[t];return n!==r&&null!==n&&null!==r})}return!1})&&"BOOKED"===e.status?(console.log(`Found edited appointment: ${e.customer_name}`),{...e,web_meeting_url:t,customer_notes:n,status:"BOOKED",display_status:"EDITED",was_edited:!0}):{...e,web_meeting_url:t,customer_notes:n}}),o=i.map(e=>{if(e.previous_external_id&&"BOOKED"===e.status){const t=i.find(t=>t.external_id===e.previous_external_id);return{...e,status:"BOOKED",display_status:"RESCHEDULED",previous_appointment:t?{external_id:t.external_id,start_time:t.start_time,end_time:t.end_time,location:t.location,service_name:t.service_name,cancellation_type:t.cancellation_type}:void 0}}return e}).filter(e=>!0);console.log("Processed appointments:",i),console.log("Visible appointments:",o),r(o)}catch(n){console.error("Failed to fetch appointments:",n)}}},[e,a?.id,r]);return m.useEffect(()=>{if(!e||!a?.id||!t?.id)return;i();const n=(r=t.id,o=async e=>{"INSERT"===e.eventType?await i():"UPDATE"===e.eventType?e.new&&s(e.new.id,e.new):"DELETE"===e.eventType&&vt.getState().removeAppointment(e.old.id)},di.channel(`appointments-${r}`).on("postgres_changes",{event:"*",schema:"public",table:"appointments",filter:`business_id=eq.${r}`},o).subscribe());var r,o;return()=>{n.unsubscribe()}},[e,a?.id,t?.id,i,s]),{appointments:n,refetch:i}}function _l(){const{isOnline:e,setIsOnline:t}=vt();return m.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[t]),e}const jl=vi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",booked:"border-transparent bg-blue-500 text-white hover:bg-blue-600",confirmed:"border-transparent bg-green-500 text-white hover:bg-green-600",completed:"border-transparent bg-gray-500 text-white hover:bg-gray-600",cancelled:"border-transparent bg-red-500 text-white hover:bg-red-600",cancelled_reschedule:"border-transparent bg-orange-500 text-white hover:bg-orange-600 border-orange-300",cancelled_final:"border-transparent bg-red-500 text-white hover:bg-red-600 border-red-300",rescheduled:"border-transparent bg-orange-500 text-white hover:bg-orange-600",reschedule_group:"border-transparent bg-gradient-to-r from-orange-500 to-blue-500 text-white hover:from-orange-600 hover:to-blue-600",edited:"border-transparent bg-purple-500 text-white hover:bg-purple-600"}},defaultVariants:{variant:"default"}}),kl=m.forwardRef(({className:e,variant:t,...n},r)=>f.jsx("div",{ref:r,className:ho(jl({variant:t}),e),...n}));kl.displayName="Badge";const Nl=6048e5,Sl=6e4,El=36e5,Cl=Symbol.for("constructDateFrom");function Tl(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Cl in e?e[Cl](t):e instanceof Date?new e.constructor(t):new Date(t)}function Pl(e,t){return Tl(t||e,e)}function Ol(e,t,n){const r=Pl(e,n?.in);return isNaN(t)?Tl(e,NaN):t?(r.setDate(r.getDate()+t),r):r}let Rl={};function Al(){return Rl}function Il(e,t){const n=Al(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Pl(e,t?.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Dl(e,t){return Il(e,{...t,weekStartsOn:1})}function Ml(e,t){const n=Pl(e,t?.in),r=n.getFullYear(),s=Tl(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Dl(s),i=Tl(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Dl(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Ll(e){const t=Pl(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function $l(e,...t){const n=Tl.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}function Fl(e,t){const n=Pl(e,t?.in);return n.setHours(0,0,0,0),n}function zl(e,t,n){const r=Pl(e,n?.in);return r.setTime(r.getTime()+t*Sl),r}function Ul(e){return Tl(e,Date.now())}function Bl(e,t,n){const[r,s]=$l(0,e,t);return+Fl(r)===+Fl(s)}function Wl(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Pl(e)));var t}function Hl(e,t,n){const r=(s=t,(+Pl(e)-+Pl(s))/Sl);var s,a;return(a=n?.roundingMethod,e=>{const t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(r)}function ql(e,t){const n=Pl(e,t?.in);return n.setHours(23,59,59,999),n}function Vl(e,t){const n=Pl(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Kl(e,t){const n=Pl(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Gl(e,t){const n=Al(),r=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Pl(e,t?.in),a=s.getDay(),i=6+(a<r?-7:0)-(a-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const Yl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Jl(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Ql={date:Jl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Jl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Jl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Xl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Zl(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=n?.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=n?.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const ec={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Zl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Zl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Zl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Zl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Zl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function tc(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const nc={ordinalNumber:(rc={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(rc.matchPattern);if(!n)return null;const r=n[0],s=e.match(rc.parsePattern);if(!s)return null;let a=rc.valueCallback?rc.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:tc({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tc({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tc({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tc({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tc({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var rc;const sc={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=Yl[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Ql,formatRelative:(e,t,n,r)=>Xl[e],localize:ec,match:nc,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ac(e,t){const n=Pl(e,t?.in),r=function(e,t){const[n,r]=$l(0,e,t),s=Fl(n),a=Fl(r),i=+s-Ll(s),o=+a-Ll(a);return Math.round((i-o)/864e5)}(n,function(e,t){const n=Pl(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return r+1}function ic(e,t){const n=Pl(e,t?.in),r=+Dl(n)-+function(e,t){const n=Ml(e,t),r=Tl(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Dl(r)}(n);return Math.round(r/Nl)+1}function oc(e,t){const n=Pl(e,t?.in),r=n.getFullYear(),s=Al(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=Tl(t?.in||e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=Il(i,t),l=Tl(t?.in||e,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=Il(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function lc(e,t){const n=Pl(e,t?.in),r=+Il(n,t)-+function(e,t){const n=Al(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=oc(e,t),a=Tl(t?.in||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Il(a,t)}(n,t);return Math.round(r/Nl)+1}function cc(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const uc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cc("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):cc(n+1,2)},d:(e,t)=>cc(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>cc(e.getHours()%12||12,t.length),H:(e,t)=>cc(e.getHours(),t.length),m:(e,t)=>cc(e.getMinutes(),t.length),s:(e,t)=>cc(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return cc(Math.trunc(r*Math.pow(10,n-3)),t.length)}},dc="midnight",hc="noon",fc="morning",mc="afternoon",pc="evening",gc="night",bc={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return uc.y(e,t)},Y:function(e,t,n,r){const s=oc(e,r),a=s>0?s:1-s;if("YY"===t){return cc(a%100,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):cc(a,t.length)},R:function(e,t){return cc(Ml(e),t.length)},u:function(e,t){return cc(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cc(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cc(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return uc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cc(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=lc(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):cc(s,t.length)},I:function(e,t,n){const r=ic(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):cc(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):uc.d(e,t)},D:function(e,t,n){const r=ac(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):cc(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return cc(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return cc(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return cc(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?hc:0===r?dc:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?pc:r>=12?mc:r>=4?fc:gc,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return uc.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):uc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):cc(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):cc(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):uc.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):uc.s(e,t)},S:function(e,t){return uc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return yc(r);case"XXXX":case"XX":return xc(r);default:return xc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return yc(r);case"xxxx":case"xx":return xc(r);default:return xc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vc(r,":");default:return"GMT"+xc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vc(r,":");default:return"GMT"+xc(r,":")}},t:function(e,t,n){return cc(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return cc(+e,t.length)}};function vc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return 0===a?n+String(s):n+String(s)+t+cc(a,2)}function yc(e,t){if(e%60==0){return(e>0?"-":"+")+cc(Math.abs(e)/60,2)}return xc(e,t)}function xc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+cc(Math.trunc(r/60),2)+t+cc(r%60,2)}const wc=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},_c=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},jc={p:_c,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return wc(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",wc(r,t)).replace("{{time}}",_c(s,t))}},kc=/^D+$/,Nc=/^Y+$/,Sc=["D","DD","YY","YYYY"];const Ec=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tc=/^'([^]*?)'?$/,Pc=/''/g,Oc=/[a-zA-Z]/;function Rc(e,t,n){const r=Al(),s=r.locale??sc,a=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Pl(e,n?.in);if(!Wl(o))throw new RangeError("Invalid time value");let l=t.match(Cc).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,jc[t])(e,s.formatLong)}return e}).join("").match(Ec).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ac(e)};if(bc[t])return{isToken:!0,value:e};if(t.match(Oc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return l.map(n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return Nc.test(e)}(r)||function(e){return kc.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),Sc.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,bc[r[0]])(o,r,s.localize,c)}).join("")}function Ac(e){const t=e.match(Tc);return t?t[1].replace(Pc,"'"):e}function Ic(e,t,n){const r=+Pl(e,n?.in),[s,a]=[+Pl(t.start,n?.in),+Pl(t.end,n?.in)].sort((e,t)=>e-t);return r>=s&&r<=a}function Dc(e,t){const n=()=>Tl(t?.in,NaN),r=function(e){const t={},n=e.split(Mc.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Mc.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Mc.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=Mc.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let s;if(r.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?s:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(r.date,2);s=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Lc);if(!n)return new Date(NaN);const r=!!n[4],s=zc(n[1]),a=zc(n[2])-1,i=zc(n[3]),o=zc(n[4]),l=zc(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,a=7*(t-1)+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Bc[t]||(Wc(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(Wc(e)?366:365)}(t,s)?(e.setUTCFullYear(t,a,Math.max(s,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return n();const a=+s;let i,o=0;if(r.time&&(o=function(e){const t=e.match($c);if(!t)return NaN;const n=Uc(t[1]),r=Uc(t[2]),s=Uc(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,s))return NaN;return n*El+r*Sl+1e3*s}(r.time),isNaN(o)))return n();if(!r.timezone){const e=new Date(a+o),n=Pl(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return i=function(e){if("Z"===e)return 0;const t=e.match(Fc);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,s))return NaN;return n*(r*El+s*Sl)}(r.timezone),isNaN(i)?n():Pl(a+o+i,t?.in)}const Mc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Lc=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Fc=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zc(e){return e?parseInt(e):1}function Uc(e){return e&&parseFloat(e.replace(",","."))||0}const Bc=[31,null,31,30,31,30,31,31,30,31,30,31];function Wc(e){return e%400==0||e%4==0&&e%100!=0}function Hc(e,t,n){return function(e,t,n){return Ol(e,7*t,n)}(e,-1,n)}function qc({appointment:e,onClick:t}){const[n,r]=m.useState(!1),s=new Date(e.start_time),a=new Date(e.end_time),i=e.previous_appointment;return f.jsxs(po,{onClick:t,className:"p-4 sm:p-6 hover:shadow-2xl hover:shadow-blue-100/50 transition-all duration-300 cursor-pointer bg-gradient-to-br from-white to-slate-50 border-2 hover:border-blue-300 rounded-2xl",children:["EDITED"===e.display_status&&f.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-purple-50 via-purple-100 to-purple-50 border-l-4 border-purple-500 rounded-xl shadow-lg animate-fade-in",children:[f.jsxs("div",{className:"flex items-center gap-2 text-purple-800 mb-2",children:[f.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-full animate-pulse shadow-sm"}),f.jsx("span",{className:"text-sm font-bold tracking-wide",children:" Customer Edited"})]}),f.jsx("p",{className:"text-xs text-purple-700 leading-relaxed font-medium",children:"Customer information was updated. Check history for details."}),f.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:f.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-200 text-purple-800 text-xs rounded-full font-semibold shadow-sm",children:[f.jsx(Mo,{className:"w-3 h-3"}),"Info Changed"]})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4 gap-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-1 truncate",children:e.customer_name}),f.jsx("p",{className:"text-sm text-slate-600 font-medium bg-slate-100 inline-block px-2 py-1 rounded-full truncate",children:e.service_name})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[i&&f.jsx(mo,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),r(!n)},"aria-controls":`reschedule-history-${e.id}`,"aria-expanded":n,className:"text-xs border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400 transition-all duration-200 min-h-[44px] w-full sm:w-auto",children:f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-orange-600",children:""}),"Rescheduled",n?f.jsx(Do,{className:"w-3 h-3"}):f.jsx(Io,{className:"w-3 h-3"})]})}),f.jsx(kl,{variant:"CANCELLED"===e.status?"reschedule"===e.cancellation_type?"cancelled_reschedule":"cancelled_final":e.status.toLowerCase(),className:`text-xs font-bold px-3 py-1 rounded-full shadow-sm ${"CANCELLED"===e.status?void 0:{BOOKED:"bg-blue-100 text-blue-800",CONFIRMED:"bg-green-100 text-green-800",COMPLETED:"bg-slate-100 text-slate-800",CANCELLED:"bg-red-100 text-red-800",CANCELLED_RESCHEDULE:"bg-orange-100 text-orange-800 border-orange-300",CANCELLED_FINAL:"bg-red-100 text-red-800 border-red-300",RESCHEDULED:"bg-orange-100 text-orange-800",EDITED:"bg-blue-100 text-blue-800 border-purple-300"}[e.status]}`,children:"RESCHEDULED"===e.display_status?"BOOKED (Rescheduled)":"EDITED"===e.display_status?"BOOKED (Edited)":"CANCELLED"===e.status?"reschedule"===e.cancellation_type?"CANCELLED (Reschedule)":"CANCELLED (Final)":e.status})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-3 text-slate-700 bg-slate-50 p-3 rounded-lg hover:bg-slate-100 transition-colors duration-200",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:f.jsx(Po,{className:"w-4 h-4 text-blue-600"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-slate-900",children:Rc(s,"MMM dd, yyyy")}),f.jsx("span",{className:"block text-xs text-slate-500",children:"Date"})]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-slate-700 bg-slate-50 p-3 rounded-lg hover:bg-slate-100 transition-colors duration-200",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:f.jsx(Fo,{className:"w-4 h-4 text-green-600"})}),f.jsxs("div",{children:[f.jsxs("span",{className:"font-medium text-slate-900",children:[Rc(s,"HH:mm")," - ",Rc(a,"HH:mm")]}),f.jsx("span",{className:"block text-xs text-slate-500",children:"Time"})]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-slate-700 bg-slate-50 p-3 rounded-lg hover:bg-slate-100 transition-colors duration-200 sm:col-span-2",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:f.jsx(Qo,{className:"w-4 h-4 text-red-600"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium text-slate-900 break-words",children:e.location}),f.jsx("span",{className:"block text-xs text-slate-500",children:"Location"})]})]}),e.vehicle_make_model&&f.jsxs("div",{className:"flex items-center gap-3 text-slate-700 bg-slate-50 p-3 rounded-lg hover:bg-slate-100 transition-colors duration-200 sm:col-span-2",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:f.jsx(gl,{className:"w-4 h-4 text-yellow-600"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("span",{className:"font-medium text-slate-900 break-words",children:e.vehicle_make_model}),f.jsx("span",{className:"block text-xs text-slate-500",children:"Vehicle"})]})]}),e.customer_phone&&f.jsxs("div",{className:"flex items-center gap-3 text-slate-700 bg-slate-50 p-3 rounded-lg hover:bg-slate-100 transition-colors duration-200 sm:col-span-2",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:f.jsx(Zo,{className:"w-4 h-4 text-purple-600"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium text-slate-900 break-words",children:e.customer_phone}),f.jsx("span",{className:"block text-xs text-slate-500",children:"Phone"})]})]}),e.web_meeting_url&&f.jsx("div",{className:"sm:col-span-2",children:f.jsxs("a",{href:e.web_meeting_url,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex items-center gap-3 text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-3 rounded-lg transition-all duration-200 group",children:[f.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:f.jsx(fl,{className:"w-4 h-4 text-blue-600"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium underline",children:"Join Meeting"}),f.jsx("span",{className:"block text-xs text-blue-500",children:"Click to open"})]}),f.jsx(Wo,{className:"w-4 h-4 opacity-50 group-hover:opacity-100 transition-opacity"})]})})]}),e.customer_notes&&f.jsxs("div",{className:"mt-3 p-2 bg-slate-50 rounded text-sm text-slate-700",children:[f.jsx("p",{className:"font-medium mb-1",children:"Notes:"}),f.jsx("p",{className:"break-words",children:e.customer_notes}),e.customer_notes.includes("Meeting:")&&f.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:(()=>{const t=e.customer_notes.match(/Meeting:\s*(https:\/\/[^\s]+)/);return t?f.jsxs("a",{href:t[1],target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 underline text-xs",children:[f.jsx(Wo,{className:"w-3 h-3"}),"Join Meeting"]}):null})()})]}),i&&f.jsx("div",{id:`reschedule-history-${e.id}`,className:"mt-4 overflow-hidden transition-all duration-500 ease-in-out "+(n?"max-h-[1000px] opacity-100 scale-100":"max-h-0 opacity-0 scale-95"),children:f.jsxs("div",{className:"border-t-2 border-orange-300 pt-4 space-y-4 bg-gradient-to-r from-orange-50/50 to-orange-100/50 p-4 rounded-xl",children:[f.jsxs("h4",{className:"font-bold text-base text-slate-800 flex items-center gap-3",children:[f.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse shadow-sm"}),f.jsx("span",{className:"text-orange-700",children:"Reschedule History"})]}),e.previous_appointment&&f.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[f.jsxs("h5",{className:"font-medium text-sm text-orange-800 mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"text-orange-600",children:""}),"What Changed"]}),f.jsx("div",{className:"space-y-3 text-xs",children:(()=>{const t=[],n=e.previous_appointment;return n&&(n.start_time===e.start_time&&n.end_time===e.end_time||t.push(f.jsxs("div",{className:"bg-white p-2 rounded border",children:[f.jsx("span",{className:"text-slate-600 font-medium block mb-1",children:"Time:"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-red-600 text-xs font-medium",children:"Previous:"}),f.jsx("div",{className:"text-red-700 font-mono",children:Rc(new Date(n.start_time),"MMM dd, yyyy HH:mm")})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-green-600 text-xs font-medium",children:"Current:"}),f.jsx("div",{className:"text-green-700 font-mono",children:Rc(s,"MMM dd, yyyy HH:mm")})]})]})]},"time")),n.location!==e.location&&t.push(f.jsxs("div",{className:"bg-white p-2 rounded border",children:[f.jsx("span",{className:"text-slate-600 font-medium block mb-1",children:"Location:"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-red-600 text-xs font-medium",children:"Previous:"}),f.jsx("div",{className:"text-red-700 break-words",children:n.location})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-green-600 text-xs font-medium",children:"Current:"}),f.jsx("div",{className:"text-green-700 break-words",children:e.location})]})]})]},"location")),n.service_name!==e.service_name&&t.push(f.jsxs("div",{className:"bg-white p-2 rounded border",children:[f.jsx("span",{className:"text-slate-600 font-medium block mb-1",children:"Service:"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-red-600 text-xs font-medium",children:"Previous:"}),f.jsx("div",{className:"text-red-700 break-words",children:n.service_name})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-green-600 text-xs font-medium",children:"Current:"}),f.jsx("div",{className:"text-green-700 break-words",children:e.service_name})]})]})]},"service"))),t.length>0?t:f.jsx("div",{className:"text-slate-500 italic text-center py-2",children:"No specific changes detected"})})()})]}),f.jsxs("div",{className:"bg-white p-4 rounded-xl border-2 border-slate-300 shadow-lg",children:[f.jsxs("h5",{className:"font-bold text-base text-slate-800 mb-4 flex items-center gap-3",children:[f.jsx("div",{className:"w-4 h-4 bg-slate-500 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-white text-xs",children:""})}),"External ID Trail"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[f.jsxs("div",{className:"bg-white p-2 rounded border",children:[f.jsx("span",{className:"text-slate-600 font-medium block",children:"Previous:"}),f.jsx("code",{className:"bg-slate-200 px-2 py-1 rounded text-slate-800 font-mono text-xs block mt-1 break-all",children:e.previous_appointment.external_id})]}),f.jsxs("div",{className:"bg-white p-2 rounded border",children:[f.jsx("span",{className:"text-slate-600 font-medium block",children:"Current:"}),f.jsx("code",{className:"bg-slate-200 px-2 py-1 rounded text-slate-800 font-mono text-xs block mt-1 break-all",children:e.external_id})]})]})]})]})})]})}function Vc({appointment:e,onStatusChange:t}){fi();const[n,r]=m.useState(!1),[s,a]=m.useState(null),i=async n=>{r(!0),a(null);try{await hi(e.external_id,"EDIT","user",{status:e.status},{status:n},useAppStore.getState().user?.id,`Status changed from ${e.status} to ${n}`);const{error:r}=await di.from("appointments").update({status:n,updated_at:(new Date).toISOString()}).eq("id",e.id);if(r)throw r;t?.(n)}catch(s){a(s instanceof Error?s.message:"Failed to update appointment")}finally{r(!1)}},o=()=>{confirm("Are you sure you want to confirm this appointment? This action cannot be undone.")&&i("CONFIRMED")},l=()=>{confirm(" WARNING: Are you sure you want to cancel this appointment? This action cannot be undone and will notify the customer.")&&i("CANCELLED")},c={BOOKED:[{label:"Edit",action:()=>window.dispatchEvent(new CustomEvent("edit-appointment",{detail:e})),variant:"outline"},{label:"Confirm",action:o,variant:"default"},{label:"Cancel",action:l,variant:"destructive"}],EDITED:[{label:"Edit",action:()=>window.dispatchEvent(new CustomEvent("edit-appointment",{detail:e})),variant:"outline"},{label:"Confirm",action:o,variant:"default"},{label:"Cancel",action:l,variant:"destructive"}],CONFIRMED:[{label:"Complete",action:()=>{confirm("Are you sure you want to mark this appointment as completed? This action cannot be undone.")&&i("COMPLETED")},variant:"default"},{label:"Cancel",action:l,variant:"destructive"}],COMPLETED:[],CANCELLED:[],RESCHEDULED:[{label:"Confirm",action:o,variant:"default"},{label:"Cancel",action:l,variant:"destructive"}]}[e.status]||[];return 0===c.length?null:f.jsxs(po,{className:"p-4 bg-slate-50",children:[s&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:s})]}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:c.map(e=>f.jsxs(mo,{onClick:e.action,disabled:n,variant:e.variant,size:"sm",className:"",children:[n&&f.jsx(Go,{className:"w-4 h-4 mr-2 animate-spin"}),e.label]},e.label))})]})}function Kc({externalId:e}){const[t,n]=m.useState([]),[r,s]=m.useState(!0);m.useEffect(()=>{a()},[e]);const a=async()=>{try{const{data:t,error:r}=await di.from("appointment_history").select("id, appointment_external_id, action, source, previous_data, new_data, changed_by, notes, created_at").eq("appointment_external_id",e).order("created_at",{ascending:!1});if(r)throw r;n(t||[])}catch(t){console.error("Failed to fetch history:",t)}finally{s(!1)}};return r?f.jsxs(po,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(qo,{className:"w-5 h-5"}),f.jsx("h3",{className:"text-lg font-semibold",children:"Change History"})]}),f.jsxs("div",{className:"flex items-center justify-center py-8",children:[f.jsx(Ko,{className:"w-6 h-6 animate-spin text-slate-400"}),f.jsx("span",{className:"ml-2 text-slate-600",children:"Loading history..."})]})]}):f.jsxs(po,{className:"p-6 ",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(qo,{className:"w-5 h-5"}),f.jsx("h3",{className:"text-lg font-semibold",children:"Change History"})]}),0===t.length?f.jsx("p",{className:"text-slate-600 text-center py-4",children:"No changes recorded"}):f.jsx("div",{className:"space-y-3 ",children:t.map(e=>f.jsx("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:f.jsxs("div",{className:"flex-1 ",children:[f.jsx("p",{className:"font-medium text-sm capitalize ",children:"EDIT"===e.action&&"user"===e.source?"Edited by Staff":"EDIT"!==e.action||"customer"!==e.source&&"webhook"!==e.source?e.action:"Edited by Customer"}),f.jsx("p",{className:"text-xs text-slate-600",children:Rc(new Date(e.created_at),"MMM dd, yyyy HH:mm:ss")}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Changed by:"," ",f.jsx("span",{className:"font-medium",children:e.changed_by}),e.source&&f.jsx("span",{className:"ml-2 px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:e.source})]}),e.previous_data&&e.new_data&&f.jsxs("div",{className:"mt-2 text-xs ",children:[f.jsx("p",{className:"text-slate-600 mb-1 wrap-break-word",children:"Changes:"}),Object.keys(e.new_data).map(t=>{if(e.previous_data[t]!==e.new_data[t]){const n=e=>null==e?"null":"object"==typeof e?"[object]":String(e);return f.jsxs("div",{className:"flex gap-2 mb-1",children:[f.jsxs("span",{className:"text-slate-500 font-medium",children:[t,":"]}),f.jsx("span",{className:"text-red-600 line-through flex-1 break-words overflow-wrap-anywhere",children:n(e.previous_data[t])}),f.jsx("span",{className:"text-slate-400",children:""}),f.jsx("span",{className:"text-green-600 flex-1 break-words overflow-wrap-anywhere",children:n(e.new_data[t])})]},t)}return null})]})]})},e.id))})]})}const Gc=p.memo(function({appointment:e,onClose:t}){const[n,r]=m.useState(!1),[s,a]=m.useState(e),[i,o]=m.useState({customer:!0,service:!0,vehicle:!1,notes:!1,system:!1}),[l,c]=m.useState(null),u=m.useRef(null),{isOnline:d}=vt(),h=m.useCallback(e=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},[]),p=m.useCallback(e=>{o(t=>({...t,[e]:!t[e]}))},[]),g=m.useCallback(e=>{"Escape"===e.key&&t()},[t]),b=m.useCallback(e=>{c(e.touches[0].clientY)},[]),v=m.useCallback(e=>{if(null===l)return;e.changedTouches[0].clientY-l>100&&t(),c(null)},[l,t]),y=m.useCallback(()=>{window.print()},[]),x=m.useCallback(async()=>{if(navigator.share)try{await navigator.share({title:`Appointment: ${e.customer_name}`,text:`Appointment with ${e.customer_name} for ${e.service_name}`,url:window.location.href})}catch(t){console.log("Error sharing:",t)}else h(`${e.customer_name} - ${e.service_name}`)},[e,h]);m.useEffect(()=>(document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)),[g]);const w=m.useMemo(()=>new Date(e.start_time),[e.start_time]),_=m.useMemo(()=>new Date(e.end_time),[e.end_time]),j=m.useMemo(()=>Hl(_,w),[w,_]),k=m.useMemo(()=>({BOOKED:"booked",CONFIRMED:"confirmed",COMPLETED:"completed",CANCELLED:"cancelled",RESCHEDULED:"rescheduled",EDITED:"edited"}[s.status]||"default"),[s.status]),N=m.useMemo(()=>({BOOKED:Po,CONFIRMED:Fo,COMPLETED:hl,CANCELLED:Mo,RESCHEDULED:Po,EDITED:Ho}[s.status]||Po),[s.status]);return f.jsx("div",{className:"fixed inset-0 bg-white/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto animate-in fade-in duration-200",onTouchStart:b,onTouchEnd:v,role:"dialog","aria-modal":"true","aria-labelledby":"appointment-detail-title",children:f.jsxs(po,{ref:u,className:"w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[f.jsxs("div",{className:"sticky top-0 flex items-center justify-between p-4 border-b bg-white shadow-sm",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h2",{id:"appointment-detail-title",className:"text-xl font-bold text-slate-900",children:"Appointment Details"}),!d&&f.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[f.jsx(ml,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-medium",children:"Offline"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mo,{variant:"ghost",size:"icon",onClick:y,className:"hidden sm:flex h-8 w-8","aria-label":"Print appointment",children:f.jsx(tl,{className:"w-4 h-4"})}),f.jsx(mo,{variant:"ghost",size:"icon",onClick:x,className:"h-8 w-8","aria-label":"Share appointment",children:f.jsx(ol,{className:"w-4 h-4"})}),f.jsx(mo,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Close modal",children:f.jsx(bl,{className:"w-5 h-5"})})]})]}),f.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:f.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-4 bg-slate-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(N,{className:"w-5 h-5 text-slate-600"}),f.jsx("h3",{className:"font-semibold text-slate-900",children:"Status"})]}),f.jsx(kl,{variant:k,className:"w-fit",children:"EDITED"===s.status?"BOOKED (Edited)":s.status})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>p("customer"),className:"flex items-center justify-between w-full text-left","aria-expanded":i.customer,children:[f.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(hl,{className:"w-5 h-5"}),"Customer Information"]}),i.customer?f.jsx(Do,{className:"w-4 h-4 text-slate-700"}):f.jsx(Io,{className:"w-4 h-4 text-slate-700"})]}),i.customer&&f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 pl-4 sm:pl-6 border-l-2 border-slate-200",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(hl,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Name"}),f.jsx("p",{className:"font-medium text-slate-900",children:s.customer_name})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Jo,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Email"}),f.jsx("p",{className:"font-medium text-slate-900",children:s.customer_email})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Zo,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Phone"}),f.jsx("p",{className:"font-medium text-slate-900",children:s.customer_phone})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Qo,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Location"}),f.jsx("p",{className:"font-medium text-slate-900",children:s.location})]})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>p("service"),className:"flex items-center justify-between w-full text-left","aria-expanded":i.service,children:[f.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(Po,{className:"w-5 h-5"}),"Service Details"]}),i.service?f.jsx(Do,{className:"w-4 h-4 text-slate-700"}):f.jsx(Io,{className:"w-4 h-4 text-slate-700"})]}),i.service&&f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 pl-4 sm:pl-6 border-l-2 border-slate-200",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ho,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Service"}),f.jsx("p",{className:"font-medium text-slate-900",children:s.service_name})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Po,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Date"}),f.jsx("p",{className:"font-medium text-slate-900",children:Rc(w,"MMMM dd, yyyy")})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Fo,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Time"}),f.jsxs("p",{className:"font-medium text-slate-900",children:[Rc(w,"HH:mm")," -"," ",Rc(_,"HH:mm"),f.jsxs("span",{className:"text-xs text-slate-600 ml-2",children:["(",j," min)"]})]})]})]}),s.web_meeting_url&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Wo,{className:"w-5 h-5 text-slate-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Meeting Link"}),f.jsx("a",{href:s.web_meeting_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:text-blue-800 underline",children:"Join Meeting"})]})]})]})]}),s.vehicle_make_model&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>p("vehicle"),className:"flex items-center justify-between w-full text-left","aria-expanded":i.vehicle,children:[f.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(Oo,{className:"w-5 h-5"}),"Vehicle Information"]}),i.vehicle?f.jsx(Do,{className:"w-4 h-4 text-slate-700"}):f.jsx(Io,{className:"w-4 h-4 text-slate-700"})]}),i.vehicle&&f.jsx("div",{className:"pl-4 sm:pl-6 border-l-2 border-slate-200",children:f.jsxs("p",{className:"font-medium text-slate-900 flex items-center gap-2",children:[f.jsx(Oo,{className:"w-5 h-5 text-slate-600"}),s.vehicle_make_model]})})]}),s.customer_notes&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>p("notes"),className:"flex items-center justify-between w-full text-left","aria-expanded":i.notes,children:[f.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(Ho,{className:"w-5 h-5"}),"Notes"]}),i.notes?f.jsx(Do,{className:"w-4 h-4 text-slate-700"}):f.jsx(Io,{className:"w-4 h-4 text-slate-700"})]}),i.notes&&f.jsx("div",{className:"pl-4 sm:pl-6 border-l-2 border-slate-200",children:f.jsxs("div",{className:"text-slate-700 whitespace-pre-wrap bg-slate-50 p-3 rounded-lg",children:[s.customer_notes,s.customer_notes.includes("Meeting:")&&f.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[f.jsx("p",{className:"text-sm font-medium text-slate-600 mb-2",children:"Meeting Link:"}),(()=>{const e=s.customer_notes.match(/Meeting:\s*(https:\/\/[^\s]+)/);return e?f.jsxs("a",{href:e[1],target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 underline",children:[f.jsx(Wo,{className:"w-4 h-4"}),"Join Meeting"]}):null})()]})]})})]}),f.jsx(Vc,{appointment:s,onStatusChange:e=>a(t=>({...t,status:e}))}),"History",f.jsx(m.Suspense,{fallback:f.jsxs(po,{className:"p-6 wrap-break-word",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4 wrap-break-word",children:[f.jsx(qo,{className:"w-5 h-5 wrap-break-word"}),f.jsx("h3",{className:"text-lg font-semibold ",children:"Change History"})]}),f.jsxs("div",{className:"flex items-center justify-center py-8 wrap-break-word",children:[f.jsx(Ko,{className:"w-6 h-6 animate-spin text-slate-400 wrap-break-word"}),f.jsx("span",{className:"ml-2 text-slate-600",children:"Loading history..."})]})]}),children:f.jsx(Kc,{externalId:s.external_id})}),"RESCHEDULED"===s.status&&f.jsxs(po,{className:"p-4 bg-orange-50 border-orange-200",children:[f.jsxs("h4",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[f.jsx(Mo,{className:"w-4 h-4"}),"Rescheduled Appointment"]}),f.jsx("p",{className:"text-sm text-orange-700",children:"This appointment was cancelled and rescheduled to a new date/time. Check the appointment list for the new booking with the same customer."})]}),"EDITED"===s.status&&f.jsxs(po,{className:"p-4 bg-purple-50 border-purple-200 wrap-break-word",children:[f.jsxs("h4",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[f.jsx(Ho,{className:"w-4 h-4"}),"Appointment Edited"]}),f.jsx("p",{className:"text-sm text-purple-700",children:"Customer information was updated for this appointment. View the change history below for details."})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>p("system"),className:"flex items-center justify-between w-full text-left","aria-expanded":i.system,children:[f.jsxs("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[f.jsx(Mo,{className:"w-4 h-4"}),"System Information"]}),i.system?f.jsx(Do,{className:"w-4 h-4 text-slate-500"}):f.jsx(Io,{className:"w-4 h-4 text-slate-500"})]}),i.system&&f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 pl-4 sm:pl-6 border-l-2 border-slate-200 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-slate-600 uppercase tracking-wide text-xs",children:"External ID"}),f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded text-xs font-mono",children:s.external_id}),f.jsx(mo,{variant:"ghost",size:"icon",onClick:()=>h(s.external_id),className:"h-6 w-6","aria-label":"Copy external ID",children:f.jsx(zo,{className:"w-3 h-3"})}),n&&f.jsx("span",{className:"text-xs text-green-600 animate-in fade-in",children:"Copied!"})]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-slate-600 uppercase tracking-wide text-xs",children:"Source"}),f.jsx("p",{className:"font-medium mt-1",children:s.source})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-slate-600 uppercase tracking-wide text-xs",children:"Created"}),f.jsx("p",{className:"font-medium mt-1",children:Rc(new Date(s.created_at),"MMM dd, yyyy HH:mm")})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-slate-600 uppercase tracking-wide text-xs",children:"Updated"}),f.jsx("p",{className:"font-medium mt-1",children:Rc(new Date(s.updated_at),"MMM dd, yyyy HH:mm")})]}),s.if_edited&&f.jsxs("div",{children:[f.jsx("p",{className:"text-slate-600 uppercase tracking-wide text-xs",children:"Edited By"}),f.jsx("p",{className:"font-medium mt-1",children:"user"===s.edited_by?"Staff Member":"customer"===s.edited_by?"Customer (via webhook)":s.edited_by})]})]})]})]})})]})})}),Yc=m.forwardRef(({className:e,type:t,...n},r)=>f.jsx("input",{type:t,"data-slot":"input",className:ho("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),ref:r,...n}));function Jc({onStatusChange:e,onSearchChange:t,onDateRangeChange:n}){const[r,s]=m.useState(null),[a,i]=m.useState(null),[o,l]=m.useState(""),[c,u]=m.useState(""),d=e=>{if(a===e)i(null),l(""),u(""),n({from:null,to:null});else{i(e);const t=(e=>{const t=new Date;switch(e){case"today":return{from:Rc(Fl(t),"yyyy-MM-dd"),to:Rc(ql(t),"yyyy-MM-dd")};case"thisWeek":return{from:Rc(Il(t),"yyyy-MM-dd"),to:Rc(Gl(t),"yyyy-MM-dd")};case"lastWeek":const e=Hc(t);return{from:Rc(Il(e),"yyyy-MM-dd"),to:Rc(Gl(e),"yyyy-MM-dd")};case"thisMonth":return{from:Rc(Kl(t),"yyyy-MM-dd"),to:Rc(Vl(t),"yyyy-MM-dd")};default:return{from:null,to:null}}})(e);l(t.from||""),u(t.to||""),n(t)}};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 bg-white p-3 rounded-lg border",children:[f.jsx(al,{className:"w-5 h-5 text-slate-400"}),f.jsx(Yc,{type:"text",placeholder:"Search by customer name, email, or service...",onChange:e=>t(e.target.value),className:"border-0 focus:ring-0"})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(mo,{className:"",variant:null===r?"default":"outline",size:"sm",onClick:()=>{s(null),e(null)},children:"All"}),["BOOKED","CONFIRMED","COMPLETED","CANCELLED"].map(t=>f.jsx(mo,{className:"",variant:r===t?"default":"outline",size:"sm",onClick:()=>{s(t),e(t)},children:"EDITED"===t?"BOOKED (Edited)":t},t))]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Po,{className:"w-5 h-5 text-slate-400"}),f.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Date Range"})]}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"today",label:"Today"},{key:"thisWeek",label:"This Week"},{key:"lastWeek",label:"Last Week"},{key:"thisMonth",label:"This Month"}].map(e=>f.jsx(mo,{variant:a===e.key?"default":"outline",size:"sm",onClick:()=>d(e.key),className:"text-xs",children:e.label},e.key))}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("label",{className:"text-xs text-slate-600",children:"From"}),f.jsx(Yc,{type:"date",value:o,onChange:e=>{return t=e.target.value,l(t),i(null),void n({from:t||null,to:c||null});var t},className:"text-sm"})]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("label",{className:"text-xs text-slate-600",children:"To"}),f.jsx(Yc,{type:"date",value:c,onChange:e=>{return t=e.target.value,u(t),i(null),void n({from:o||null,to:t||null});var t},className:"text-sm"})]})]})]})]})}function Qc({appointments:e}){const t={total:e.length,booked:e.filter(e=>"CANCELLED"!==e.status).length,confirmed:e.filter(e=>"CONFIRMED"===e.status).length,completed:e.filter(e=>"COMPLETED"===e.status).length,cancelled:e.filter(t=>{return"CANCELLED"===t.status&&!("CANCELLED"===(n=t).status&&e.some(e=>"CANCELLED"!==e.status&&e.previous_appointment&&e.previous_appointment.external_id===n.external_id));var n}).length};return f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[f.jsx(po,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-slate-600",children:"Total"}),f.jsx("p",{className:"text-2xl font-bold",children:t.total})]}),f.jsx(Po,{className:"w-8 h-8 text-blue-600 opacity-20"})]})}),f.jsx(po,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-slate-600",children:"Booked"}),f.jsx("p",{className:"text-2xl font-bold",children:t.booked})]}),f.jsx(Fo,{className:"w-8 h-8 text-orange-600 opacity-20"})]})}),f.jsx(po,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-slate-600",children:"Confirmed"}),f.jsx("p",{className:"text-2xl font-bold",children:t.confirmed})]}),f.jsx(Lo,{className:"w-8 h-8 text-green-600 opacity-20"})]})}),f.jsx(po,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-slate-600",children:"Completed"}),f.jsx("p",{className:"text-2xl font-bold",children:t.completed})]}),f.jsx(Lo,{className:"w-8 h-8 text-slate-600 opacity-20"})]})}),f.jsx(po,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-slate-600",children:"Cancelled"}),f.jsx("p",{className:"text-2xl font-bold",children:t.cancelled})]}),f.jsx(Mo,{className:"w-8 h-8 text-red-600 opacity-20"})]})})]})}function Xc({appointments:e}){const t=e.filter(e=>"CANCELLED"!==e.status).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()).slice(0,5),n=e=>function(e){return Bl(Tl(e,e),Ul(e))}(e)?"Today":function(e){return Bl(e,Ol(Ul(e),1))}(e)?"Tomorrow":Rc(e,"MMM dd"),r=(e,t)=>{switch(t||e){case"CONFIRMED":return f.jsx(Lo,{className:"w-4 h-4 text-green-600"});case"COMPLETED":return f.jsx($o,{className:"w-4 h-4 text-slate-600"});case"RESCHEDULED":return f.jsx(rl,{className:"w-4 h-4 text-orange-600"});case"EDITED":return f.jsx(cl,{className:"w-4 h-4 text-purple-600"});default:return f.jsx(Fo,{className:"w-4 h-4 text-blue-600"})}},s=(e,t)=>{const n=t||e;return f.jsx(kl,{variant:"default",className:{CONFIRMED:"bg-green-100 text-green-800",COMPLETED:"bg-slate-100 text-slate-800",RESCHEDULED:"bg-orange-100 text-orange-800",EDITED:"bg-purple-100 text-purple-800"}[n]||"bg-blue-100 text-blue-800",children:(r=e,s=t,"RESCHEDULED"===s?"BOOKED (Rescheduled)":"EDITED"===r?"BOOKED (Edited)":r)});var r,s};return f.jsxs(po,{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upcoming Appointments"}),0===t.length?f.jsx("p",{className:"text-slate-600 text-center py-8",children:"No upcoming appointments"}):f.jsx("div",{className:"space-y-3",children:t.map(e=>{const t=new Date(e.start_time);return f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[f.jsx("div",{className:"mt-0.5 shrink-0",children:r(e.status,e.display_status)}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("p",{className:"font-medium text-sm",children:e.customer_name}),s(e.status,e.display_status)]}),f.jsxs("p",{className:"text-xs text-slate-600",children:[n(t)," at ",Rc(t,"HH:mm")]}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.service_name})]})]},e.id)})})]})}function Zc(){const{currentBusiness:e,businessSettings:t,setBusinessSettings:n,businessServices:r,setBusinessServices:s,blockedSlots:a,setBlockedSlots:i,businessHoursNew:o,setBusinessHoursNew:l,notificationSettings:c,setNotificationSettings:u}=vt(),[d,h]=m.useState(!1),[f,p]=m.useState(null),{canPerformAction:g}=xl();m.useEffect(()=>{e?.id&&(b(),v(),y(),x(),w())},[e?.id]);const b=async()=>{if(e?.id){h(!0),p(null);try{const{data:t,error:r}=await di.from("business_settings").select("*").eq("business_id",e.id).single();if(r&&"PGRST116"!==r.code)throw r;if(t)n(t);else{const t={business_name:e.name,business_email:e.email||"",business_phone:e.phone||"",business_address:e.address||"",website:e.website||"",appointment_interval_minutes:30,buffer_time_minutes:15,default_appointment_duration_minutes:60,max_appointments_per_day:10};n(t)}}catch(t){p(t instanceof Error?t.message:"Failed to load business settings")}finally{h(!1)}}},v=async()=>{if(e?.id)try{const{data:t,error:n}=await di.from("business_services").select("*").eq("business_id",e.id).eq("is_active",!0).order("name");if(n)throw n;s(t||[])}catch(t){console.error("Failed to load business services:",t)}},y=async()=>{if(e?.id)try{const{data:t,error:n}=await di.from("blocked_slots").select("*").eq("business_id",e.id).gte("end_time",(new Date).toISOString()).order("start_time");if(n)throw n;i(t||[])}catch(t){console.error("Failed to load blocked slots:",t)}},x=async()=>{if(e?.id)try{const{data:t,error:n}=await di.from("business_hours").select("*").eq("business_id",e.id).order("day_of_week");if(n)throw n;l(t||[])}catch(t){console.error("Failed to load business hours:",t)}},w=async()=>{if(e?.id)try{const{data:t,error:n}=await di.from("notification_settings").select("*").eq("business_id",e.id).single();if(n&&"PGRST116"!==n.code)throw n;if(t)u(t);else{u({email_enabled:!0,sms_enabled:!1,email_reminders:!0,sms_reminders:!1,email_confirmations:!0,sms_confirmations:!1,reminder_hours_before:24})}}catch(t){console.error("Failed to load notification settings:",t)}};return{businessSettings:t,businessServices:r,blockedSlots:a,businessHoursNew:o,notificationSettings:c,loading:d,error:f,loadBusinessSettings:b,saveBusinessSettings:async t=>{if(e?.id){h(!0),p(null);try{const{data:r,error:s}=await di.from("business_settings").upsert({...t,business_id:e.id,updated_at:(new Date).toISOString()}).select().single();if(s)throw s;return n(r),r}catch(r){throw p(r instanceof Error?r.message:"Failed to save business settings"),r}finally{h(!1)}}},loadBusinessServices:v,saveBusinessService:async t=>{if(e?.id){if(!g("add_service"))throw new Error("Service limit reached for your current plan. Please upgrade to add more services.");try{const{data:n,error:r}=await di.from("business_services").upsert({...t,business_id:e.id,updated_at:(new Date).toISOString()}).select().single();if(r)throw r;return t.id?vt.getState().updateBusinessService(t.id,n):vt.getState().addBusinessService(n),n}catch(n){throw n}}},deleteBusinessService:async t=>{if(e?.id)try{const{error:n}=await di.from("business_services").update({is_active:!1,updated_at:(new Date).toISOString()}).eq("id",t).eq("business_id",e.id);if(n)throw n;vt.getState().removeBusinessService(t)}catch(n){throw n}},loadBlockedSlots:y,saveBlockedSlot:async t=>{if(e?.id)try{const{data:n,error:r}=await di.from("blocked_slots").insert({...t,business_id:e.id}).select().single();if(r)throw r;return vt.getState().addBlockedSlot(n),n}catch(n){throw n}},deleteBlockedSlot:async t=>{if(e?.id)try{const{error:n}=await di.from("blocked_slots").delete().eq("id",t).eq("business_id",e.id);if(n)throw n;vt.getState().removeBlockedSlot(t)}catch(n){throw n}},loadBusinessHours:x,saveBusinessHour:async t=>{if(e?.id)try{const{data:n,error:r}=await di.from("business_hours").upsert({...t,business_id:e.id,updated_at:(new Date).toISOString()}).select().single();if(r)throw r;return t.id?vt.getState().updateBusinessHour(t.id,n):vt.getState().addBusinessHour(n),n}catch(n){throw n}},deleteBusinessHour:async t=>{if(e?.id)try{const{error:n}=await di.from("business_hours").delete().eq("id",t).eq("business_id",e.id);if(n)throw n;vt.getState().removeBusinessHour(t)}catch(n){throw n}},loadNotificationSettings:w,saveNotificationSettings:async t=>{if(e?.id)try{const{data:n,error:r}=await di.from("notification_settings").upsert({...t,business_id:e.id,updated_at:(new Date).toISOString()}).select().single();if(r)throw r;return u(n),n}catch(n){throw n}}}}function eu(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function tu(...e){return t=>{let n=!1;const r=e.map(e=>{const r=eu(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():eu(e[t],null)}}}}function nu(...e){return m.useCallback(tu(...e),e)}function ru(e){const t=su(e),n=m.forwardRef((e,n)=>{const{children:r,...s}=e,a=m.Children.toArray(r),i=a.find(iu);if(i){const e=i.props.children,r=a.map(t=>t===i?m.Children.count(e)>1?m.Children.only(null):m.isValidElement(e)?e.props.children:null:t);return f.jsx(t,{...s,ref:n,children:m.isValidElement(e)?m.cloneElement(e,void 0,r):null})}return f.jsx(t,{...s,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}function su(e){const t=m.forwardRef((e,t)=>{const{children:n,...r}=e;if(m.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...e)=>{const t=a(...e);return s(...e),t}:s&&(n[r]=s):"style"===r?n[r]={...s,...a}:"className"===r&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==m.Fragment&&(s.ref=t?tu(t,e):e),m.cloneElement(n,s)}return m.Children.count(n)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Yc.displayName="Input";var au=Symbol("radix.slottable");function iu(e){return m.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===au}var ou=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=ru(`Primitive.${t}`),r=m.forwardRef((e,r)=>{const{asChild:s,...a}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),f.jsx(i,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var lu=m.forwardRef((e,t)=>f.jsx(ou.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));lu.displayName="Label";var cu=lu;const uu=m.forwardRef(({className:e,...t},n)=>f.jsx(cu,{ref:n,"data-slot":"label",className:ho("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t}));uu.displayName=cu.displayName;const du=m.forwardRef(({className:e,...t},n)=>f.jsx("textarea",{className:ho("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));function hu(e,[t,n]){return Math.min(n,Math.max(t,e))}function fu(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function mu(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>m.createContext(e));return function(n){const r=n?.[e]||t;return m.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const s=m.createContext(r),a=n.length;n=[...n,r];const i=t=>{const{scope:n,children:r,...i}=t,o=n?.[e]?.[a]||s,l=m.useMemo(()=>i,Object.values(i));return f.jsx(o.Provider,{value:l,children:r})};return i.displayName=t+"Provider",[i,function(n,i){const o=i?.[e]?.[a]||s,l=m.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},pu(r,...t)]}function pu(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function gu(e){const t=e+"CollectionProvider",[n,r]=mu(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,r=p.useRef(null),a=p.useRef(new Map).current;return f.jsx(s,{scope:t,itemMap:a,collectionRef:r,children:n})};i.displayName=t;const o=e+"CollectionSlot",l=ru(o),c=p.forwardRef((e,t)=>{const{scope:n,children:r}=e,s=nu(t,a(o,n).collectionRef);return f.jsx(l,{ref:s,children:r})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=ru(u),m=p.forwardRef((e,t)=>{const{scope:n,children:r,...s}=e,i=p.useRef(null),o=nu(t,i),l=a(u,n);return p.useEffect(()=>(l.itemMap.set(i,{ref:i,...s}),()=>{l.itemMap.delete(i)})),f.jsx(h,{[d]:"",ref:o,children:r})});return m.displayName=u,[{Provider:i,Slot:c,ItemSlot:m},function(t){const n=a(e+"CollectionConsumer",t);return p.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},r]}du.displayName="Textarea";var bu=m.createContext(void 0);function vu(e){const t=m.useContext(bu);return e||t||"ltr"}function yu(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...e)=>t.current?.(...e),[])}var xu,wu="dismissableLayer.update",_u="dismissableLayer.pointerDownOutside",ju="dismissableLayer.focusOutside",ku=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nu=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=e,c=m.useContext(ku),[u,d]=m.useState(null),h=u?.ownerDocument??globalThis?.document,[,p]=m.useState({}),g=nu(t,e=>d(e)),b=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=b.indexOf(v),x=u?b.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,_=x>=y,j=function(e,t=globalThis?.document){const n=yu(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Eu(_u,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));_&&!n&&(s?.(e),i?.(e),e.defaultPrevented||o?.())},h),k=function(e,t=globalThis?.document){const n=yu(e),r=m.useRef(!1);return m.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Eu(ju,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(a?.(e),i?.(e),e.defaultPrevented||o?.())},h);return function(e,t=globalThis?.document){const n=yu(e);m.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{x===c.layers.size-1&&(r?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),m.useEffect(()=>{if(u)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(xu=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Su(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=xu)}},[u,h,n,c]),m.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Su())},[u,c]),m.useEffect(()=>{const e=()=>p({});return document.addEventListener(wu,e),()=>document.removeEventListener(wu,e)},[]),f.jsx(ou.div,{...l,ref:g,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:fu(e.onFocusCapture,k.onFocusCapture),onBlurCapture:fu(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:fu(e.onPointerDownCapture,j.onPointerDownCapture)})});Nu.displayName="DismissableLayer";function Su(){const e=new CustomEvent(wu);document.dispatchEvent(e)}function Eu(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?function(e,t){e&&dt.flushSync(()=>e.dispatchEvent(t))}(s,a):s.dispatchEvent(a)}m.forwardRef((e,t)=>{const n=m.useContext(ku),r=m.useRef(null),s=nu(t,r);return m.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),f.jsx(ou.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var Cu=0;function Tu(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Pu="focusScope.autoFocusOnMount",Ou="focusScope.autoFocusOnUnmount",Ru={bubbles:!1,cancelable:!0},Au=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[o,l]=m.useState(null),c=yu(s),u=yu(a),d=m.useRef(null),h=nu(t,e=>l(e)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?d.current=t:Lu(d.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Lu(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Lu(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,o,p.paused]),m.useEffect(()=>{if(o){$u.add(p);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(Pu,Ru);o.addEventListener(Pu,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Lu(r,{select:t}),document.activeElement!==n)return}((e=Iu(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Lu(o))}return()=>{o.removeEventListener(Pu,c),setTimeout(()=>{const e=new CustomEvent(Ou,Ru);o.addEventListener(Ou,u),o.dispatchEvent(e),e.defaultPrevented||Lu(t??document.body,{select:!0}),o.removeEventListener(Ou,u),$u.remove(p)},0)}}var e},[o,c,u,p]);const g=m.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[r,a]=function(e){const t=Iu(e),n=Du(t,e),r=Du(t.reverse(),e);return[n,r]}(t);r&&a?e.shiftKey||s!==a?e.shiftKey&&s===r&&(e.preventDefault(),n&&Lu(a,{select:!0})):(e.preventDefault(),n&&Lu(r,{select:!0})):s===t&&e.preventDefault()}},[n,r,p.paused]);return f.jsx(ou.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});function Iu(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Du(e,t){for(const n of e)if(!Mu(n,{upTo:t}))return n}function Mu(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Lu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Au.displayName="FocusScope";var $u=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Fu(e,t),e.unshift(t)},remove(t){e=Fu(e,t),e[0]?.resume()}}}();function Fu(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var zu=globalThis?.document?m.useLayoutEffect:()=>{},Uu=g[" useId ".trim().toString()]||(()=>{}),Bu=0;function Wu(e){const[t,n]=m.useState(Uu());return zu(()=>{n(e=>e??String(Bu++))},[e]),t?`radix-${t}`:""}const Hu=["top","right","bottom","left"],qu=Math.min,Vu=Math.max,Ku=Math.round,Gu=Math.floor,Yu=e=>({x:e,y:e}),Ju={left:"right",right:"left",bottom:"top",top:"bottom"},Qu={start:"end",end:"start"};function Xu(e,t,n){return Vu(e,qu(t,n))}function Zu(e,t){return"function"==typeof e?e(t):e}function ed(e){return e.split("-")[0]}function td(e){return e.split("-")[1]}function nd(e){return"x"===e?"y":"x"}function rd(e){return"y"===e?"height":"width"}const sd=new Set(["top","bottom"]);function ad(e){return sd.has(ed(e))?"y":"x"}function id(e){return nd(ad(e))}function od(e){return e.replace(/start|end/g,e=>Qu[e])}const ld=["left","right"],cd=["right","left"],ud=["top","bottom"],dd=["bottom","top"];function hd(e,t,n,r){const s=td(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?cd:ld:t?ld:cd;case"left":case"right":return t?ud:dd;default:return[]}}(ed(e),"start"===n,r);return s&&(a=a.map(e=>e+"-"+s),t&&(a=a.concat(a.map(od)))),a}function fd(e){return e.replace(/left|right|bottom|top/g,e=>Ju[e])}function md(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function pd(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function gd(e,t,n){let{reference:r,floating:s}=e;const a=ad(t),i=id(t),o=rd(i),l=ed(t),c="y"===a,u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[o]/2-s[o]/2;let f;switch(l){case"top":f={x:u,y:r.y-s.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-s.width,y:d};break;default:f={x:r.x,y:r.y}}switch(td(t)){case"start":f[i]-=h*(n&&c?-1:1);break;case"end":f[i]+=h*(n&&c?-1:1)}return f}async function bd(e,t){var n;void 0===t&&(t={});const{x:r,y:s,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Zu(t,e),m=md(f),p=o[h?"floating"===d?"reference":"floating":d],g=pd(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(p)))||n?p:p.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),b="floating"===d?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),y=await(null==a.isElement?void 0:a.isElement(v))&&await(null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},x=pd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:v,strategy:l}):b);return{top:(g.top-x.top+m.top)/y.y,bottom:(x.bottom-g.bottom+m.bottom)/y.y,left:(g.left-x.left+m.left)/y.x,right:(x.right-g.right+m.right)/y.x}}function vd(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yd(e){return Hu.some(t=>e[t]>=0)}const xd=new Set(["left","top"]);function wd(){return"undefined"!=typeof window}function _d(e){return Nd(e)?(e.nodeName||"").toLowerCase():"#document"}function jd(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function kd(e){var t;return null==(t=(Nd(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Nd(e){return!!wd()&&(e instanceof Node||e instanceof jd(e).Node)}function Sd(e){return!!wd()&&(e instanceof Element||e instanceof jd(e).Element)}function Ed(e){return!!wd()&&(e instanceof HTMLElement||e instanceof jd(e).HTMLElement)}function Cd(e){return!(!wd()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof jd(e).ShadowRoot)}const Td=new Set(["inline","contents"]);function Pd(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Bd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Td.has(s)}const Od=new Set(["table","td","th"]);function Rd(e){return Od.has(_d(e))}const Ad=[":popover-open",":modal"];function Id(e){return Ad.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Dd=["transform","translate","scale","rotate","perspective"],Md=["transform","translate","scale","rotate","perspective","filter"],Ld=["paint","layout","strict","content"];function $d(e){const t=Fd(),n=Sd(e)?Bd(e):e;return Dd.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Md.some(e=>(n.willChange||"").includes(e))||Ld.some(e=>(n.contain||"").includes(e))}function Fd(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const zd=new Set(["html","body","#document"]);function Ud(e){return zd.has(_d(e))}function Bd(e){return jd(e).getComputedStyle(e)}function Wd(e){return Sd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hd(e){if("html"===_d(e))return e;const t=e.assignedSlot||e.parentNode||Cd(e)&&e.host||kd(e);return Cd(t)?t.host:t}function qd(e){const t=Hd(e);return Ud(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ed(t)&&Pd(t)?t:qd(t)}function Vd(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=qd(e),a=s===(null==(r=e.ownerDocument)?void 0:r.body),i=jd(s);if(a){const e=Kd(i);return t.concat(i,i.visualViewport||[],Pd(s)?s:[],e&&n?Vd(e):[])}return t.concat(s,Vd(s,[],n))}function Kd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gd(e){const t=Bd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ed(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,o=Ku(n)!==a||Ku(r)!==i;return o&&(n=a,r=i),{width:n,height:r,$:o}}function Yd(e){return Sd(e)?e:e.contextElement}function Jd(e){const t=Yd(e);if(!Ed(t))return Yu(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Gd(t);let i=(a?Ku(n.width):n.width)/r,o=(a?Ku(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Qd=Yu(0);function Xd(e){const t=jd(e);return Fd()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Qd}function Zd(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=Yd(e);let i=Yu(1);t&&(r?Sd(r)&&(i=Jd(r)):i=Jd(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==jd(e))&&t}(a,n,r)?Xd(a):Yu(0);let l=(s.left+o.x)/i.x,c=(s.top+o.y)/i.y,u=s.width/i.x,d=s.height/i.y;if(a){const e=jd(a),t=r&&Sd(r)?jd(r):r;let n=e,s=Kd(n);for(;s&&r&&t!==n;){const e=Jd(s),t=s.getBoundingClientRect(),r=Bd(s),a=t.left+(s.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=i,n=jd(s),s=Kd(n)}}return pd({width:u,height:d,x:l,y:c})}function eh(e,t){const n=Wd(e).scrollLeft;return t?t.left+n:Zd(kd(e)).left+n}function th(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-eh(e,n),y:n.top+t.scrollTop}}const nh=new Set(["absolute","fixed"]);function rh(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=jd(e),r=kd(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;const e=Fd();(!e||e&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}const c=eh(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),s="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,i=Math.abs(r.clientWidth-t.clientWidth-s);i<=25&&(a-=i)}else c<=25&&(a+=c);return{width:a,height:i,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=kd(e),n=Wd(e),r=e.ownerDocument.body,s=Vu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Vu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+eh(e);const o=-n.scrollTop;return"rtl"===Bd(r).direction&&(i+=Vu(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:o}}(kd(e));else if(Sd(t))r=function(e,t){const n=Zd(e,!0,"fixed"===t),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Ed(e)?Jd(e):Yu(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:s*a.x,y:r*a.y}}(t,n);else{const n=Xd(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return pd(r)}function sh(e,t){const n=Hd(e);return!(n===t||!Sd(n)||Ud(n))&&("fixed"===Bd(n).position||sh(n,t))}function ah(e,t,n){const r=Ed(t),s=kd(t),a="fixed"===n,i=Zd(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=Yu(0);function c(){l.x=eh(s)}if(r||!r&&!a)if(("body"!==_d(t)||Pd(s))&&(o=Wd(t)),r){const e=Zd(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&c();a&&!r&&s&&c();const u=!s||r||a?Yu(0):th(s,o);return{x:i.left+o.scrollLeft-l.x-u.x,y:i.top+o.scrollTop-l.y-u.y,width:i.width,height:i.height}}function ih(e){return"static"===Bd(e).position}function oh(e,t){if(!Ed(e)||"fixed"===Bd(e).position)return null;if(t)return t(e);let n=e.offsetParent;return kd(e)===n&&(n=n.ownerDocument.body),n}function lh(e,t){const n=jd(e);if(Id(e))return n;if(!Ed(e)){let t=Hd(e);for(;t&&!Ud(t);){if(Sd(t)&&!ih(t))return t;t=Hd(t)}return n}let r=oh(e,t);for(;r&&Rd(r)&&ih(r);)r=oh(r,t);return r&&Ud(r)&&ih(r)&&!$d(r)?n:r||function(e){let t=Hd(e);for(;Ed(t)&&!Ud(t);){if($d(t))return t;if(Id(t))return null;t=Hd(t)}return null}(e)||n}const ch={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a="fixed"===s,i=kd(r),o=!!t&&Id(t.floating);if(r===i||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Yu(1);const u=Yu(0),d=Ed(r);if((d||!d&&!a)&&(("body"!==_d(r)||Pd(i))&&(l=Wd(r)),Ed(r))){const e=Zd(r);c=Jd(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!i||d||a?Yu(0):th(i,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:kd,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[..."clippingAncestors"===n?Id(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Vd(e,[],!1).filter(e=>Sd(e)&&"body"!==_d(e)),s=null;const a="fixed"===Bd(e).position;let i=a?Hd(e):e;for(;Sd(i)&&!Ud(i);){const t=Bd(i),n=$d(i);n||"fixed"!==t.position||(s=null),(a?!n&&!s:!n&&"static"===t.position&&s&&nh.has(s.position)||Pd(i)&&!n&&sh(e,i))?r=r.filter(e=>e!==i):s=t,i=Hd(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],i=a[0],o=a.reduce((e,n)=>{const r=rh(t,n,s);return e.top=Vu(r.top,e.top),e.right=qu(r.right,e.right),e.bottom=qu(r.bottom,e.bottom),e.left=Vu(r.left,e.left),e},rh(t,i,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:lh,getElementRects:async function(e){const t=this.getOffsetParent||lh,n=this.getDimensions,r=await n(e.floating);return{reference:ah(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Gd(e);return{width:t,height:n}},getScale:Jd,isElement:Sd,isRTL:function(e){return"rtl"===Bd(e).direction}};function uh(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dh(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=Yd(e),u=s||a?[...c?Vd(c):[],...Vd(t)]:[];u.forEach(e=>{s&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const d=c&&o?function(e,t){let n,r=null;const s=kd(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||t(),!h||!f)return;const m={rootMargin:-Gu(d)+"px "+-Gu(s.clientWidth-(u+h))+"px "+-Gu(s.clientHeight-(d+f))+"px "+-Gu(u)+"px",threshold:Vu(0,qu(1,l))||1};let p=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!p)return i();r?i(!1,r):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||uh(c,e.getBoundingClientRect())||i(),p=!1}try{r=new IntersectionObserver(g,{...m,root:s.ownerDocument})}catch(b){r=new IntersectionObserver(g,m)}r.observe(e)}(!0),a}(c,n):null;let h,f=-1,m=null;i&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let p=l?Zd(e):null;return l&&function t(){const r=Zd(e);p&&!uh(p,r)&&n();p=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{s&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}const hh=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:s}=e,a=await(null==r.isRTL?void 0:r.isRTL(s.floating)),i=ed(n),o=td(n),l="y"===ad(n),c=xd.has(i)?-1:1,u=a&&l?-1:1,d=Zu(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof m&&(f="end"===o?-1*m:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}},fh=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Zu(e,t),c={x:n,y:r},u=await bd(t,l),d=ad(ed(s)),h=nd(d);let f=c[h],m=c[d];if(a){const e="y"===h?"bottom":"right";f=Xu(f+u["y"===h?"top":"left"],f,f-u[e])}if(i){const e="y"===d?"bottom":"right";m=Xu(m+u["y"===d?"top":"left"],m,m-u[e])}const p=o.fn({...t,[h]:f,[d]:m});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:a,[d]:i}}}}}},mh=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=Zu(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const b=ed(s),v=ad(o),y=ed(o)===o,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!p?[fd(o)]:function(e){const t=fd(e);return[od(e),t,od(t)]}(o)),_="none"!==m;!h&&_&&w.push(...hd(o,p,m,x));const j=[o,...w],k=await bd(t,g),N=[];let S=(null==(r=a.flip)?void 0:r.overflows)||[];if(u&&N.push(k[b]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=td(e),s=id(e),a=rd(s);let i="x"===s?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=fd(i)),[i,fd(i)]}(s,i,x);N.push(k[e[0]],k[e[1]])}if(S=[...S,{placement:s,overflows:N}],!N.every(e=>e<=0)){var E,C;const e=((null==(E=a.flip)?void 0:E.index)||0)+1,t=j[e];if(t){if(!("alignment"===d&&v!==ad(t))||S.every(e=>ad(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:S},reset:{placement:t}}}let n=null==(C=S.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:C.placement;if(!n)switch(f){case"bestFit":{var T;const e=null==(T=S.filter(e=>{if(_){const t=ad(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=o}if(s!==n)return{reset:{placement:n}}}return{}}}},ph=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:o}=t,{apply:l=()=>{},...c}=Zu(e,t),u=await bd(t,c),d=ed(s),h=td(s),f="y"===ad(s),{width:m,height:p}=a.floating;let g,b;"top"===d||"bottom"===d?(g=d,b=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(b=d,g="end"===h?"top":"bottom");const v=p-u.top-u.bottom,y=m-u.left-u.right,x=qu(p-u[g],v),w=qu(m-u[b],y),_=!t.middlewareData.shift;let j=x,k=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(k=y),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(j=v),_&&!h){const e=Vu(u.left,0),t=Vu(u.right,0),n=Vu(u.top,0),r=Vu(u.bottom,0);f?k=m-2*(0!==e||0!==t?e+t:Vu(u.left,u.right)):j=p-2*(0!==n||0!==r?n+r:Vu(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:j});const N=await i.getDimensions(o.floating);return m!==N.width||p!==N.height?{reset:{rects:!0}}:{}}}},gh=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Zu(e,t);switch(r){case"referenceHidden":{const e=vd(await bd(t,{...s,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:yd(e)}}}case"escaped":{const e=vd(await bd(t,{...s,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:yd(e)}}}default:return{}}}}},bh=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=Zu(e,t)||{};if(null==c)return{};const d=md(u),h={x:n,y:r},f=id(s),m=rd(f),p=await i.getDimensions(c),g="y"===f,b=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",x=a.reference[m]+a.reference[f]-h[f]-a.floating[m],w=h[f]-a.reference[f],_=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let j=_?_[y]:0;j&&await(null==i.isElement?void 0:i.isElement(_))||(j=o.floating[y]||a.floating[m]);const k=x/2-w/2,N=j/2-p[m]/2-1,S=qu(d[b],N),E=qu(d[v],N),C=S,T=j-p[m]-E,P=j/2-p[m]/2+k,O=Xu(C,P,T),R=!l.arrow&&null!=td(s)&&P!==O&&a.reference[m]/2-(P<C?S:E)-p[m]/2<0,A=R?P<C?P-C:P-T:0;return{[f]:h[f]+A,data:{[f]:O,centerOffset:P-O-A,...R&&{alignmentOffset:A}},reset:R}}}),vh=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Zu(e,t),u={x:n,y:r},d=ad(s),h=nd(d);let f=u[h],m=u[d];const p=Zu(o,t),g="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,n=a.reference[h]+a.reference[e]-g.mainAxis;f<t?f=t:f>n&&(f=n)}if(c){var b,v;const e="y"===h?"width":"height",t=xd.has(ed(s)),n=a.reference[d]-a.floating[e]+(t&&(null==(b=i.offset)?void 0:b[d])||0)+(t?0:g.crossAxis),r=a.reference[d]+a.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[h]:f,[d]:m}}}},yh=(e,t,n)=>{const r=new Map,s={platform:ch,...n},a={...s.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,o=a.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=gd(c,r,l),h=r,f={},m=0;for(let p=0;p<o.length;p++){const{name:n,fn:a}=o[p],{x:g,y:b,data:v,reset:y}=await a({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=b?b:d,f={...f,[n]:{...f[n],...v}},y&&m<=50&&(m++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):y.rects),({x:u,y:d}=gd(c,h,l))),p=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}})(e,t,{...s,platform:a})};var xh="undefined"!=typeof document?m.useLayoutEffect:function(){};function wh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!wh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;0!==r--;){const n=s[r];if(("_owner"!==n||!e.$$typeof)&&!wh(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function _h(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jh(e,t){const n=_h(e);return Math.round(t*n)/n}function kh(e){const t=m.useRef(e);return xh(()=>{t.current=e}),t}const Nh=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(s=n,{}.hasOwnProperty.call(s,"current"))?null!=n.current?bh({element:n.current,padding:r}).fn(t):{}:n?bh({element:n,padding:r}).fn(t):{};var s}}),Sh=(e,t)=>({...hh(e),options:[e,t]}),Eh=(e,t)=>({...fh(e),options:[e,t]}),Ch=(e,t)=>({...vh(e),options:[e,t]}),Th=(e,t)=>({...mh(e),options:[e,t]}),Ph=(e,t)=>({...ph(e),options:[e,t]}),Oh=(e,t)=>({...gh(e),options:[e,t]}),Rh=(e,t)=>({...Nh(e),options:[e,t]});var Ah=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return f.jsx(ou.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ah.displayName="Arrow";var Ih=Ah;function Dh(e){const[t,n]=m.useState(void 0);return zu(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let s,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var Mh="Popper",[Lh,$h]=mu(Mh),[Fh,zh]=Lh(Mh),Uh=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return f.jsx(Fh,{scope:t,anchor:r,onAnchorChange:s,children:n})};Uh.displayName=Mh;var Bh="PopperAnchor",Wh=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=zh(Bh,n),i=m.useRef(null),o=nu(t,i),l=m.useRef(null);return m.useEffect(()=>{const e=l.current;l.current=r?.current||i.current,e!==l.current&&a.onAnchorChange(l.current)}),r?null:f.jsx(ou.div,{...s,ref:o})});Wh.displayName=Bh;var Hh="PopperContent",[qh,Vh]=Lh(Hh),Kh=m.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...b}=e,v=zh(Hh,n),[y,x]=m.useState(null),w=nu(t,e=>x(e)),[_,j]=m.useState(null),k=Dh(_),N=k?.width??0,S=k?.height??0,E=r+("center"!==a?"-"+a:""),C="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(c)?c:[c],P=T.length>0,O={padding:C,boundary:T.filter(Qh),altBoundary:P},{refs:R,floatingStyles:A,placement:I,isPositioned:D,middlewareData:M}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=m.useState(r);wh(h,r)||f(r);const[p,g]=m.useState(null),[b,v]=m.useState(null),y=m.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),x=m.useCallback(e=>{e!==k.current&&(k.current=e,v(e))},[]),w=a||p,_=i||b,j=m.useRef(null),k=m.useRef(null),N=m.useRef(u),S=null!=l,E=kh(l),C=kh(s),T=kh(c),P=m.useCallback(()=>{if(!j.current||!k.current)return;const e={placement:t,strategy:n,middleware:h};C.current&&(e.platform=C.current),yh(j.current,k.current,e).then(e=>{const t={...e,isPositioned:!1!==T.current};O.current&&!wh(N.current,t)&&(N.current=t,dt.flushSync(()=>{d(t)}))})},[h,t,n,C,T]);xh(()=>{!1===c&&N.current.isPositioned&&(N.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const O=m.useRef(!1);xh(()=>(O.current=!0,()=>{O.current=!1}),[]),xh(()=>{if(w&&(j.current=w),_&&(k.current=_),w&&_){if(E.current)return E.current(w,_,P);P()}},[w,_,P,E,S]);const R=m.useMemo(()=>({reference:j,floating:k,setReference:y,setFloating:x}),[y,x]),A=m.useMemo(()=>({reference:w,floating:_}),[w,_]),I=m.useMemo(()=>{const e={position:n,left:0,top:0};if(!A.floating)return e;const t=jh(A.floating,u.x),r=jh(A.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+r+"px)",..._h(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,o,A.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:P,refs:R,elements:A,floatingStyles:I}),[u,P,R,A,I])}({strategy:"fixed",placement:E,whileElementsMounted:(...e)=>dh(...e,{animationFrame:"always"===p}),elements:{reference:v.anchor},middleware:[Sh({mainAxis:s+S,alignmentAxis:i}),l&&Eh({mainAxis:!0,crossAxis:!1,limiter:"partial"===d?Ch():void 0,...O}),l&&Th({...O}),Ph({...O,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:s,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${r}px`),i.setProperty("--radix-popper-anchor-width",`${s}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}}),_&&Rh({element:_,padding:o}),Xh({arrowWidth:N,arrowHeight:S}),h&&Oh({strategy:"referenceHidden",...O})]}),[L,$]=Zh(I),F=yu(g);zu(()=>{D&&F?.()},[D,F]);const z=M.arrow?.x,U=M.arrow?.y,B=0!==M.arrow?.centerOffset,[W,H]=m.useState();return zu(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:D?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:f.jsx(qh,{scope:n,placedSide:L,onArrowChange:j,arrowX:z,arrowY:U,shouldHideArrow:B,children:f.jsx(ou.div,{"data-side":L,"data-align":$,...b,ref:w,style:{...b.style,animation:D?void 0:"none"}})})})});Kh.displayName=Hh;var Gh="PopperArrow",Yh={top:"bottom",right:"left",bottom:"top",left:"right"},Jh=m.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=Vh(Gh,n),a=Yh[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(Ih,{...r,ref:t,style:{...r.style,display:"block"}})})});function Qh(e){return null!==e}Jh.displayName=Gh;var Xh=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,a=0!==s.arrow?.centerOffset,i=a?0:e.arrowWidth,o=a?0:e.arrowHeight,[l,c]=Zh(n),u={start:"0%",center:"50%",end:"100%"}[c],d=(s.arrow?.x??0)+i/2,h=(s.arrow?.y??0)+o/2;let f="",m="";return"bottom"===l?(f=a?u:`${d}px`,m=-o+"px"):"top"===l?(f=a?u:`${d}px`,m=`${r.floating.height+o}px`):"right"===l?(f=-o+"px",m=a?u:`${h}px`):"left"===l&&(f=`${r.floating.width+o}px`,m=a?u:`${h}px`),{data:{x:f,y:m}}}});function Zh(e){const[t,n="center"]=e.split("-");return[t,n]}var ef=Uh,tf=Wh,nf=Kh,rf=Jh,sf=m.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=m.useState(!1);zu(()=>a(!0),[]);const i=n||s&&globalThis?.document?.body;return i?ht.createPortal(f.jsx(ou.div,{...r,ref:t}),i):null});sf.displayName="Portal";var af=g[" useInsertionEffect ".trim().toString()]||zu;function of({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=function({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),s=m.useRef(n),a=m.useRef(t);return af(()=>{a.current=t},[t]),m.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:s;{const t=m.useRef(void 0!==e);m.useEffect(()=>{const e=t.current;if(e!==o){const t=e?"controlled":"uncontrolled",n=o?"controlled":"uncontrolled";console.warn(`${r} is changing from ${t} to ${n}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o},[o,r])}const c=m.useCallback(t=>{if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&i.current?.(n)}else a(t)},[o,e,a,i]);return[l,c]}function lf(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var cf=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});m.forwardRef((e,t)=>f.jsx(ou.span,{...e,ref:t,style:{...cf,...e.style}})).displayName="VisuallyHidden";var uf=new WeakMap,df=new WeakMap,hf={},ff=0,mf=function(e){return e&&(e.host||mf(e.parentNode))},pf=function(e,t,n,r){var s=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=mf(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);hf[n]||(hf[n]=new WeakMap);var a=hf[n],i=[],o=new Set,l=new Set(s),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};s.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),s=null!==t&&"false"!==t,l=(uf.get(e)||0)+1,c=(a.get(e)||0)+1;uf.set(e,l),a.set(e,c),i.push(e),1===l&&s&&df.set(e,!0),1===c&&e.setAttribute(n,"true"),s||e.setAttribute(r,"true")}catch(ob){console.error("aria-hidden: cannot operate on ",e,ob)}})};return u(t),o.clear(),ff++,function(){i.forEach(function(e){var t=uf.get(e)-1,s=a.get(e)-1;uf.set(e,t),a.set(e,s),t||(df.has(e)||e.removeAttribute(r),df.delete(e)),s||e.removeAttribute(n)}),--ff||(uf=new WeakMap,uf=new WeakMap,df=new WeakMap,hf={})}},gf=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),pf(r,s,n,"aria-hidden")):function(){return null}},bf="right-scroll-bar-position",vf="width-before-scroll-bar";function yf(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var xf="undefined"!=typeof window?m.useLayoutEffect:m.useEffect,wf=new WeakMap;function _f(e,t){var n,r,s,a=(n=null,r=function(t){return e.forEach(function(e){return yf(e,t)})},(s=m.useState(function(){return{value:n,callback:r,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0]).callback=r,s.facade);return xf(function(){var t=wf.get(a);if(t){var n=new Set(t),r=new Set(e),s=a.current;n.forEach(function(e){r.has(e)||yf(e,null)}),r.forEach(function(e){n.has(e)||yf(e,s)})}wf.set(a,e)},[e]),a}function jf(e){return e}var kf=function(e){var t=e.sideCar,n=_t(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,wt({},n))};kf.isSideCarExport=!0;var Nf=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=jf);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var s=t(e,r);return n.push(s),function(){n=n.filter(function(e){return e!==s})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var s=n;n=[],s.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=wt({async:!0,ssr:!1},e),t}(),Sf=function(){},Ef=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Sf,onWheelCapture:Sf,onTouchMoveCapture:Sf}),s=r[0],a=r[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,g=e.inert,b=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,x=e.gapMode,w=_t(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,j=_f([n,t]),k=wt(wt({},w),s);return m.createElement(m.Fragment,null,u&&m.createElement(_,{sideCar:Nf,removeScrollBar:c,shards:d,noRelative:f,noIsolation:p,inert:g,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:x}),i?m.cloneElement(m.Children.only(o),wt(wt({},k),{ref:j})):m.createElement(y,wt({},k,{className:l,ref:j}),o))});Ef.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Ef.classNames={fullWidth:vf,zeroRight:bf};function Cf(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Tf=function(){var e=0,t=null;return{add:function(n){var r,s;0==e&&(t=Cf())&&(s=n,(r=t).styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Pf=function(){var e,t=(e=Tf(),function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Of={left:0,top:0,right:0,gap:0},Rf=function(e){return parseInt(e||"",10)||0},Af=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Of;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[Rf(n),Rf(r),Rf(s)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},If=Pf(),Df="data-scroll-locked",Mf=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(Df,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(bf," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(vf," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(bf," .").concat(bf," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(vf," .").concat(vf," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Df,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Lf=function(){var e=parseInt(document.body.getAttribute(Df)||"0",10);return isFinite(e)?e:0},$f=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=void 0===r?"margin":r;m.useEffect(function(){return document.body.setAttribute(Df,(Lf()+1).toString()),function(){var e=Lf()-1;e<=0?document.body.removeAttribute(Df):document.body.setAttribute(Df,e.toString())}},[]);var a=m.useMemo(function(){return Af(s)},[s]);return m.createElement(If,{styles:Mf(a,!t,s,n?"":"!important")})},Ff=!1;if("undefined"!=typeof window)try{var zf=Object.defineProperty({},"passive",{get:function(){return Ff=!0,!0}});window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch(lb){Ff=!1}var Uf=!!Ff&&{passive:!1},Bf=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Wf=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Hf(e,r)){var s=qf(e,r);if(s[1]>s[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Hf=function(e,t){return"v"===e?function(e){return Bf(e,"overflowY")}(t):function(e){return Bf(e,"overflowX")}(t)},qf=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Vf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Kf=function(e){return[e.deltaX,e.deltaY]},Gf=function(e){return e&&"current"in e?e.current:e},Yf=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Jf=0,Qf=[];function Xf(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Zf=(em=function(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(Jf++)[0],a=m.useState(Pf)[0],i=m.useRef(e);m.useEffect(function(){i.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=$t([e.lockRef.current],(e.shards||[]).map(Gf),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=m.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var s,a=Vf(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Wf(d,u);if(!h)return!0;if(h?s=d:(s="v"===d?"h":"v",h=Wf(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=s),!s)return!0;var f=r.current||s;return function(e,t,n,r){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=s*r,i=n.target,o=t.contains(i),l=!1,c=a>0,u=0,d=0;do{if(!i)break;var h=qf(e,i),f=h[0],m=h[1]-h[2]-s*f;(f||m)&&Hf(e,i)&&(u+=m,d+=f);var p=i.parentNode;i=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),l=m.useCallback(function(e){var n=e;if(Qf.length&&Qf[Qf.length-1]===a){var r="deltaY"in n?Kf(n):Vf(n),s=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,s=r,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)n.cancelable&&n.preventDefault();else if(!s){var l=(i.current.shards||[]).map(Gf).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!i.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=m.useCallback(function(e,n,r,s){var a={name:e,delta:n,target:r,should:s,shadowParent:Xf(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),u=m.useCallback(function(e){n.current=Vf(e),r.current=void 0},[]),d=m.useCallback(function(t){c(t.type,Kf(t),t.target,o(t,e.lockRef.current))},[]),h=m.useCallback(function(t){c(t.type,Vf(t),t.target,o(t,e.lockRef.current))},[]);m.useEffect(function(){return Qf.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Uf),document.addEventListener("touchmove",l,Uf),document.addEventListener("touchstart",u,Uf),function(){Qf=Qf.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Uf),document.removeEventListener("touchmove",l,Uf),document.removeEventListener("touchstart",u,Uf)}},[]);var f=e.removeScrollBar,p=e.inert;return m.createElement(m.Fragment,null,p?m.createElement(a,{styles:Yf(s)}):null,f?m.createElement($f,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Nf.useMedium(em),kf);var em,tm=m.forwardRef(function(e,t){return m.createElement(Ef,wt({},e,{ref:t,sideCar:Zf}))});tm.classNames=Ef.classNames;var nm=[" ","Enter","ArrowUp","ArrowDown"],rm=[" ","Enter"],sm="Select",[am,im,om]=gu(sm),[lm]=mu(sm,[om,$h]),cm=$h(),[um,dm]=lm(sm),[hm,fm]=lm(sm),mm=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:g}=e,b=cm(t),[v,y]=m.useState(null),[x,w]=m.useState(null),[_,j]=m.useState(!1),k=vu(c),[N,S]=of({prop:r,defaultProp:s??!1,onChange:a,caller:sm}),[E,C]=of({prop:i,defaultProp:o,onChange:l,caller:sm}),T=m.useRef(null),P=!v||(g||!!v.closest("form")),[O,R]=m.useState(new Set),A=Array.from(O).map(e=>e.props.value).join(";");return f.jsx(ef,{...b,children:f.jsxs(um,{required:p,scope:t,trigger:v,onTriggerChange:y,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Wu(),value:E,onValueChange:C,open:N,onOpenChange:S,dir:k,triggerPointerDownPosRef:T,disabled:h,children:[f.jsx(am.Provider,{scope:t,children:f.jsx(hm,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(e=>{R(t=>new Set(t).add(e))},[]),onNativeOptionRemove:m.useCallback(e=>{R(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),P?f.jsxs(ep,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:E,onChange:e=>C(e.target.value),disabled:h,form:g,children:[void 0===E?f.jsx("option",{value:""}):null,Array.from(O)]},A):null]})})};mm.displayName=sm;var pm="SelectTrigger",gm=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=cm(n),i=dm(pm,n),o=i.disabled||r,l=nu(t,i.onTriggerChange),c=im(n),u=m.useRef("touch"),[d,h,p]=np(e=>{const t=c().filter(e=>!e.disabled),n=t.find(e=>e.value===i.value),r=rp(t,e,n);void 0!==r&&i.onValueChange(r.value)}),g=e=>{o||(i.onOpenChange(!0),p()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return f.jsx(tf,{asChild:!0,...a,children:f.jsx(ou.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":tp(i.value)?"":void 0,...s,ref:l,onClick:fu(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&g(e)}),onPointerDown:fu(s.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:fu(s.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||nm.includes(e.key)&&(g(),e.preventDefault())})})})});gm.displayName=pm;var bm="SelectValue",vm=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...o}=e,l=dm(bm,n),{onValueNodeHasChildrenChange:c}=l,u=void 0!==a,d=nu(t,l.onValueNodeChange);return zu(()=>{c(u)},[c,u]),f.jsx(ou.span,{...o,ref:d,style:{pointerEvents:"none"},children:tp(l.value)?f.jsx(f.Fragment,{children:i}):a})});vm.displayName=bm;var ym=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return f.jsx(ou.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});ym.displayName="SelectIcon";var xm=e=>f.jsx(sf,{asChild:!0,...e});xm.displayName="SelectPortal";var wm="SelectContent",_m=m.forwardRef((e,t)=>{const n=dm(wm,e.__scopeSelect),[r,s]=m.useState();if(zu(()=>{s(new DocumentFragment)},[]),!n.open){const t=r;return t?dt.createPortal(f.jsx(km,{scope:e.__scopeSelect,children:f.jsx(am.Slot,{scope:e.__scopeSelect,children:f.jsx("div",{children:e.children})})}),t):null}return f.jsx(Em,{...e,ref:t})});_m.displayName=wm;var jm=10,[km,Nm]=lm(wm),Sm=ru("SelectContent.RemoveScroll"),Em=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:b,avoidCollisions:v,...y}=e,x=dm(wm,n),[w,_]=m.useState(null),[j,k]=m.useState(null),N=nu(t,e=>_(e)),[S,E]=m.useState(null),[C,T]=m.useState(null),P=im(n),[O,R]=m.useState(!1),A=m.useRef(!1);m.useEffect(()=>{if(w)return gf(w)},[w]),m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Tu()),document.body.insertAdjacentElement("beforeend",e[1]??Tu()),Cu++,()=>{1===Cu&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cu--}},[]);const I=m.useCallback(e=>{const[t,...n]=P().map(e=>e.ref.current),[r]=n.slice(-1),s=document.activeElement;for(const a of e){if(a===s)return;if(a?.scrollIntoView({block:"nearest"}),a===t&&j&&(j.scrollTop=0),a===r&&j&&(j.scrollTop=j.scrollHeight),a?.focus(),document.activeElement!==s)return}},[P,j]),D=m.useCallback(()=>I([S,w]),[I,S,w]);m.useEffect(()=>{O&&D()},[O,D]);const{onOpenChange:M,triggerPointerDownPosRef:L}=x;m.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(L.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():w.contains(n.target)||M(!1),document.removeEventListener("pointermove",t),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[w,M,L]),m.useEffect(()=>{const e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[M]);const[$,F]=np(e=>{const t=P().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=rp(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),z=m.useCallback((e,t,n)=>{const r=!A.current&&!n;(void 0!==x.value&&x.value===t||r)&&(E(e),r&&(A.current=!0))},[x.value]),U=m.useCallback(()=>w?.focus(),[w]),B=m.useCallback((e,t,n)=>{const r=!A.current&&!n;(void 0!==x.value&&x.value===t||r)&&T(e)},[x.value]),W="popper"===r?Tm:Cm,H=W===Tm?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:b,avoidCollisions:v}:{};return f.jsx(km,{scope:n,content:w,viewport:j,onViewportChange:k,itemRefCallback:z,selectedItem:S,onItemLeave:U,itemTextRefCallback:B,focusSelectedItem:D,selectedItemText:C,position:r,isPositioned:O,searchRef:$,children:f.jsx(tm,{as:Sm,allowPinchZoom:!0,children:f.jsx(Au,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:fu(s,e=>{x.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:f.jsx(Nu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:f.jsx(W,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault(),...y,...H,onPlaced:()=>R(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:fu(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||F(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>I(t)),e.preventDefault()}})})})})})})});Em.displayName="SelectContentImpl";var Cm=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=dm(wm,n),i=Nm(wm,n),[o,l]=m.useState(null),[c,u]=m.useState(null),d=nu(t,e=>u(e)),h=im(n),p=m.useRef(!1),g=m.useRef(!0),{viewport:b,selectedItem:v,selectedItemText:y,focusSelectedItem:x}=i,w=m.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&b&&v&&y){const e=a.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),s=y.getBoundingClientRect();if("rtl"!==a.dir){const r=s.left-t.left,a=n.left-r,i=e.left-a,l=e.width+i,c=Math.max(l,t.width),u=window.innerWidth-jm,d=hu(a,[jm,Math.max(jm,u-c)]);o.style.minWidth=l+"px",o.style.left=d+"px"}else{const r=t.right-s.right,a=window.innerWidth-n.right-r,i=window.innerWidth-e.right-a,l=e.width+i,c=Math.max(l,t.width),u=window.innerWidth-jm,d=hu(a,[jm,Math.max(jm,u-c)]);o.style.minWidth=l+"px",o.style.right=d+"px"}const i=h(),l=window.innerHeight-2*jm,u=b.scrollHeight,d=window.getComputedStyle(c),f=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),x=f+m+u+parseInt(d.paddingBottom,10)+g,w=Math.min(5*v.offsetHeight,x),_=window.getComputedStyle(b),j=parseInt(_.paddingTop,10),k=parseInt(_.paddingBottom,10),N=e.top+e.height/2-jm,S=l-N,E=v.offsetHeight/2,C=f+m+(v.offsetTop+E),T=x-C;if(C<=N){const e=i.length>0&&v===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-b.offsetTop-b.offsetHeight,n=C+Math.max(S,E+(e?k:0)+t+g);o.style.height=n+"px"}else{const e=i.length>0&&v===i[0].ref.current;o.style.top="0px";const t=Math.max(N,f+b.offsetTop+(e?j:0)+E)+T;o.style.height=t+"px",b.scrollTop=C-N+b.offsetTop}o.style.margin=`${jm}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",r?.(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,o,c,b,v,y,a.dir,r]);zu(()=>w(),[w]);const[_,j]=m.useState();zu(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const k=m.useCallback(e=>{e&&!0===g.current&&(w(),x?.(),g.current=!1)},[w,x]);return f.jsx(Pm,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:f.jsx(ou.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Cm.displayName="SelectItemAlignedPosition";var Tm=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=jm,...a}=e,i=cm(n);return f.jsx(nf,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tm.displayName="SelectPopperPosition";var[Pm,Om]=lm(wm,{}),Rm="SelectViewport",Am=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=Nm(Rm,n),i=Om(Rm,n),o=nu(t,a.onViewportChange),l=m.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(am.Slot,{scope:n,children:f.jsx(ou.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:fu(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=i;if(r?.current&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*jm,s=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),i=Math.max(s,a);if(i<r){const s=i+e,a=Math.min(r,s),o=s-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Am.displayName=Rm;var Im="SelectGroup",[Dm,Mm]=lm(Im);m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Wu();return f.jsx(Dm,{scope:n,id:s,children:f.jsx(ou.div,{role:"group","aria-labelledby":s,...r,ref:t})})}).displayName=Im;var Lm="SelectLabel",$m=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Mm(Lm,n);return f.jsx(ou.div,{id:s.id,...r,ref:t})});$m.displayName=Lm;var Fm="SelectItem",[zm,Um]=lm(Fm),Bm=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,o=dm(Fm,n),l=Nm(Fm,n),c=o.value===r,[u,d]=m.useState(a??""),[h,p]=m.useState(!1),g=nu(t,e=>l.itemRefCallback?.(e,r,s)),b=Wu(),v=m.useRef("touch"),y=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(zm,{scope:n,value:r,disabled:s,textId:b,isSelected:c,onItemTextChange:m.useCallback(e=>{d(t=>t||(e?.textContent??"").trim())},[]),children:f.jsx(am.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:f.jsx(ou.div,{role:"option","aria-labelledby":b,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:g,onFocus:fu(i.onFocus,()=>p(!0)),onBlur:fu(i.onBlur,()=>p(!1)),onClick:fu(i.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:fu(i.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:fu(i.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:fu(i.onPointerMove,e=>{v.current=e.pointerType,s?l.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fu(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:fu(i.onKeyDown,e=>{""!==l.searchRef?.current&&" "===e.key||(rm.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});Bm.displayName=Fm;var Wm="SelectItemText",Hm=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=dm(Wm,n),o=Nm(Wm,n),l=Um(Wm,n),c=fm(Wm,n),[u,d]=m.useState(null),h=nu(t,e=>d(e),l.onItemTextChange,e=>o.itemTextRefCallback?.(e,l.value,l.disabled)),p=u?.textContent,g=m.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:b,onNativeOptionRemove:v}=c;return zu(()=>(b(g),()=>v(g)),[b,v,g]),f.jsxs(f.Fragment,{children:[f.jsx(ou.span,{id:l.textId,...a,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?dt.createPortal(a.children,i.valueNode):null]})});Hm.displayName=Wm;var qm="SelectItemIndicator",Vm=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Um(qm,n).isSelected?f.jsx(ou.span,{"aria-hidden":!0,...r,ref:t}):null});Vm.displayName=qm;var Km="SelectScrollUpButton",Gm=m.forwardRef((e,t)=>{const n=Nm(Km,e.__scopeSelect),r=Om(Km,e.__scopeSelect),[s,a]=m.useState(!1),i=nu(t,r.onScrollButtonChange);return zu(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?f.jsx(Qm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Gm.displayName=Km;var Ym="SelectScrollDownButton",Jm=m.forwardRef((e,t)=>{const n=Nm(Ym,e.__scopeSelect),r=Om(Ym,e.__scopeSelect),[s,a]=m.useState(!1),i=nu(t,r.onScrollButtonChange);return zu(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;a(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?f.jsx(Qm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Jm.displayName=Ym;var Qm=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=Nm("SelectScrollButton",n),i=m.useRef(null),o=im(n),l=m.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>l(),[l]),zu(()=>{const e=o().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[o]),f.jsx(ou.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:fu(s.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(r,50))}),onPointerMove:fu(s.onPointerMove,()=>{a.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(r,50))}),onPointerLeave:fu(s.onPointerLeave,()=>{l()})})}),Xm=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return f.jsx(ou.div,{"aria-hidden":!0,...r,ref:t})});Xm.displayName="SelectSeparator";var Zm="SelectArrow";m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=cm(n),a=dm(Zm,n),i=Nm(Zm,n);return a.open&&"popper"===i.position?f.jsx(rf,{...s,...r,ref:t}):null}).displayName=Zm;var ep=m.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=m.useRef(null),a=nu(r,s),i=lf(t);return m.useEffect(()=>{const e=s.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[i,t]),f.jsx(ou.select,{...n,style:{...cf,...n.style},ref:a,defaultValue:t})});function tp(e){return""===e||void 0===e}function np(e){const t=yu(e),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(e=>{const s=n.current+e;t(s),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),a=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function rp(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=(i=e,o=Math.max(s,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}ep.displayName="SelectBubbleInput";var sp=gm,ap=ym,ip=xm,op=_m,lp=Am,cp=$m,up=Bm,dp=Hm,hp=Vm,fp=Gm,mp=Jm,pp=Xm;const gp=mm,bp=vm,vp=m.forwardRef(({className:e,size:t="default",children:n,...r},s)=>f.jsxs(sp,{ref:s,"data-slot":"select-trigger","data-size":t,className:ho("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,f.jsx(ap,{asChild:!0,children:f.jsx(Io,{className:"size-4 opacity-50"})})]}));vp.displayName=sp.displayName;const yp=m.forwardRef(({className:e,children:t,position:n="popper",align:r="center",...s},a)=>f.jsx(ip,{children:f.jsxs(op,{ref:a,"data-slot":"select-content",className:ho("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,align:r,...s,children:[f.jsx(wp,{}),f.jsx(lp,{className:ho("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),f.jsx(_p,{})]})}));yp.displayName=op.displayName;m.forwardRef(({className:e,...t},n)=>f.jsx(cp,{ref:n,"data-slot":"select-label",className:ho("text-muted-foreground px-2 py-1.5 text-xs",e),...t})).displayName=cp.displayName;const xp=m.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(up,{ref:r,"data-slot":"select-item",className:ho("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[f.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:f.jsx(hp,{children:f.jsx(Ao,{className:"size-4"})})}),f.jsx(dp,{children:t})]}));xp.displayName=up.displayName;m.forwardRef(({className:e,...t},n)=>f.jsx(pp,{ref:n,"data-slot":"select-separator",className:ho("bg-border pointer-events-none -mx-1 my-1 h-px",e),...t})).displayName=pp.displayName;const wp=m.forwardRef(({className:e,...t},n)=>f.jsx(fp,{ref:n,"data-slot":"select-scroll-up-button",className:ho("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(Do,{className:"size-4"})}));wp.displayName=fp.displayName;const _p=m.forwardRef(({className:e,...t},n)=>f.jsx(mp,{ref:n,"data-slot":"select-scroll-down-button",className:ho("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(Io,{className:"size-4"})}));function jp({onClose:e,onSuccess:t}){const{user:n,appointments:r}=vt(),{currentBusiness:s}=yl(),{canPerformAction:a}=xl(),{businessServices:i,businessHoursNew:o,blockedSlots:l,businessSettings:c}=Zc(),[u,d]=m.useState(!1),[h,p]=m.useState(!1),[g,b]=m.useState(Rc(new Date,"yyyy-MM-dd")),[v,y]=m.useState(""),[x,w]=m.useState([]),[_,j]=m.useState([]),[k,N]=m.useState({customer_name:"",customer_email:"",customer_phone:"",service_name:"",start_time:"",end_time:"",location:"",customer_notes:"",vehicle_make_model:"",web_meeting_url:""});m.useEffect(()=>{o.length>0&&c&&S()},[o,c,r]),m.useEffect(()=>{g&&o.length>0&&c&&E()},[g,o,l,c,r,v,i]),m.useEffect(()=>{if(v&&k.start_time){const e=i.find(e=>e.id===v);if(e){const t=zl(new Date(k.start_time),e.duration_minutes);N(n=>({...n,end_time:Rc(t,"yyyy-MM-dd'T'HH:mm"),service_name:e.name}))}}},[v,k.start_time,i]);const S=()=>{if(!c||0===o.length)return;const e=[],t=new Date;for(let n=0;n<90;n++){const r=Ol(t,n),s=Rc(r,"yyyy-MM-dd"),a=r.getDay();if(o.find(e=>e.day_of_week===a&&e.is_enabled)){T(s)<(c.max_appointments_per_day||8)&&e.push(s)}}j(e)},E=()=>{if(!c||0===o.length)return;const e=Dc(g).getDay(),t=o.find(t=>t.day_of_week===e&&t.is_enabled);if(!t)return void w([]);const n=[],s=c.appointment_interval_minutes||30;c.buffer_time_minutes;const a=i.find(e=>e.id===v),u=a?a.duration_minutes:s,d=new Date(`${g}T${t.open_time}`),h=new Date(`${g}T${t.close_time}`);let f=new Date(d);for(;f<h;){const e=zl(f,u);if(e>h){f=zl(f,s);continue}const t=f,a=e,i=l.some(e=>{try{const n=Dc(e.start_time.replace(" ","T").replace("+00","+00:00")),r=Dc(e.end_time.replace(" ","T").replace("+00","+00:00")),s=Rc(n,"yyyy-MM-dd")===g;return s&&t<r&&a>n}catch(n){return console.error("Error parsing blocked slot:",n),!1}}),o=r.some(t=>{if("BOOKED"!==t.status&&"CONFIRMED"!==t.status)return!1;console.log("Appointment raw:",t.start_time,t.end_time);try{const n=Dc(t.start_time.replace(" ","T").replace("+00","Z")),r=Dc(t.end_time.replace(" ","T").replace("+00","Z")),s=n,a=r;console.log("Appointment parsed (local):",s,a),console.log("Slot local:",f,"Slot end local:",e),console.log("Selected date:",g,"Appointment date:",Rc(s,"yyyy-MM-dd"));const i=Rc(s,"yyyy-MM-dd")===g;return i&&f<a&&e>s}catch(n){return console.error("Error parsing appointment:",n),!1}});if(i||o)console.log(`Slot ${Rc(f,"HH:mm")} is blocked or booked - isBlocked: ${i}, isBooked: ${o}`);else{const e=Rc(f,"HH:mm");console.log(`Adding available slot: ${e}`),n.push(e)}f=zl(f,s)}console.log(`Total available slots generated: ${n.length}`,n),w(n)},C=(e,t)=>{N(n=>({...n,[e]:t}))},T=e=>r.filter(t=>("BOOKED"===t.status||"CONFIRMED"===t.status)&&Rc(new Date(t.start_time),"yyyy-MM-dd")===e).length,P=e=>{const t=T(e),n=c?.max_appointments_per_day||8;t>=n?alert(`This date has reached the maximum number of appointments (${n}). Please select a different date.`):(b(e),N(e=>({...e,start_time:"",end_time:""})))},O=i.length>0,R=o.some(e=>e.is_enabled);return f.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 bg-opacity-95 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:f.jsxs(po,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl border-0 bg-white/95 backdrop-blur-md",children:[f.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-6 text-white",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Create New Appointment"}),f.jsx("p",{className:"text-blue-100 text-sm",children:"Fill in the details below to schedule an appointment"})]}),f.jsx(mo,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-white/20 rounded-full w-8 h-8 p-0",children:f.jsx(bl,{className:"w-4 h-4"})})]})}),f.jsxs("div",{className:"p-6 bg-gradient-to-b from-gray-50 to-white",children:[(!O||!R)&&f.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(dl,{className:"w-5 h-5 text-amber-600 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"Business Configuration Required"}),f.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[!O&&f.jsx("li",{children:" No services configured. Please add services in business settings."}),!R&&f.jsx("li",{children:" No business hours configured. Please set your operating hours."})]}),f.jsx("p",{className:"text-sm text-amber-700 mt-2",children:"You can still create appointments manually, but dropdown selections will be limited."})]})]})}),f.jsxs("form",{onSubmit:async i=>{if(i.preventDefault(),!n||!s)return;if(!a("create_appointment"))return void alert("Appointment limit reached for your current plan. Please upgrade to create more appointments.");if(!h)return void p(!0);const o=new Date(k.start_time),l=new Date(k.end_time);if(r.some(e=>{if("BOOKED"!==e.status&&"CONFIRMED"!==e.status)return!1;const t=new Date(e.start_time),n=new Date(e.end_time);return Bl(t,o)&&(Ic(o,{start:t,end:n})||Ic(l,{start:t,end:n})||Ic(t,{start:o,end:l}))}))return alert("This time slot conflicts with an existing appointment. Please select a different time."),void p(!1);d(!0);try{const n={external_id:`manual-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,business_id:s.id,customer_name:k.customer_name,customer_email:k.customer_email||null,customer_phone:k.customer_phone||null,service_name:k.service_name,start_time:new Date(k.start_time).toISOString(),end_time:new Date(k.end_time).toISOString(),status:"BOOKED",display_status:null,vehicle_make_model:k.vehicle_make_model||null,location:k.location||null,customer_notes:k.customer_notes||null,source:"manual",web_meeting_url:k.web_meeting_url||null,raw_payload:null,created_by_user:!0,was_edited:!1,if_edited:!1,edited_by:null,previous_external_id:null,previous_appointment:null},{data:r,error:a}=await di.from("appointments").insert([n]).select().single();if(a)throw a;vt.getState().addAppointment(r),t?.(),e()}catch(c){console.error("Failed to create appointment:",c),alert("Failed to create appointment. Please try again.")}finally{d(!1),p(!1)}},className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"customer_name",children:"Customer Name *"}),f.jsx(Yc,{type:"text",id:"customer_name",value:k.customer_name,onChange:e=>C("customer_name",e.target.value),required:!0,className:"border-2 border-gray-200 focus:border-blue-400 focus:ring-blue-400/20 transition-all duration-200",placeholder:"Enter customer's full name"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"customer_email",children:"Customer Email *"}),f.jsx(Yc,{id:"customer_email",type:"email",value:k.customer_email,onChange:e=>C("customer_email",e.target.value),required:!0,className:"border-2 border-gray-200 focus:border-green-400 focus:ring-green-400/20 transition-all duration-200",placeholder:"customer@example.com"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"customer_phone",children:"Customer Phone"}),f.jsx(Yc,{type:"tel",id:"customer_phone",value:k.customer_phone,onChange:e=>C("customer_phone",e.target.value),className:"border-2 border-gray-200 focus:border-cyan-400 focus:ring-cyan-400/20 transition-all duration-200",placeholder:"+1 (555) 123-4567"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"service",children:"Service *"}),O?f.jsxs(gp,{value:v,onValueChange:y,children:[f.jsx(vp,{className:"border-2 border-gray-200 focus:border-orange-400 focus:ring-orange-400/20 transition-all duration-200",children:f.jsx(bp,{placeholder:"Select a service"})}),f.jsx(yp,{children:i.map(e=>f.jsxs(xp,{value:e.id,children:[e.name," (",e.duration_minutes," min)"]},e.id))})]}):f.jsx(Yc,{type:"text",id:"service_name",value:k.service_name,onChange:e=>C("service_name",e.target.value),required:!0,className:"border-2 border-gray-200 focus:border-orange-400 focus:ring-orange-400/20 transition-all duration-200",placeholder:"e.g., Oil Change, Brake Service"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"appointment_date",children:"Appointment Date *"}),_.length>0?f.jsxs(gp,{value:g,onValueChange:P,children:[f.jsx(vp,{className:"border-2 border-gray-200 focus:border-purple-400 focus:ring-purple-400/20 transition-all duration-200",children:f.jsx(bp,{placeholder:"Select date"})}),f.jsx(yp,{children:_.map(e=>f.jsx(xp,{value:e,children:Rc(Dc(e),"EEEE, MMMM d, yyyy")},e))})]}):f.jsx(Yc,{type:"date",id:"appointment_date",value:g,onChange:e=>P(e.target.value),min:Rc(new Date,"yyyy-MM-dd"),required:!0,className:"border-2 border-gray-200 focus:border-purple-400 focus:ring-purple-400/20 transition-all duration-200"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"start_time",children:"Start Time *"}),x.length>0?f.jsxs(gp,{value:k.start_time?Rc(new Date(k.start_time),"HH:mm"):"",onValueChange:e=>{const t=new Date(`${g}T${e}`);N(e=>({...e,start_time:Rc(t,"yyyy-MM-dd'T'HH:mm")}))},children:[f.jsx(vp,{className:"border-2 border-gray-200 focus:border-indigo-400 focus:ring-indigo-400/20 transition-all duration-200",children:f.jsx(bp,{placeholder:"Select time slot"})}),f.jsx(yp,{children:x.map(e=>f.jsx(xp,{value:e,children:e},e))})]}):f.jsx(Yc,{type:"time",id:"start_time",value:k.start_time?Rc(new Date(k.start_time),"HH:mm"):"",onChange:e=>{const t=e.target.value;if(t){C("start_time",Rc(new Date(`${g}T${t}`),"yyyy-MM-dd'T'HH:mm"))}},required:!0,className:"border-2 border-gray-200 focus:border-indigo-400 focus:ring-indigo-400/20 transition-all duration-200"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"end_time",children:"End Time *"}),f.jsx(Yc,{type:"time",id:"end_time",value:k.end_time?Rc(new Date(k.end_time),"HH:mm"):"",readOnly:!0,className:"border-2 border-gray-200 bg-gray-50 text-gray-600",title:"Auto-calculated based on service duration"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"location",children:"Location"}),f.jsx(Yc,{type:"text",id:"location",value:k.location,onChange:e=>C("location",e.target.value),className:"border-2 border-gray-200 focus:border-red-400 focus:ring-red-400/20 transition-all duration-200",placeholder:"e.g., Main Shop, Branch Office"})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"vehicle_make_model",children:"Vehicle Make/Model"}),f.jsx(Yc,{type:"text",id:"vehicle_make_model",value:k.vehicle_make_model,onChange:e=>C("vehicle_make_model",e.target.value),className:"border-2 border-gray-200 focus:border-indigo-400 focus:ring-indigo-400/20 transition-all duration-200",placeholder:"e.g., Toyota Camry 2020"})]})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"customer_notes",children:"Customer Notes"}),f.jsx(du,{id:"customer_notes",value:k.customer_notes,onChange:e=>C("customer_notes",e.target.value),rows:3,className:"resize-none border-2 border-gray-200 focus:border-purple-400 focus:ring-purple-400/20 transition-all duration-200",placeholder:"Add any special notes or requirements..."})]}),f.jsxs("div",{children:[f.jsx(uu,{className:"",htmlFor:"web_meeting_url",children:"Web Meeting URL (Optional)"}),f.jsx(Yc,{type:"url",id:"web_meeting_url",placeholder:"https://meet.google.com/...",value:k.web_meeting_url,onChange:e=>C("web_meeting_url",e.target.value),className:"border-2 border-gray-200 focus:border-teal-400 focus:ring-teal-400/20 transition-all duration-200"})]}),h?f.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl p-6 mt-8 shadow-lg",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:f.jsx(Mo,{className:"w-6 h-6 text-amber-600"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-bold text-amber-900 mb-3 text-lg",children:"Confirm Appointment Creation"}),f.jsx("p",{className:"text-amber-800 mb-6 leading-relaxed",children:"Please review the appointment details carefully before saving. This action will create a new appointment in the system and notify the customer."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs(mo,{variant:"default",size:"lg",type:"submit",disabled:u,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold px-6 py-3 shadow-lg transform hover:scale-105 transition-all duration-200",children:[f.jsx(Lo,{className:"w-5 h-5 mr-2"}),u?"Creating...":"Confirm & Save"]}),f.jsx(mo,{size:"lg",type:"button",variant:"outline",onClick:()=>p(!1),className:"border-2 border-gray-300 hover:border-gray-400 px-6 py-3 font-semibold transition-all duration-200",children:"Back to Edit"})]})]})]})}):f.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[f.jsxs(mo,{variant:"default",size:"lg",type:"submit",disabled:u,className:"flex-1 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 text-white font-bold py-4 shadow-xl transform hover:scale-105 transition-all duration-200",children:[f.jsx(sl,{className:"w-5 h-5 mr-3"}),u?"Creating...":"Create Appointment"]}),f.jsx(mo,{size:"lg",type:"button",variant:"outline",onClick:e,className:"px-8 py-4 border-2 border-gray-300 hover:border-gray-400 font-semibold transition-all duration-200",children:"Cancel"})]})]})]})]})})}function kp({appointment:e,onClose:t,onSuccess:n}){fi();const{updateAppointment:r}=vt(),[s,a]=m.useState(!1),[i,o]=m.useState({customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone||"",service_name:e.service_name,location:e.location,customer_notes:e.customer_notes||"",vehicle_make_model:e.vehicle_make_model||"",web_meeting_url:e.web_meeting_url||""}),l=(e,t)=>{o(n=>({...n,[e]:t}))};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center p-4 z-50",children:f.jsx(po,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white shadow-lg border border-gray-200",children:f.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Edit Appointment"}),f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx(dl,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-amber-600 leading-relaxed",children:"Changes will be logged and cannot be undone"})]})]}),f.jsx(mo,{variant:"ghost",size:"sm",onClick:t,className:"min-h-[44px] min-w-[44px] p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100","aria-label":"Close edit form",children:f.jsx(bl,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:async s=>{s.preventDefault();if(!(i.customer_name!==e.customer_name||i.customer_email!==e.customer_email||i.customer_phone!==(e.customer_phone||"")||i.service_name!==e.service_name||i.location!==e.location||i.customer_notes!==(e.customer_notes||"")||i.vehicle_make_model!==(e.vehicle_make_model||"")||i.web_meeting_url!==(e.web_meeting_url||"")))return void alert("No changes detected. Please modify at least one field.");if(confirm(" SECURITY CONFIRMATION: You are about to edit customer appointment information. This action will be logged and cannot be undone. Are you sure you want to proceed?")){a(!0);try{const s=["customer_name","customer_email","customer_phone","service_name","location"],a=["customer_notes","vehicle_make_model","web_meeting_url"],o=Object.keys(i).filter(t=>i[t]!==e[t]);o.some(e=>s.includes(e)),o.some(e=>a.includes(e));let l="EDIT";await hi(e.external_id,l,"user",{customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,service_name:e.service_name,location:e.location,customer_notes:e.customer_notes,vehicle_make_model:e.vehicle_make_model,web_meeting_url:e.web_meeting_url},i,vt.getState().user?.id,"Manual edit via appointment form");const{data:c,error:u}=await di.from("appointments").update({...i,updated_at:(new Date).toISOString(),display_status:"EDITED",if_edited:!0,edited_by:vt.getState().user?.id}).eq("id",e.id).select().single();if(u)throw u;r(e.id,c),n?.(),t()}catch(o){console.error("Failed to update appointment:",o),console.error("Error details:",o.message,o.details,o.hint),alert(`Failed to update appointment: ${o.message||"Please try again."}`)}finally{a(!1)}}},className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"customer_name",className:"text-base font-medium text-gray-700",children:"Customer Name *"}),f.jsx(Yc,{type:"text",className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",id:"customer_name",value:i.customer_name,onChange:e=>l("customer_name",e.target.value),required:!0,"aria-describedby":"customer_name_help"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"customer_email",className:"text-base font-medium text-gray-700",children:"Customer Email *"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",id:"customer_email",type:"email",value:i.customer_email,onChange:e=>l("customer_email",e.target.value),required:!0})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"customer_phone",className:"text-base font-medium text-gray-700",children:"Customer Phone"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",type:"tel",id:"customer_phone",value:i.customer_phone,onChange:e=>l("customer_phone",e.target.value)})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"service_name",className:"text-base font-medium text-gray-700",children:"Service Name *"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",type:"text",id:"service_name",value:i.service_name,onChange:e=>l("service_name",e.target.value),required:!0})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"location",className:"text-base font-medium text-gray-700",children:"Location *"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",type:"text",id:"location",value:i.location,onChange:e=>l("location",e.target.value),required:!0})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"vehicle_make_model",className:"text-base font-medium text-gray-700",children:"Vehicle Make/Model"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",type:"text",id:"vehicle_make_model",value:i.vehicle_make_model,onChange:e=>l("vehicle_make_model",e.target.value)})]})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"customer_notes",className:"text-base font-medium text-gray-700",children:"Customer Notes"}),f.jsx(du,{id:"customer_notes",className:"w-full mt-1 min-h-[100px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500 resize-none",value:i.customer_notes,onChange:e=>l("customer_notes",e.target.value),rows:4})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"web_meeting_url",className:"text-base font-medium text-gray-700",children:"Web Meeting URL"}),f.jsx(Yc,{className:"w-full mt-1 min-h-[44px] text-base bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500",type:"url",id:"web_meeting_url",placeholder:"https://meet.google.com/...",value:i.web_meeting_url,onChange:e=>l("web_meeting_url",e.target.value)})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[f.jsxs(mo,{variant:"default",size:"lg",type:"submit",disabled:s,className:"flex-1 min-h-[48px] text-base font-medium bg-blue-600 hover:bg-blue-700 text-white focus:ring-2 focus:ring-blue-500",children:[f.jsx(sl,{className:"w-5 h-5 mr-2"}),s?"Updating...":"Update Appointment"]}),f.jsx(mo,{size:"lg",type:"button",variant:"outline",onClick:t,className:"min-h-[48px] text-base font-medium border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500",children:"Cancel"})]})]})]})})})}function Np(){const[e,t]=m.useState(!0);return m.useEffect(()=>{const e=di.channel("realtime-status").on("system",{event:"online"},()=>{t(!0)}).on("system",{event:"offline"},()=>{t(!1)}).subscribe();return()=>{e.unsubscribe()}},[]),f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-lg",children:[f.jsx(No,{className:"w-4 h-4 "+(e?"text-green-600 animate-pulse":"text-red-600")}),f.jsx("span",{className:"text-sm font-medium",children:e?"Live":"Connecting..."})]})}function Sp(){const{user:e,loading:t}=fi(),{currentBusiness:n}=yl(),{appointments:r}=wl(e?.email),s=_l(),[a,i]=m.useState(null),[o,l]=m.useState(null),[c,u]=m.useState(""),[d,h]=m.useState({from:null,to:null}),[p,g]=m.useState(!1),[b,v]=m.useState(null);m.useEffect(()=>{const e=e=>{v(e.detail)};return window.addEventListener("edit-appointment",e),()=>{window.removeEventListener("edit-appointment",e)}},[]);const y=m.useMemo(()=>r.filter(e=>{if(o)if("BOOKED"===o){if("BOOKED"!==e.status&&"EDITED"!==e.status)return!1}else if("CANCELLED"===o){if("CANCELLED"!==e.status)return!1;if(r.some(t=>"CANCELLED"!==t.status&&t.previous_appointment&&t.previous_appointment.external_id===e.external_id))return!1}else if(e.status!==o)return!1;if(c){const t=c.toLowerCase();return e.customer_name.toLowerCase().includes(t)||e.customer_email?.toLowerCase().includes(t)||e.service_name.toLowerCase().includes(t)}if(d.from||d.to){const t=new Date(e.start_time),n=d.from?new Date(d.from+"T00:00:00"):null,r=d.to?new Date(d.to+"T23:59:59"):null;if(n&&r)return t>=n&&t<=r;if(n)return t>=n;if(r)return t<=r}return!0}),[r,o,c,d]);return t?f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):e?n?f.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:[f.jsx("div",{className:"bg-white border-b sticky top-16 z-40",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between gap-2 md:gap-4",children:[f.jsxs("div",{className:"min-w-0",children:[f.jsx("h1",{className:"text-2xl font-bold truncate",children:"Appointments"}),f.jsx("p",{className:"text-sm text-slate-600 truncate",children:n?.name||e.business_name||"Your Business"})]}),f.jsxs("div",{className:"flex items-center gap-2 md:gap-3 shrink-0",children:[f.jsx(Np,{}),f.jsx("div",{className:"hidden md:flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-lg",children:s?f.jsxs(f.Fragment,{children:[f.jsx(pl,{className:"w-4 h-4 text-green-600"}),f.jsx("span",{className:"text-sm text-green-600",children:"Online"})]}):f.jsxs(f.Fragment,{children:[f.jsx(ml,{className:"w-4 h-4 text-red-600"}),f.jsx("span",{className:"text-sm text-red-600",children:"Offline"})]})}),f.jsxs(mo,{variant:"default",size:"sm",className:"md:size-default",onClick:()=>g(!0),children:[f.jsx(el,{className:"w-4 h-4 md:mr-2"}),f.jsx("span",{className:"hidden md:inline",children:"New"})]})]})]})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[f.jsx(Qc,{appointments:r}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsx(Xc,{appointments:r})}),f.jsx("div",{className:"hidden lg:block",children:f.jsxs(po,{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Stats"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-slate-600",children:"This Week"}),f.jsx("span",{className:"font-semibold",children:r.filter(e=>{const t=new Date(e.start_time),n=new Date,r=new Date(n.getTime()+6048e5);return t>=n&&t<=r}).length})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-slate-600",children:"This Month"}),f.jsx("span",{className:"font-semibold",children:r.filter(e=>{const t=new Date(e.start_time),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).length})]})]})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx("div",{className:"sticky top-32",children:f.jsx(Jc,{onStatusChange:l,onSearchChange:u,onDateRangeChange:h})})}),f.jsx("div",{className:"lg:col-span-3",children:0===y.length?f.jsxs(po,{className:"p-12 text-center",children:[f.jsx(Mo,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No appointments found"}),f.jsx("p",{className:"text-slate-600",children:0===r.length?"Create your first appointment to get started":"Try adjusting your filters"})]}):f.jsx("div",{className:"space-y-4",children:y.map(e=>f.jsx(qc,{appointment:e,onClick:()=>i(e)},e.id))})})]})]}),a&&f.jsx(Gc,{appointment:a,onClose:()=>i(null)}),p&&f.jsx(jp,{onClose:()=>g(!1),onSuccess:()=>g(!1)}),b&&f.jsx(kp,{appointment:b,onClose:()=>v(null),onSuccess:()=>v(null)})]}):f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs(po,{className:"p-8 text-center",children:[f.jsx(Mo,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold mb-2",children:"Business Not Found"}),f.jsx("p",{className:"text-slate-600",children:"Loading your business information..."})]})}):f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsxs(po,{className:"p-8 text-center",children:[f.jsx(Mo,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold mb-2",children:"Not Authenticated"}),f.jsx("p",{className:"text-slate-600",children:"Please sign in to view appointments"})]})})}function Ep(){const e=_e(),{signIn:t,loading:n,error:r}=fi(),[s,a]=m.useState(""),[i,o]=m.useState("");return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-slate-900 to-slate-800 p-4",children:f.jsx(po,{className:"w-full max-w-md",children:f.jsxs("div",{className:"p-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"SSA Manager"}),f.jsx("p",{className:"text-center text-slate-600 mb-8",children:"Auto Service Appointment Management"}),f.jsxs("form",{onSubmit:async n=>{n.preventDefault();if((await t(s,i)).success){const{currentBusiness:t}=vt.getState();e(t?"/appointments":"/onboarding-success")}},className:"space-y-4",children:[r&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:r})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),f.jsx(Yc,{className:"",type:"email",value:s,onChange:e=>a(e.target.value),placeholder:"you@example.com",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),f.jsx(Yc,{className:"",type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"",required:!0})]}),f.jsx(mo,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"})]}),f.jsxs("p",{className:"text-center text-sm text-slate-600 mt-6",children:["Don't have an account?"," ",f.jsx("button",{onClick:()=>e("/signup"),className:"text-blue-600 hover:underline font-medium",children:"Sign up"})]})]})})})}function Cp(){const e=_e(),{signUp:t,loading:n,error:r}=fi(),[s,a]=m.useState(""),[i,o]=m.useState(""),[l,c]=m.useState("");return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-slate-900 to-slate-800 p-4",children:f.jsx(po,{className:"w-full max-w-md",children:f.jsxs("div",{className:"p-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Create Account"}),f.jsx("p",{className:"text-center text-slate-600 mb-8",children:"Join SSA Manager today"}),f.jsxs("form",{onSubmit:async n=>{n.preventDefault();(await t(s,i,l)).success&&e("/verify-email",{state:{email:s}})},className:"space-y-4",children:[r&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:r})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),f.jsx(Yc,{className:"",type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"John Doe",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),f.jsx(Yc,{className:"",type:"email",value:s,onChange:e=>a(e.target.value),placeholder:"you@example.com",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),f.jsx(Yc,{className:"",type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"",required:!0})]}),f.jsx(mo,{type:"submit",className:"w-full",disabled:n,children:n?"Creating account...":"Sign Up"})]}),f.jsxs("p",{className:"text-center text-sm text-slate-600 mt-6",children:["Already have an account?"," ",f.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:underline font-medium",children:"Sign in"})]})]})})})}function Tp(){const e=_e(),t=ye(),{resendVerificationEmail:n,error:r}=fi(),[s,a]=m.useState(!1),[i,o]=m.useState(!1),l=t.state?.email||"";m.useEffect(()=>{l||e("/signup")},[l,e]);return l?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-slate-900 to-slate-800 p-4",children:f.jsx(po,{className:"w-full max-w-md",children:f.jsxs("div",{className:"p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx(Jo,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),f.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Verify Your Email"}),f.jsx("p",{className:"text-slate-600",children:"We've sent a verification email to:"}),f.jsx("p",{className:"text-lg font-semibold text-slate-900 mt-2",children:l})]}),f.jsxs("div",{className:"space-y-6",children:[r&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:r})]}),i&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[f.jsx(Jo,{className:"w-4 h-4 text-green-600"}),f.jsx("p",{className:"text-sm text-green-600",children:"Verification email sent successfully!"})]}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What happens next?"}),f.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[f.jsx("li",{children:" Check your email for the verification link"}),f.jsx("li",{children:" Click the link to verify your account"}),f.jsx("li",{children:" Sign in to complete your business setup"}),f.jsx("li",{children:" Set up your appointment management system"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs(mo,{onClick:async()=>{if(l){a(!0);try{(await n(l)).success&&(o(!0),setTimeout(()=>o(!1),5e3))}catch(lb){console.error("Failed to resend verification email:",lb)}finally{a(!1)}}},variant:"outline",className:"w-full",disabled:s,children:[f.jsx(nl,{className:"w-4 h-4 mr-2 "+(s?"animate-spin":"")}),s?"Sending...":"Resend Verification Email"]}),f.jsx(mo,{onClick:()=>{e("/login")},className:"w-full",children:"I've Verified My Email - Sign In"})]}),f.jsx("p",{className:"text-center text-sm text-slate-600",children:"Didn't receive the email? Check your spam folder or try resending."})]})]})})}):null}function Pp(){const{user:e,signOut:t}=fi(),n=_e(),[r,s]=m.useState(!1),a=async()=>{await t(),n("/login")};return f.jsxs("header",{className:"bg-white border-b sticky top-0 z-50",children:[f.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[f.jsx("div",{className:"text-2xl font-bold text-blue-600 cursor-pointer",onClick:()=>n("/"),children:"SSA Manager"}),f.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>n("/appointments"),className:"text-slate-600 hover:text-slate-900 font-medium",children:"Appointments"}),f.jsx("button",{onClick:()=>n("/profile"),className:"text-slate-600 hover:text-slate-900 font-medium",children:"Profile"}),f.jsxs(mo,{className:"",variant:"outline",size:"sm",onClick:a,children:[f.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}),!e&&f.jsxs(f.Fragment,{children:[f.jsx(mo,{variant:"outline",onClick:()=>n("/login"),children:"Sign In"}),f.jsx(mo,{variant:"default",onClick:()=>n("/signup"),children:"Sign Up"})]})]}),f.jsx("button",{className:"md:hidden p-2",onClick:()=>s(!r),children:r?f.jsx(bl,{className:"w-6 h-6"}):f.jsx(Xo,{className:"w-6 h-6"})})]}),r&&f.jsxs("div",{className:"md:hidden border-t p-4 space-y-3",children:[e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>{n("/appointments"),s(!1)},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 rounded",children:"Appointments"}),f.jsx("button",{onClick:()=>{n("/profile"),s(!1)},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 rounded",children:"Profile"}),f.jsxs(mo,{size:"sm",variant:"outline",className:"w-full bg-transparent",onClick:a,children:[f.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}),!e&&f.jsxs(f.Fragment,{children:[f.jsx(mo,{variant:"outline",className:"w-full bg-transparent",onClick:()=>n("/login"),children:"Sign In"}),f.jsx(mo,{variant:"default",className:"w-full",onClick:()=>n("/signup"),children:"Sign Up"})]})]})]})}_p.displayName=mp.displayName;let Op=null;async function Rp(){return Op||(window.OneSignal?Op=window.OneSignal:(await new Promise((e,t)=>{const n=document.createElement("script");n.src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js",n.async=!0,n.onload=e,n.onerror=t,document.head.appendChild(n)}),await new Promise(e=>{const t=()=>{window.OneSignal?(Op=window.OneSignal,e(void 0)):setTimeout(t,100)};t()})),Op)}async function Ap(e){try{const t=await Rp();if(!(await async function(){if(!("Notification"in window))return console.log("This browser does not support notifications"),!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission)return"granted"===await Notification.requestPermission();return!1}()))return console.log("Notification permission denied"),!1;await t.Slidedown.promptPush();return!!(await t.User.PushSubscription.optedIn)&&(await async function(e){try{const t=await Rp();let n=await t.User.PushSubscription.id,r=0;const s=5;for(;!n&&r<s;)console.log(`Waiting for OneSignal Player ID... (attempt ${r+1}/${s})`),await new Promise(e=>setTimeout(e,1e3)),n=await t.User.PushSubscription.id,r++;if(!n)return console.error("OneSignal Player ID not available after retries"),!1;const{error:a}=await di.from("push_subscriptions").upsert({user_id:e,onesignal_player_id:n,onesignal_external_user_id:e,platform:Ip(),user_agent:navigator.userAgent,updated_at:(new Date).toISOString()},{onConflict:"onesignal_player_id"});return a?(console.error("Failed to save OneSignal subscription:",a),!1):(console.log(" OneSignal subscription saved to database with Player ID:",n),!0)}catch(t){return console.error("Error saving OneSignal subscription:",t),!1}}(e),!0)}catch(t){return console.error("Failed to subscribe to push notifications:",t),!1}}function Ip(){const e=navigator.userAgent.toLowerCase();return/android/.test(e)?"android":/iphone|ipad|ipod/.test(e)?"ios":"web"}function Dp(){const[e,t]=m.useState(!1),[n,r]=m.useState(!1),[s,a]=m.useState(!1),{user:i}=fi();m.useEffect(()=>{(async()=>{const e="Notification"in window;t(e),e&&i&&await o()})()},[i]);const o=async()=>{if(i)try{const e=await async function(){try{const e=await Rp();return await e.User.PushSubscription.optedIn||!1}catch(e){return console.error("Error checking OneSignal subscription status:",e),!1}}();r(e)}catch(e){console.error("Error checking OneSignal subscription status:",e)}};return{isSupported:e,isSubscribed:n,isLoading:s,subscribe:async()=>{if(!e||!i)return!1;a(!0);try{if(await Ap(i.id))return r(!0),!0}catch(t){console.error("Error subscribing to push notifications:",t)}finally{a(!1)}return!1},unsubscribe:async()=>{if(!i)return!1;a(!0);try{if(await async function(e){try{const t=await Rp();await t.User.PushSubscription.optOut();const{error:n}=await di.from("push_subscriptions").delete().eq("user_id",e).eq("onesignal_external_user_id",e);return n?(console.error("Failed to delete OneSignal subscription:",n),!1):(console.log(" OneSignal subscription removed from database"),!0)}catch(t){return console.error("Error unsubscribing from push notifications:",t),!1}}(i.id))return r(!1),!0}catch(e){console.error("Error unsubscribing from push notifications:",e)}finally{a(!1)}return!1}}}function Mp(){const{isSupported:e,isSubscribed:t,subscribe:n,unsubscribe:r,isLoading:s}=Dp(),[a,i]=m.useState({appointmentReminders:!0,statusChanges:!0,newAppointments:!0,cancellations:!0});return e?f.jsxs(po,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Co,{className:"w-5 h-5"}),f.jsx("h3",{className:"text-lg font-semibold",children:"Notification Settings"})]}),t&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg mb-4",children:[f.jsx(Lo,{className:"w-4 h-4 text-green-600"}),f.jsx("p",{className:"text-sm text-green-600",children:"Push notifications enabled"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium",children:"Push Notifications"}),f.jsx("p",{className:"text-sm text-slate-600",children:"Receive notifications about appointments and updates"})]}),f.jsx(mo,{onClick:async()=>{t?await r():await n()},disabled:s,variant:t?"outline":"default",size:"sm",children:s?"...":t?"Disable":"Enable"})]}),f.jsx("div",{className:"space-y-3",children:Object.entries(a).map(([e,t])=>f.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 rounded cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t,onChange:()=>(e=>{i(t=>({...t,[e]:!t[e]}))})(e),className:"w-4 h-4 rounded"}),f.jsx("span",{className:"text-sm font-medium capitalize",children:e.replace(/([A-Z])/g," $1").trim()})]},e))})]}),f.jsx(mo,{size:"lg",variant:"default",className:"w-full mt-4",children:"Save Preferences"})]}):f.jsx(po,{className:"p-6",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Mo,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Notifications not supported"}),f.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Your browser doesn't support push notifications"})]})]})})}function Lp(){const{user:e,signOut:t}=fi(),n=_e(),[r,s]=m.useState(!1),[a,i]=m.useState(null),[o,l]=m.useState(!1),[c,u]=m.useState({full_name:e?.full_name||"",business_name:e?.business_name||"",phone:e?.phone||""}),d=e=>{const{name:t,value:n}=e.target;u(e=>({...e,[t]:n}))};return f.jsx("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:f.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[f.jsxs(po,{className:"p-4 md:p-8 mb-6",children:[f.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6 md:mb-8",children:"Profile Settings"}),a&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg mb-6",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:a})]}),o&&f.jsx("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg mb-6",children:f.jsx("p",{className:"text-sm text-green-600",children:"Profile updated successfully"})}),f.jsxs("form",{onSubmit:async t=>{t.preventDefault(),s(!0),i(null),l(!1);try{const{error:t}=await di.from("profiles").update(c).eq("id",e?.id);if(t)throw t;l(!0),setTimeout(()=>l(!1),3e3)}catch(lb){i(lb instanceof Error?lb.message:"Failed to update profile")}finally{s(!1)}},className:"space-y-4 md:space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),f.jsx(Yc,{type:"text",name:"full_name",value:c.full_name,onChange:d,placeholder:"Your full name",className:"h-12 md:h-10"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Name"}),f.jsx(Yc,{type:"text",name:"business_name",value:c.business_name,onChange:d,placeholder:"Your business name",className:"h-12 md:h-10"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),f.jsx(Yc,{type:"tel",name:"phone",value:c.phone,onChange:d,placeholder:"Your phone number",className:"h-12 md:h-10"})]}),f.jsxs("div",{className:"border-t pt-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account"}),f.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Email: ",f.jsx("span",{className:"font-medium",children:e?.email})]})]}),f.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:justify-start",children:[f.jsx(mo,{type:"submit",disabled:r,className:"w-full sm:w-auto",children:r?"Saving...":"Save Changes"}),f.jsxs(mo,{type:"button",variant:"outline",onClick:()=>n("/settings"),className:"w-full sm:w-auto",children:[f.jsx(il,{className:"w-4 h-4 mr-2"}),"Business Settings"]}),f.jsxs(mo,{type:"button",variant:"outline",onClick:async()=>{await t(),n("/login")},className:"w-full sm:w-auto",children:[f.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]}),f.jsx(Mp,{})]})})}function $p({onNext:e}){fi();const{isSupported:t,isSubscribed:n,subscribe:r,isLoading:s}=Dp(),[a,i]=m.useState(null),[o,l]=m.useState(!1);return o?f.jsxs(po,{className:"max-w-md mx-auto",children:[f.jsxs(go,{className:"text-center",children:[f.jsx(Lo,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),f.jsx(bo,{className:"text-2xl",children:"Setup Complete!"})]}),f.jsxs(vo,{className:"text-center space-y-4",children:[f.jsx("p",{className:"text-gray-600",children:"Push notifications have been configured for your account. You can always change these settings later in your profile."}),f.jsx(mo,{onClick:e,className:"w-full",children:"Continue to Dashboard"})]})]}):t?f.jsxs(po,{className:"max-w-md mx-auto",children:[f.jsxs(go,{className:"text-center",children:[f.jsx(ll,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),f.jsx(bo,{className:"text-2xl",children:"Enable Push Notifications"})]}),f.jsxs(vo,{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-gray-600 mb-4",children:"Get notified about new appointments, updates, and important reminders directly on your mobile device."}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[f.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Why enable notifications?"}),f.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[f.jsx("li",{children:" Instant alerts for new appointments"}),f.jsx("li",{children:" Reminders before scheduled services"}),f.jsx("li",{children:" Updates when appointments change"}),f.jsx("li",{children:" Important business notifications"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(mo,{onClick:async()=>{if(!t)return;"default"===Notification.permission?i("default"):i(Notification.permission);await r()&&l(!0)},disabled:s,className:"w-full",size:"lg",children:s?f.jsxs(f.Fragment,{children:[f.jsx(Ko,{className:"w-4 h-4 mr-2 animate-spin"}),"Setting up notifications..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Co,{className:"w-4 h-4 mr-2"}),"Enable Push Notifications"]})}),f.jsx(mo,{onClick:()=>{l(!0)},variant:"outline",className:"w-full",children:"Skip for Now"})]}),"denied"===a&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:f.jsxs("p",{className:"text-sm text-red-800",children:[f.jsx("strong",{children:"Permission denied:"})," To enable notifications, please allow them in your browser settings and try again."]})}),n&&f.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:f.jsxs("p",{className:"text-sm text-green-800",children:[f.jsx(Lo,{className:"w-4 h-4 inline mr-1"}),"Push notifications are now enabled for this device!"]})})]})]}):f.jsxs(po,{className:"max-w-md mx-auto",children:[f.jsxs(go,{className:"text-center",children:[f.jsx($o,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),f.jsx(bo,{className:"text-2xl",children:"Notifications Not Supported"})]}),f.jsxs(vo,{className:"text-center space-y-4",children:[f.jsx("p",{className:"text-gray-600",children:"Your browser doesn't support push notifications. You can still use the app, but you won't receive mobile notifications."}),f.jsx(mo,{onClick:e,className:"w-full",children:"Continue Anyway"})]})]})}var Fp="rovingFocusGroup.onEntryFocus",zp={bubbles:!1,cancelable:!0},Up="RovingFocusGroup",[Bp,Wp,Hp]=gu(Up),[qp,Vp]=mu(Up,[Hp]),[Kp,Gp]=qp(Up),Yp=m.forwardRef((e,t)=>f.jsx(Bp.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(Bp.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(Jp,{...e,ref:t})})}));Yp.displayName=Up;var Jp=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=m.useRef(null),p=nu(t,h),g=vu(a),[b,v]=of({prop:i,defaultProp:o??null,onChange:l,caller:Up}),[y,x]=m.useState(!1),w=yu(c),_=Wp(n),j=m.useRef(!1),[k,N]=m.useState(0);return m.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(Fp,w),()=>e.removeEventListener(Fp,w)},[w]),f.jsx(Kp,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:b,onItemFocus:m.useCallback(e=>v(e),[v]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:m.useCallback(()=>N(e=>e-1),[]),children:f.jsx(ou.div,{tabIndex:y||0===k?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:fu(e.onMouseDown,()=>{j.current=!0}),onFocus:fu(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Fp,zp);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=_().filter(e=>e.focusable);eg([e.find(e=>e.active),e.find(e=>e.id===b),...e].filter(Boolean).map(e=>e.ref.current),u)}}j.current=!1}),onBlur:fu(e.onBlur,()=>x(!1))})})}),Qp="RovingFocusGroupItem",Xp=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=e,l=Wu(),c=a||l,u=Gp(Qp,n),d=u.currentTabStopId===c,h=Wp(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:b}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),f.jsx(Bp.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:f.jsx(ou.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:fu(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:fu(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:fu(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Zp[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const a=s.indexOf(e.currentTarget);s=u.loop?(r=a+1,(n=s).map((e,t)=>n[(r+t)%n.length])):s.slice(a+1)}setTimeout(()=>eg(s))}var n,r}),children:"function"==typeof i?i({isCurrentTabStop:d,hasTabStop:null!=b}):i})})});Xp.displayName=Qp;var Zp={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eg(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var tg=Yp,ng=Xp;var rg=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=m.useState(),r=m.useRef(null),s=m.useRef(e),a=m.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return m.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const e=sg(r.current);a.current="mounted"===o?e:"none"},[o]),zu(()=>{const t=r.current,n=s.current;if(n!==e){const r=a.current,i=sg(t);if(e)l("MOUNT");else if("none"===i||"none"===t?.display)l("UNMOUNT");else{l(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),zu(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=a=>{const i=sg(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=sg(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:m.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):m.Children.only(n),a=nu(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?m.cloneElement(s,{ref:a}):null};function sg(e){return e?.animationName||"none"}rg.displayName="Presence";var ag="Tabs",[ig]=mu(ag,[Vp]),og=Vp(),[lg,cg]=ig(ag),ug=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=vu(o),[d,h]=of({prop:r,onChange:s,defaultProp:a??"",caller:ag});return f.jsx(lg,{scope:n,baseId:Wu(),value:d,onValueChange:h,orientation:i,dir:u,activationMode:l,children:f.jsx(ou.div,{dir:u,"data-orientation":i,...c,ref:t})})});ug.displayName=ag;var dg="TabsList",hg=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=cg(dg,n),i=og(n);return f.jsx(tg,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:f.jsx(ou.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});hg.displayName=dg;var fg="TabsTrigger",mg=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=cg(fg,n),o=og(n),l=bg(i.baseId,r),c=vg(i.baseId,r),u=r===i.value;return f.jsx(ng,{asChild:!0,...o,focusable:!s,active:u,children:f.jsx(ou.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:fu(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:fu(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:fu(e.onFocus,()=>{const e="manual"!==i.activationMode;u||s||!e||i.onValueChange(r)})})})});mg.displayName=fg;var pg="TabsContent",gg=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,o=cg(pg,n),l=bg(o.baseId,r),c=vg(o.baseId,r),u=r===o.value,d=m.useRef(u);return m.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),f.jsx(rg,{present:s||u,children:({present:n})=>f.jsx(ou.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:n&&a})})});function bg(e,t){return`${e}-trigger-${t}`}function vg(e,t){return`${e}-content-${t}`}gg.displayName=pg;var yg=hg,xg=mg,wg=gg;const _g=ug,jg=m.forwardRef(({className:e,...t},n)=>f.jsx(yg,{ref:n,className:ho("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));jg.displayName=yg.displayName;const kg=m.forwardRef(({className:e,...t},n)=>f.jsx(xg,{ref:n,className:ho("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));kg.displayName=xg.displayName;const Ng=m.forwardRef(({className:e,...t},n)=>f.jsx(wg,{ref:n,className:ho("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ng.displayName=wg.displayName;var Sg="Switch",[Eg]=mu(Sg),[Cg,Tg]=Eg(Sg),Pg=m.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,p]=m.useState(null),g=nu(t,e=>p(e)),b=m.useRef(!1),v=!h||(u||!!h.closest("form")),[y,x]=of({prop:s,defaultProp:a??!1,onChange:c,caller:Sg});return f.jsxs(Cg,{scope:n,checked:y,disabled:o,children:[f.jsx(ou.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Ig(y),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:g,onClick:fu(e.onClick,e=>{x(e=>!e),v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),v&&f.jsx(Ag,{control:h,bubbles:!b.current,name:r,value:l,checked:y,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Pg.displayName=Sg;var Og="SwitchThumb",Rg=m.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=Tg(Og,n);return f.jsx(ou.span,{"data-state":Ig(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});Rg.displayName=Og;var Ag=m.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=m.useRef(null),o=nu(i,a),l=lf(n),c=Dh(t);return m.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&s){const t=new Event("click",{bubbles:r});s.call(e,n),e.dispatchEvent(t)}},[l,n,r]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Ig(e){return e?"checked":"unchecked"}Ag.displayName="SwitchBubbleInput";var Dg=Pg,Mg=Rg;const Lg=m.forwardRef(({className:e,...t},n)=>f.jsx(Dg,{className:ho("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:f.jsx(Mg,{className:ho("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function $g(){const{businessSettings:e,businessServices:t,blockedSlots:n,businessHoursNew:r,notificationSettings:s,error:a,saveBusinessSettings:i,saveBusinessService:o,deleteBusinessService:l,saveBlockedSlot:c,deleteBlockedSlot:u,saveBusinessHour:d,saveNotificationSettings:h}=Zc(),[p,g]=m.useState({business_name:"",business_email:"",business_phone:"",business_address:"",appointment_interval_minutes:30,buffer_time_minutes:15,default_appointment_duration_minutes:60,max_appointments_per_day:10}),[b,v]=m.useState({name:"",description:"",duration_minutes:60,price:null,is_active:!0}),[y,x]=m.useState({start_time:"",end_time:"",reason:""}),[w,_]=m.useState(!1),[j,k]=m.useState("general");m.useEffect(()=>{e&&g(e)},[e]);const N=(e,t)=>{g(n=>({...n,[e]:t}))};return f.jsxs(po,{className:"p-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Business Settings"}),f.jsx("p",{className:"text-gray-600",children:"Configure your business information, services, and availability"})]}),a&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg mb-6",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:a})]}),f.jsxs(_g,{value:j,onValueChange:k,children:[f.jsxs(jg,{className:"flex overflow-x-auto overflow-y-hidden w-full md:w-auto mb-6 space-x-2 border-b ",children:[f.jsxs(kg,{value:"general",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(il,{className:"w-4 h-4"}),"General"]}),f.jsxs(kg,{value:"services",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(To,{className:"w-4 h-4"}),"Services"]}),f.jsxs(kg,{value:"hours",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(Fo,{className:"w-4 h-4"}),"Hours"]}),f.jsxs(kg,{value:"notifications",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(Co,{className:"w-4 h-4"}),"Notifications"]}),f.jsxs(kg,{value:"push",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(ll,{className:"w-4 h-4"}),"Push"]}),f.jsxs(kg,{value:"blocked",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(Po,{className:"w-4 h-4"}),"Blocked"]}),f.jsxs(kg,{value:"subscription",className:"flex items-center gap-2 flex-shrink-0 h-12 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[f.jsx(Uo,{className:"w-4 h-4"}),"Subscription"]})]}),f.jsxs(Ng,{value:"general",className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business_name",className:"text-sm font-medium",children:"Business Name"}),f.jsx(Yc,{id:"business_name",type:"text",className:"mt-1",value:p.business_name,onChange:e=>N("business_name",e.target.value),placeholder:"Your Business Name"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business_email",className:"text-sm font-medium",children:"Business Email"}),f.jsx(Yc,{id:"business_email",type:"email",className:"mt-1",value:p.business_email,onChange:e=>N("business_email",e.target.value),placeholder:"business@example.com"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business_phone",className:"text-sm font-medium",children:"Business Phone"}),f.jsx(Yc,{id:"business_phone",type:"tel",className:"mt-1",value:p.business_phone,onChange:e=>N("business_phone",e.target.value),placeholder:"+1 (555) 123-4567"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business_address",className:"text-sm font-medium",children:"Business Address"}),f.jsx(Yc,{id:"business_address",type:"text",className:"mt-1",value:p.business_address,onChange:e=>N("business_address",e.target.value),placeholder:"123 Business St, City, State"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business_website",className:"text-sm font-medium",children:"Website URL"}),f.jsx(Yc,{id:"business_website",type:"url",className:"mt-1",value:p.website||"",onChange:e=>N("website",e.target.value),placeholder:"https://yourwebsite.com"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"appointment_interval_minutes",className:"text-sm font-medium",children:"Appointment Interval (minutes)"}),f.jsx(Yc,{id:"appointment_interval_minutes",type:"number",min:"15",max:"240",className:"mt-1",value:p.appointment_interval_minutes,onChange:e=>N("appointment_interval_minutes",parseInt(e.target.value))})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"buffer_time_minutes",className:"text-sm font-medium",children:"Buffer Time Between Appointments (minutes)"}),f.jsx(Yc,{id:"buffer_time_minutes",type:"number",min:"0",max:"120",className:"mt-1",value:p.buffer_time_minutes,onChange:e=>N("buffer_time_minutes",parseInt(e.target.value))})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"default_appointment_duration_minutes",className:"text-sm font-medium",children:"Default Appointment Duration (minutes)"}),f.jsx(Yc,{id:"default_appointment_duration_minutes",type:"number",min:"15",max:"480",className:"mt-1",value:p.default_appointment_duration_minutes,onChange:e=>N("default_appointment_duration_minutes",parseInt(e.target.value))})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"max_appointments_per_day",className:"text-sm font-medium",children:"Max Appointments Per Day"}),f.jsx(Yc,{id:"max_appointments_per_day",type:"number",min:"1",max:"50",className:"mt-1",value:p.max_appointments_per_day,onChange:e=>N("max_appointments_per_day",parseInt(e.target.value))})]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx(mo,{variant:"outline",size:"default",onClick:()=>window.location.href="/onboarding-success",children:"Connect WordPress Appointments"}),f.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sync your Simply Schedule Appointments plugin"})]}),f.jsxs(mo,{className:"",variant:"default",size:"default",onClick:async()=>{_(!0);try{await i(p)}catch(lb){console.error("Failed to save settings:",lb)}finally{_(!1)}},disabled:w,children:[f.jsx(sl,{className:"w-4 h-4 mr-2"}),w?"Saving...":"Save Settings"]})]})]}),f.jsxs(Ng,{value:"services",className:"space-y-6",children:[f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Service"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"service_name",className:"text-sm font-medium",children:"Service Name *"}),f.jsx(Yc,{id:"service_name",type:"text",className:"mt-1",value:b.name,onChange:e=>v(t=>({...t,name:e.target.value})),placeholder:"e.g., Oil Change"})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"service_duration",className:"text-sm font-medium",children:"Duration (minutes)"}),f.jsx(Yc,{id:"service_duration",type:"number",min:"15",className:"mt-1",value:b.duration_minutes,onChange:e=>v(t=>({...t,duration_minutes:parseInt(e.target.value)}))})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"service_price",className:"text-sm font-medium",children:"Price (optional)"}),f.jsx(Yc,{id:"service_price",type:"number",min:"0",step:"0.01",className:"mt-1",value:b.price??0,onChange:e=>v(t=>({...t,price:parseFloat(e.target.value)||null})),placeholder:"0.00"})]})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx(uu,{htmlFor:"service_description",className:"text-sm font-medium",children:"Description"}),f.jsx(du,{id:"service_description",className:"mt-1",value:b.description,onChange:e=>v(t=>({...t,description:e.target.value})),placeholder:"Describe the service...",rows:2})]}),f.jsxs(mo,{onClick:async()=>{if(b.name.trim())try{await o(b),v({name:"",description:"",duration_minutes:60,price:null,is_active:!0})}catch(lb){console.error("Failed to add service:",lb)}},disabled:!b.name.trim(),className:"w-full",variant:"default",size:"default",children:[f.jsx(el,{className:"w-4 h-4 mr-2"}),"Add Service"]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Current Services"}),f.jsxs("div",{className:"space-y-2",children:[t.map(e=>f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium",children:e.name}),f.jsx("p",{className:"text-sm text-gray-600",children:e.description}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Duration: ",e.duration_minutes," min",e.price&&`  $${e.price}`]})]}),f.jsx(mo,{variant:"outline",size:"sm",onClick:()=>e.id&&l(e.id),children:f.jsx(ul,{className:"w-4 h-4"})})]},e.id)),0===t.length&&f.jsx("p",{className:"text-gray-500 text-center py-4",children:"No services configured yet"})]})]})]}),f.jsx(Ng,{value:"hours",className:"space-y-6",children:f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Business Hours"}),f.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure your operating hours for each day of the week"}),f.jsx("div",{className:"space-y-4",children:[{day:1,name:"Monday"},{day:2,name:"Tuesday"},{day:3,name:"Wednesday"},{day:4,name:"Thursday"},{day:5,name:"Friday"},{day:6,name:"Saturday"},{day:0,name:"Sunday"}].map(({day:e,name:t})=>{const n=r.find(t=>t.day_of_week===e);return f.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-20",children:f.jsx("p",{className:"font-medium",children:t})}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Lg,{id:`enabled-${e}`,checked:n?.is_enabled??!0,onCheckedChange:async t=>{n?await d({...n,is_enabled:t}):await d({day_of_week:e,is_enabled:t,open_time:"09:00",close_time:"17:00"})}}),f.jsx(uu,{htmlFor:`enabled-${e}`,className:"text-sm font-medium",children:n?.is_enabled??1?"Open":"Closed"})]})]}),(n?.is_enabled??!0)&&f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:`open-${e}`,className:"text-xs",children:"Open"}),f.jsx(Yc,{id:`open-${e}`,type:"time",value:n?.open_time||"09:00",onChange:async t=>{n?await d({...n,open_time:t.target.value}):await d({day_of_week:e,is_enabled:!0,open_time:t.target.value,close_time:"17:00"})},className:"w-24 h-8 text-xs"})]}),f.jsx("span",{className:"text-gray-400",children:"to"}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:`close-${e}`,className:"text-xs",children:"Close"}),f.jsx(Yc,{id:`close-${e}`,type:"time",value:n?.close_time||"17:00",onChange:async t=>{n?await d({...n,close_time:t.target.value}):await d({day_of_week:e,is_enabled:!0,open_time:"09:00",close_time:t.target.value})},className:"w-24 h-8 text-xs"})]})]})]},e)})})]})}),f.jsx(Ng,{value:"notifications",className:"space-y-6",children:f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Notification Settings"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"email_enabled",className:"text-sm font-medium",children:"Email Notifications"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send email notifications for appointments"})]}),f.jsx(Lg,{id:"email_enabled",checked:s?.email_enabled??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:e,sms_enabled:s?.sms_enabled??!1,email_reminders:s?.email_reminders??!1,sms_reminders:s?.sms_reminders??!1,email_confirmations:s?.email_confirmations??!1,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"sms_enabled",className:"text-sm font-medium",children:"SMS Notifications"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS notifications for appointments"})]}),f.jsx(Lg,{id:"sms_enabled",checked:s?.sms_enabled??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:e,email_reminders:s?.email_reminders??!1,sms_reminders:s?.sms_reminders??!1,email_confirmations:s?.email_confirmations??!1,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"email_reminders",className:"text-sm font-medium",children:"Email Reminders"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send email reminders before appointments"})]}),f.jsx(Lg,{id:"email_reminders",checked:s?.email_reminders??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:s?.sms_enabled??!1,email_reminders:e,sms_reminders:s?.sms_reminders??!1,email_confirmations:s?.email_confirmations??!1,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"sms_reminders",className:"text-sm font-medium",children:"SMS Reminders"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS reminders before appointments"})]}),f.jsx(Lg,{id:"sms_reminders",checked:s?.sms_reminders??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:s?.sms_enabled??!1,email_reminders:s?.email_reminders??!1,sms_reminders:e,email_confirmations:s?.email_confirmations??!1,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"email_confirmations",className:"text-sm font-medium",children:"Email Confirmations"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send email confirmations after booking"})]}),f.jsx(Lg,{id:"email_confirmations",checked:s?.email_confirmations??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:s?.sms_enabled??!1,email_reminders:s?.email_reminders??!1,sms_reminders:s?.sms_reminders??!1,email_confirmations:e,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"sms_confirmations",className:"text-sm font-medium",children:"SMS Confirmations"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS confirmations after booking"})]}),f.jsx(Lg,{id:"sms_confirmations",checked:s?.sms_confirmations??!1,onCheckedChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:s?.sms_enabled??!1,email_reminders:s?.email_reminders??!1,sms_reminders:s?.sms_reminders??!1,email_confirmations:s?.email_confirmations??!1,sms_confirmations:e,reminder_hours_before:s?.reminder_hours_before??24,created_at:s?.created_at,updated_at:s?.updated_at})})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"reminder_hours_before",className:"text-sm font-medium",children:"Reminder Hours Before Appointment"}),f.jsx(Yc,{id:"reminder_hours_before",type:"number",min:"1",max:"72",className:"mt-1",value:s?.reminder_hours_before??24,onChange:e=>h({id:s?.id,business_id:s?.business_id,email_enabled:s?.email_enabled??!1,sms_enabled:s?.sms_enabled??!1,email_reminders:s?.email_reminders??!1,sms_reminders:s?.sms_reminders??!1,email_confirmations:s?.email_confirmations??!1,sms_confirmations:s?.sms_confirmations??!1,reminder_hours_before:parseInt(e.target.value),created_at:s?.created_at,updated_at:s?.updated_at})})]})]})]})}),f.jsx(Ng,{value:"push",className:"space-y-6",children:f.jsx($p,{onNext:()=>{}})}),f.jsxs(Ng,{value:"blocked",className:"space-y-6",children:[f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Blocked Time Slot"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"block_start",className:"text-sm font-medium",children:"Start Time"}),f.jsx(Yc,{id:"block_start",type:"datetime-local",className:"mt-1",value:y.start_time,onChange:e=>x(t=>({...t,start_time:e.target.value}))})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"block_end",className:"text-sm font-medium",children:"End Time"}),f.jsx(Yc,{id:"block_end",type:"datetime-local",className:"mt-1",value:y.end_time,onChange:e=>x(t=>({...t,end_time:e.target.value}))})]})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx(uu,{htmlFor:"block_reason",className:"text-sm font-medium",children:"Reason"}),f.jsx(Yc,{id:"block_reason",type:"text",className:"mt-1",value:y.reason,onChange:e=>x(t=>({...t,reason:e.target.value})),placeholder:"e.g., Holiday, Maintenance"})]}),f.jsxs(mo,{className:"",variant:"default",size:"default",onClick:async()=>{if(y.start_time&&y.end_time)try{await c(y),x({start_time:"",end_time:"",reason:""})}catch(lb){console.error("Failed to add blocked slot:",lb)}},disabled:!y.start_time||!y.end_time,children:[f.jsx(el,{className:"w-4 h-4 mr-2"}),"Add Blocked Slot"]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Blocked Time Slots"}),f.jsxs("div",{className:"space-y-2",children:[n.map(e=>f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:e.reason}),f.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(e.start_time).toLocaleString()," -"," ",new Date(e.end_time).toLocaleString()]})]}),f.jsx(mo,{variant:"outline",size:"sm",onClick:()=>e.id&&u(e.id),children:f.jsx(ul,{className:"w-4 h-4"})})]},e.id)),0===n.length&&f.jsx("p",{className:"text-gray-500 text-center py-4",children:"No blocked slots configured"})]})]})]}),f.jsx(Ng,{value:"subscription",className:"space-y-6",children:f.jsx(Fg,{})})]})]})}function Fg(){const{currentPlan:e,usageStats:t,subscriptionPlans:n,getUpgradeRecommendation:r}=xl(),s=r();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"border rounded-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Current Plan"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-xl font-bold",children:e?.name||"Free"}),f.jsx("p",{className:"text-gray-600",children:e?.description}),f.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["$",e?.price_monthly||0,f.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})]}),f.jsx(mo,{variant:"outline",children:"Manage Subscription"})]})]}),f.jsxs("div",{className:"border rounded-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Usage This Month"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:t.appointments.used}),f.jsx("div",{className:"text-sm text-gray-600",children:"Appointments"}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:f.jsx("div",{className:"h-2 rounded-full "+(t.appointments.percentage>80?"bg-red-500":t.appointments.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${t.appointments.percentage}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.appointments.used," / ",t.appointments.limit]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:t.teamMembers.used}),f.jsx("div",{className:"text-sm text-gray-600",children:"Team Members"}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:f.jsx("div",{className:"h-2 rounded-full "+(t.teamMembers.percentage>80?"bg-red-500":t.teamMembers.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${t.teamMembers.percentage}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.teamMembers.used," / ",t.teamMembers.limit]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:t.services.used}),f.jsx("div",{className:"text-sm text-gray-600",children:"Services"}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:f.jsx("div",{className:"h-2 rounded-full "+(t.services.percentage>80?"bg-red-500":t.services.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${t.services.percentage}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.services.used," / ",t.services.limit]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:t.customers.used}),f.jsx("div",{className:"text-sm text-gray-600",children:"Customers"}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:f.jsx("div",{className:"h-2 rounded-full "+(t.customers.percentage>80?"bg-red-500":t.customers.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${t.customers.percentage}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.customers.used," / ",t.customers.limit]})]})]})]}),s&&f.jsxs("div",{className:"border rounded-lg p-6 bg-blue-50 border-blue-200",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-900",children:"Recommended Upgrade"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-xl font-bold text-blue-900",children:s.name}),f.jsx("p",{className:"text-blue-700",children:s.description}),f.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["$",s.price_monthly,f.jsx("span",{className:"text-sm font-normal text-blue-500",children:"/month"})]})]}),f.jsx(mo,{className:"bg-blue-600 hover:bg-blue-700",children:"Upgrade Now"})]})]}),f.jsxs("div",{className:"border rounded-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Plans"}),f.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:n.map(t=>f.jsxs(po,{className:"p-4 "+(e?.id===t.id?"ring-2 ring-blue-500 border-blue-500":""),children:[f.jsxs("div",{className:"text-center mb-4",children:[f.jsx("h4",{className:"font-bold",children:t.name}),f.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",t.price_monthly,f.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})]}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Appointments:"}),f.jsx("span",{children:-1===t.max_appointments_per_month?"Unlimited":t.max_appointments_per_month})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Team Members:"}),f.jsx("span",{children:-1===t.max_team_members?"Unlimited":t.max_team_members})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Services:"}),f.jsx("span",{children:-1===t.max_services?"Unlimited":t.max_services})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Customers:"}),f.jsx("span",{children:-1===t.max_customers?"Unlimited":t.max_customers})]})]}),f.jsx(mo,{className:"w-full mt-4",variant:e?.id===t.id?"outline":"default",disabled:e?.id===t.id,children:e?.id===t.id?"Current Plan":"Select Plan"})]},t.id))})]})]})}function zg(){return f.jsx("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:f.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:f.jsx($g,{})})})}function Ug(){const e=_e(),{currentBusiness:t}=yl(),{subscriptionPlans:n,loading:r}=xl(),[s,a]=m.useState(null);return r?f.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-slate-600",children:"Loading subscription plans..."})]})}):f.jsx("div",{className:"min-h-screen bg-slate-50",children:f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsxs(mo,{variant:"ghost",onClick:()=>e("/"),className:"mb-4",children:[f.jsx(So,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Choose Your Plan"}),f.jsxs("p",{className:"text-slate-600",children:['Your business "',t?.name,'" needs an active subscription to continue.']})]}),t&&f.jsx(po,{className:"p-6 mb-8 border-amber-200 bg-amber-50",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx($o,{className:"w-6 h-6 text-amber-600"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-amber-900",children:"Subscription Required"}),f.jsxs("p",{className:"text-amber-800",children:["Current status:"," ",f.jsx(kl,{variant:"secondary",children:t.subscription_status})]})]})]})}),f.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map(e=>f.jsxs(po,{className:"p-6 cursor-pointer transition-all "+(s===e.id?"ring-2 ring-blue-500 border-blue-500":"hover:shadow-lg"),onClick:()=>a(e.id),children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.name}),f.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:["$",e.price_monthly,f.jsx("span",{className:"text-sm font-normal text-slate-500",children:"/month"})]}),f.jsx("p",{className:"text-slate-600 text-sm",children:e.description})]}),f.jsxs("div",{className:"space-y-3 mb-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-slate-600",children:"Appointments"}),f.jsx("span",{className:"font-semibold",children:-1===e.max_appointments_per_month?"Unlimited":e.max_appointments_per_month})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-slate-600",children:"Team Members"}),f.jsx("span",{className:"font-semibold",children:-1===e.max_team_members?"Unlimited":e.max_team_members})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-slate-600",children:"Services"}),f.jsx("span",{className:"font-semibold",children:-1===e.max_services?"Unlimited":e.max_services})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-slate-600",children:"Customers"}),f.jsx("span",{className:"font-semibold",children:-1===e.max_customers?"Unlimited":e.max_customers})]})]}),f.jsx("div",{className:"space-y-2 mb-6",children:e.features&&Object.entries(e.features).map(([e,t])=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Lo,{className:"w-4 h-4 "+(t?"text-green-500":"text-slate-300")}),f.jsx("span",{className:"text-sm "+(t?"text-slate-700":"text-slate-400"),children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})]},e))}),f.jsx(mo,{className:"w-full",variant:s===e.id?"default":"outline",onClick:t=>{t.stopPropagation(),(async e=>{alert(`Subscription to plan ${e} would be processed here`)})(e.id)},children:s===e.id?"Selected":"Select Plan"})]},e.id))}),f.jsx("div",{className:"text-center mt-8 text-slate-500 text-sm",children:f.jsx("p",{children:"Need help choosing a plan? Contact our support team."})})]})})})}Lg.displayName=Dg.displayName;const Bg=m.forwardRef(({className:e,...t},n)=>f.jsx("div",{className:"relative w-full overflow-auto",children:f.jsx("table",{ref:n,className:ho("w-full caption-bottom text-sm",e),...t})}));Bg.displayName="Table";const Wg=m.forwardRef(({className:e,...t},n)=>f.jsx("thead",{ref:n,className:ho("[&_tr]:border-b",e),...t}));Wg.displayName="TableHeader";const Hg=m.forwardRef(({className:e,...t},n)=>f.jsx("tbody",{ref:n,className:ho("[&_tr:last-child]:border-0",e),...t}));Hg.displayName="TableBody";m.forwardRef(({className:e,...t},n)=>f.jsx("tfoot",{ref:n,className:ho("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const qg=m.forwardRef(({className:e,...t},n)=>f.jsx("tr",{ref:n,className:ho("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));qg.displayName="TableRow";const Vg=m.forwardRef(({className:e,...t},n)=>f.jsx("th",{ref:n,className:ho("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Vg.displayName="TableHead";const Kg=m.forwardRef(({className:e,...t},n)=>f.jsx("td",{ref:n,className:ho("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Kg.displayName="TableCell";function Gg(){const[e,t]=m.useState([]),[n,r]=m.useState(!1),[s,a]=m.useState(""),[i,o]=m.useState("");m.useEffect(()=>{l()},[]);const l=async()=>{r(!0);try{const{data:e,error:n}=await di.from("businesses").select("*").order("created_at",{ascending:!1});if(n)throw n;t(e||[])}catch(e){console.error("Failed to load businesses:",e),alert("Failed to load businesses")}finally{r(!1)}};return f.jsx("div",{className:"min-h-screen bg-slate-50",children:f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Admin Panel - Business Management"}),f.jsxs(po,{className:"p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Subscription Status"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business-select",children:"Select Business"}),f.jsxs(gp,{value:s,onValueChange:a,children:[f.jsx(vp,{children:f.jsx(bp,{placeholder:"Choose a business"})}),f.jsx(yp,{children:e.map(e=>f.jsx(xp,{value:e.id,children:e.name},e.id))})]})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"status-select",children:"New Status"}),f.jsxs(gp,{value:i,onValueChange:o,children:[f.jsx(vp,{children:f.jsx(bp,{placeholder:"Choose status"})}),f.jsxs(yp,{children:[f.jsx(xp,{value:"active",children:"Active"}),f.jsx(xp,{value:"inactive",children:"Inactive"}),f.jsx(xp,{value:"suspended",children:"Suspended"}),f.jsx(xp,{value:"trial",children:"Trial"})]})]})]}),f.jsx("div",{className:"flex items-end",children:f.jsx(mo,{onClick:async()=>{if(s&&i)try{const{error:e}=await di.from("businesses").update({subscription_status:i}).eq("id",s);if(e)throw e;alert("Subscription status updated successfully"),l(),a(""),o("")}catch(e){console.error("Failed to update status:",e),alert("Failed to update subscription status")}else alert("Please select a business and status")},className:"w-full",children:"Update Status"})})]})]}),f.jsxs(po,{className:"p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"All Businesses"}),n?f.jsxs("div",{className:"text-center py-8",children:[f.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-slate-600",children:"Loading businesses..."})]}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(Bg,{children:[f.jsx(Wg,{children:f.jsxs(qg,{children:[f.jsx(Vg,{children:"Name"}),f.jsx(Vg,{children:"Email"}),f.jsx(Vg,{children:"Owner ID"}),f.jsx(Vg,{children:"Subscription Status"}),f.jsx(Vg,{children:"Subscription Tier"}),f.jsx(Vg,{children:"Created At"})]})}),f.jsx(Hg,{children:e.map(e=>{return f.jsxs(qg,{children:[f.jsx(Kg,{className:"font-medium",children:e.name}),f.jsx(Kg,{children:e.email||"N/A"}),f.jsx(Kg,{className:"font-mono text-sm",children:e.owner_id}),f.jsx(Kg,{children:(t=e.subscription_status||"inactive",f.jsx(kl,{variant:{active:"default",inactive:"secondary",suspended:"destructive",trial:"outline"}[t]||"secondary",children:t}))}),f.jsx(Kg,{children:e.subscription_tier||"free"}),f.jsx(Kg,{children:new Date(e.created_at).toLocaleDateString()})]},e.id);var t})})]})})]})]})})})}function Yg(){return _l()?null:f.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg z-40",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(ml,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-red-900",children:"You're offline"}),f.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Changes will be synced when you're back online. Your data is saved locally."})]})]})})}function Jg(){const e=_e(),t=ye(),n=e=>t.pathname===e,r=[{path:"/",icon:Vo,label:"Home"},{path:"/appointments",icon:Po,label:"Appointments"},{path:"/profile",icon:hl,label:"Profile"}];return f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t md:hidden z-40",children:f.jsx("div",{className:"flex items-center justify-around",children:r.map(({path:t,icon:r,label:s})=>f.jsxs("button",{onClick:()=>e(t),className:"flex-1 flex flex-col items-center justify-center py-3 px-2 transition-colors "+(n(t)?"text-blue-600 border-t-2 border-blue-600":"text-slate-600 hover:text-slate-900"),children:[f.jsx(r,{className:"w-6 h-6 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:s})]},t))})})}function Qg(){const[e,t]=m.useState(null),[n,r]=m.useState(!1);m.useEffect(()=>{const e=e=>{e.preventDefault(),t(e),r(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);return n&&e?f.jsxs(po,{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 p-4 shadow-lg z-40",children:[f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Bo,{className:"w-5 h-5 text-blue-600 mt-0.5 shrink-0"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Install SSA Manager"}),f.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Install as an app for quick access and offline support"})]})]}),f.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-slate-100 rounded shrink-0",children:f.jsx(bl,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"flex gap-2 mt-3",children:[f.jsx(mo,{variant:"default",size:"sm",onClick:async()=>{if(!e)return;e.prompt();const{outcome:n}=await e.userChoice;"accepted"===n&&(r(!1),t(null))},className:"flex-1",children:"Install"}),f.jsx(mo,{size:"sm",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Later"})]})]}):null}function Xg(){return f.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:f.jsx(po,{className:"w-full max-w-2xl p-8 bg-slate-800 border-slate-700",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:f.jsx(dl,{className:"w-8 h-8 text-amber-500"})}),f.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Database Migration Required"}),f.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:"The application has been updated to support multi-tenant architecture, but the database migration hasn't been applied yet. Please run the migration script in your Supabase SQL Editor to continue."}),f.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6",children:[f.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Migration file location:"}),f.jsx("code",{className:"text-xs text-slate-300 bg-slate-900 px-2 py-1 rounded",children:"multi-tenant-migration.sql"})]}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsxs(mo,{onClick:()=>window.open("https://supabase.com/dashboard","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[f.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Open Supabase Dashboard"]}),f.jsx(mo,{variant:"outline",onClick:()=>window.location.reload(),className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Check Again"})]}),f.jsx("div",{className:"mt-8 text-xs text-slate-500",children:f.jsx("p",{children:"After running the migration, refresh this page to continue using the application."})})]})})})}function Zg({onNext:e}){const t=_e(),{currentBusiness:n,createBusiness:r,loading:s,error:a}=yl(),[i,o]=m.useState(!1),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,p]=m.useState(!1);if(!n){const e=async e=>{if(e.preventDefault(),l.trim()){p(!0);try{await r({name:l.trim(),website:u.trim()||void 0})}catch(t){console.error("Failed to create business:",t)}finally{p(!1)}}};return f.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:f.jsxs(po,{className:"p-8 max-w-md w-full",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx(Lo,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Account Created Successfully!"}),f.jsx("p",{className:"text-slate-600",children:"Welcome to SSA Manager. Let's create your business to get started."})]}),f.jsxs("form",{onSubmit:e,className:"space-y-4",children:[a&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[f.jsx(Mo,{className:"w-4 h-4 text-red-600"}),f.jsx("p",{className:"text-sm text-red-600",children:a})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business-name",className:"text-sm font-medium",children:"Business Name"}),f.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Enter the name of your business or service."}),f.jsx(Yc,{id:"business-name",type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"My Business Name",required:!0,disabled:h})]}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"business-website",className:"text-sm font-medium",children:"Website URL (Optional)"}),f.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Enter your WordPress website URL for appointment integration."}),f.jsx(Yc,{id:"business-website",type:"url",value:u,onChange:e=>d(e.target.value),placeholder:"https://yourwebsite.com",disabled:h})]}),f.jsxs(mo,{type:"submit",className:"w-full",disabled:h||s||!l.trim(),children:[h?"Creating Business...":"Create Business",f.jsx(Eo,{className:"w-4 h-4 ml-2"})]})]})]})})}const g=`https://your-supabase-project.supabase.co/functions/v1/process-appointment?webhook_secret=${n.webhook_secret}`;return f.jsx("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:f.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:f.jsxs(po,{className:"p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx(Lo,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Business Created Successfully!"}),f.jsxs("p",{className:"text-slate-600",children:["Welcome to SSA Manager, ",n.name,". Let's get you set up to receive appointments from your WordPress site."]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"webhook-url",className:"text-sm font-medium",children:"Your Webhook URL"}),f.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Copy this URL to use in your WordPress SSA plugin configuration."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Yc,{id:"webhook-url",value:g,readOnly:!0,className:"flex-1"}),f.jsxs(mo,{variant:"outline",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(g),o(!0),setTimeout(()=>o(!1),2e3)}catch(lb){console.error("Failed to copy:",lb)}},className:"shrink-0",children:[f.jsx(zo,{className:"w-4 h-4 mr-2"}),i?"Copied!":"Copy"]})]})]}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Next Steps"}),f.jsxs("ol",{className:"text-sm text-blue-800 space-y-1",children:[f.jsx("li",{children:"1. Install the SSA WordPress plugin on your site"}),f.jsx("li",{children:"2. Configure the plugin with your webhook URL above"}),f.jsx("li",{children:"3. Test the connection to ensure appointments flow through"}),f.jsx("li",{children:"4. Start managing your appointments in SSA Manager!"})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(mo,{className:"flex-1",onClick:e||(()=>t("/onboarding/setup")),children:["Setup WordPress Plugin",f.jsx(Eo,{className:"w-4 h-4 ml-2"})]}),f.jsx(mo,{variant:"outline",onClick:()=>t("/appointments"),children:"Skip Setup"})]})]})]})})})}function eb({onNext:e}){const t=_e(),{currentBusiness:n}=yl(),[r,s]=m.useState(1),[a,i]=m.useState(!1);if(!n)return f.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:f.jsx(po,{className:"p-8 text-center",children:f.jsx("p",{className:"text-slate-600",children:"Loading business information..."})})});const o=`https://cuzwnsrtdnybwtuwaosr.supabase.co/functions/v1/ssa-appointments/${n.webhook_secret}`,l=[{title:"Go to WordPress Admin  Simply Schedule Appointments",content:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-slate-600",children:"Navigate to your WordPress admin dashboard and find the Simply Schedule Appointments plugin."}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Step 1: Access WordPress Admin"}),f.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Go to your WordPress site and log in to the admin dashboard."}),f.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Step 2: Find SSA Plugin"}),f.jsx("p",{className:"text-sm text-blue-800",children:'Look for "Simply Schedule Appointments" in your admin menu.'})]})]})},{title:"Click Settings  Webhooks",content:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-slate-600",children:"In the SSA plugin, navigate to the Settings section and find the Webhooks tab."}),f.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Navigation Steps"}),f.jsxs("ol",{className:"text-sm text-green-800 space-y-1 list-decimal list-inside",children:[f.jsx("li",{children:'Click on "Settings" in the SSA menu'}),f.jsx("li",{children:'Look for the "Webhooks" tab or section'}),f.jsx("li",{children:"Click on Webhooks to open the configuration"})]})]})]})},{title:"Paste your URL in the 'URLs' field",content:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-slate-600",children:"Copy your webhook URL and paste it into the URLs field in the SSA webhooks settings."}),f.jsxs("div",{children:[f.jsx(uu,{htmlFor:"webhook-url",className:"text-sm font-medium",children:"Your Webhook URL"}),f.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Copy this URL and paste it in the SSA plugin settings."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Yc,{id:"webhook-url",value:o,readOnly:!0,className:"flex-1"}),f.jsxs(mo,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)}catch(lb){console.error("Failed to copy:",lb)}})(o),className:"shrink-0",children:[f.jsx(zo,{className:"w-4 h-4 mr-2"}),a?"Copied!":"Copy"]})]})]}),f.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"Configuration"}),f.jsxs("ol",{className:"text-sm text-amber-800 space-y-1 list-decimal list-inside",children:[f.jsx("li",{children:'Find the "URLs" field in the webhooks settings'}),f.jsx("li",{children:"Paste the webhook URL above into the field"}),f.jsx("li",{children:"Make sure there are no extra spaces"})]})]})]})},{title:"Save and create a test appointment",content:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-slate-600",children:"Save your webhook settings and create a test appointment to verify the connection."}),f.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Final Steps"}),f.jsxs("ol",{className:"text-sm text-purple-800 space-y-1 list-decimal list-inside",children:[f.jsx("li",{children:'Click "Save" or "Update" in the SSA settings'}),f.jsx("li",{children:"Create a test appointment on your WordPress site"}),f.jsx("li",{children:"Wait 1-2 minutes for the webhook to process"}),f.jsx("li",{children:"Check if the appointment appears in SSA Manager"})]})]}),f.jsxs(mo,{className:"w-full",onClick:e||(()=>t("/onboarding/verify")),children:["I've done this - Check for appointments",f.jsx(Eo,{className:"w-4 h-4 ml-2"})]})]})}];return f.jsx("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:f.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:f.jsxs(po,{className:"p-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsxs(mo,{variant:"ghost",onClick:()=>t("/onboarding-success"),className:"mb-4",children:[f.jsx(So,{className:"w-4 h-4 mr-2"}),"Back to Success"]}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Connect Your WordPress Site"}),f.jsx("p",{className:"text-slate-600",children:"Follow these steps to connect your WordPress site to SSA Manager."})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:l.map((e,t)=>f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold "+(t+1<=r?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"),children:t+1<=r?f.jsx(Lo,{className:"w-4 h-4"}):t+1}),t<l.length-1&&f.jsx("div",{className:"w-12 h-0.5 "+(t+1<r?"bg-blue-600":"bg-slate-200")})]},t))}),f.jsxs("h2",{className:"text-xl font-semibold text-slate-900",children:["Step ",r,": ",l[r-1].title]})]}),f.jsx("div",{className:"mb-8",children:l[r-1].content}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx(mo,{variant:"outline",onClick:()=>s(Math.max(1,r-1)),disabled:1===r,children:"Previous"}),f.jsxs(mo,{onClick:()=>{r<l.length?s(r+1):e?.()||t("/onboarding/verify")},children:[r===l.length?"Test Connection":"Next",f.jsx(Eo,{className:"w-4 h-4 ml-2"})]})]})]})})})}function tb({onComplete:e}){const t=_e(),{currentBusiness:n}=yl(),{appointments:r}=wl(void 0),[s,a]=m.useState(!1),[i,o]=m.useState("unknown"),[l,c]=m.useState(null);m.useEffect(()=>{if(r.length>0){const e=r.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());c(e[0])}},[r]);return n?f.jsx("div",{className:"min-h-screen bg-slate-50 pb-20 md:pb-0",children:f.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:f.jsxs(po,{className:"p-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsxs(mo,{variant:"ghost",onClick:()=>t("/onboarding/setup"),className:"mb-4",children:[f.jsx(So,{className:"w-4 h-4 mr-2"}),"Back to Setup"]}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Verify Connection"}),f.jsx("p",{className:"text-slate-600",children:"Let's check if your WordPress site is successfully connected to SSA Manager."})]}),f.jsx("div",{className:"mb-8",children:f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:["connected"===i?f.jsx(Lo,{className:"w-8 h-8 text-green-600"}):"disconnected"===i?f.jsx($o,{className:"w-8 h-8 text-red-600"}):f.jsx(Mo,{className:"w-8 h-8 text-slate-400"}),f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold",children:["Connection Status:"," ",f.jsx(kl,{variant:"connected"===i?"default":"disconnected"===i?"destructive":"secondary",children:"connected"===i?"Success! Connected ":"disconnected"===i?"Waiting for first appointment...":"Unknown"})]}),f.jsx("p",{className:"text-sm text-slate-600",children:"connected"===i?"Your WordPress site is successfully connected! Appointments will now appear in your dashboard.":"disconnected"===i?"No recent appointments detected. Create a test appointment on your WordPress site.":"Click 'Check Again' to check the status."})]})]})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Appointments"}),0===r.length?f.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[f.jsx(Mo,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),f.jsx("p",{className:"text-slate-600",children:"No appointments found"}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Create a test appointment on your WordPress site to verify the connection."})]}):f.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(e=>f.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:e.customer_name}),f.jsxs("p",{className:"text-sm text-slate-600",children:[e.service_name," -"," ",new Date(e.created_at).toLocaleDateString()]})]}),f.jsx(kl,{variant:"outline",children:e.status})]},e.id)),r.length>3&&f.jsxs("p",{className:"text-center text-sm text-slate-600 pt-2",children:["+",r.length-3," more appointments"]})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(mo,{onClick:async()=>{a(!0),await new Promise(e=>setTimeout(e,2e3));const e=new Date(Date.now()-864e5);r.filter(t=>new Date(t.created_at)>e).length>0?o("connected"):o("disconnected"),a(!1)},disabled:s,className:"w-full",children:s?f.jsxs(f.Fragment,{children:[f.jsx(nl,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking..."]}):f.jsxs(f.Fragment,{children:[f.jsx(nl,{className:"w-4 h-4 mr-2"}),"Check Again"]})}),"connected"===i&&f.jsxs(mo,{className:"w-full",onClick:e||(()=>t("/dashboard")),children:["Go to Dashboard",f.jsx(Eo,{className:"w-4 h-4 ml-2"})]}),"disconnected"===i&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Connection Issues"}),f.jsxs("ul",{className:"text-sm text-red-800 space-y-1 list-disc list-inside",children:[f.jsx("li",{children:"Check that the webhook URL is correct in the plugin settings"}),f.jsx("li",{children:"Verify the plugin is activated and configured"}),f.jsx("li",{children:"Check WordPress error logs for any issues"}),f.jsx("li",{children:"Try creating a test appointment and wait a few minutes"})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(mo,{variant:"outline",className:"flex-1",onClick:()=>t("/onboarding/setup"),children:"Review Setup Steps"}),f.jsx(mo,{variant:"outline",className:"flex-1",onClick:e||(()=>t("/dashboard")),children:"Continue Anyway"})]})]})]})]})})}):f.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:f.jsx(po,{className:"p-8 text-center",children:f.jsx("p",{className:"text-slate-600",children:"Loading business information..."})})})}function nb(){const e=_e(),[t,n]=m.useState("success"),r=e=>{n(e)},s=()=>{e("/dashboard")};return"success"===t?f.jsx(Zg,{onNext:()=>r("guide")}):"guide"===t?f.jsx(eb,{onNext:()=>r("push")}):"push"===t?f.jsx($p,{onNext:()=>r("verify")}):"verify"===t?f.jsx(tb,{onComplete:s}):null}m.forwardRef(({className:e,...t},n)=>f.jsx("caption",{ref:n,className:ho("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const rb="appointments";let sb=null;function ab({children:e}){const{user:t,loading:n}=fi(),{currentBusiness:r,loading:s,error:a}=yl();return xl(),n||s?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-900",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-slate-300",children:"Loading..."})]})}):a?.includes("migration")||a?.includes("infinite recursion")?f.jsx(Xg,{}):r&&r.subscription_status&&"active"!==r.subscription_status?f.jsx(Ae,{to:"/subscribe",replace:!0}):t?f.jsx(f.Fragment,{children:e}):f.jsx(Ae,{to:"/login",replace:!0})}function ib(){const[e,t]=m.useState(navigator.onLine),{user:n}=fi();return yl(),m.useEffect(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),(async()=>{try{if(await async function(){return new Promise((e,t)=>{const n=indexedDB.open("ssa-app-db",1);n.onerror=()=>t(n.error),n.onsuccess=()=>{sb=n.result,e(sb)},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(rb)||t.createObjectStore(rb,{keyPath:"id"})}})}(),"serviceWorker"in navigator)try{await navigator.serviceWorker.register("/sw.js",{scope:"/"})}catch(e){console.log("SW registration failed: ",e)}}catch(e){console.error("App initialization failed:",e)}})(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),m.useEffect(()=>{(async()=>{if(n?.id)try{const e=(await R(async()=>{const{default:e}=await import("./index-nt6QHW5g.js");return{default:e}},[])).default;await e.login(n.id),console.log("OneSignal external user ID set:",n.id)}catch(e){console.error("Failed to set OneSignal external user ID:",e)}})()},[n?.id]),f.jsx(st,{children:f.jsxs("div",{className:"min-h-screen bg-slate-50",children:[f.jsx(Pp,{}),f.jsx("main",{children:f.jsxs(Me,{children:[f.jsx(Ie,{index:!0,element:f.jsx(vl,{})}),f.jsx(Ie,{path:"login",element:f.jsx(Ep,{})}),f.jsx(Ie,{path:"signup",element:f.jsx(Cp,{})}),f.jsx(Ie,{path:"verify-email",element:f.jsx(Tp,{})}),f.jsx(Ie,{path:"appointments",element:f.jsx(ab,{children:f.jsx(Sp,{})})}),f.jsx(Ie,{path:"profile",element:f.jsx(ab,{children:f.jsx(Lp,{})})}),f.jsx(Ie,{path:"settings",element:f.jsx(ab,{children:f.jsx(zg,{})})}),f.jsx(Ie,{path:"subscribe",element:f.jsx(Ug,{})}),f.jsx(Ie,{path:"admin",element:f.jsx(Gg,{})}),f.jsx(Ie,{path:"onboarding-success",element:f.jsx(ab,{children:f.jsx(nb,{})})}),f.jsx(Ie,{path:"*",element:f.jsx(Ae,{to:"/",replace:!0})})]})}),!e&&f.jsx(Yg,{}),f.jsx(Jg,{}),f.jsx(Qg,{})]})})}P.createRoot(document.getElementById("root")).render(f.jsx(p.StrictMode,{children:f.jsx(ib,{})}));
